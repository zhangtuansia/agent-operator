<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" id="theme-color-meta" content="#f9f9fa" />
  <title>Beautiful Mermaid — Mermaid Rendering, Made Beautiful</title>
  <meta name="description" content="Open source diagram rendering library built for the AI era. Ultra-fast, fully themeable, outputs to SVG and ASCII. Supports Flowchart, State, Sequence, Class, and ER diagrams." />
  <link rel="icon" type="image/svg+xml" href="/mermaid/favicon.svg" />
  <link rel="icon" type="image/x-icon" href="/mermaid/favicon.ico" />
  <link rel="apple-touch-icon" href="/mermaid/apple-touch-icon.png" />
  <meta property="og:title" content="Beautiful Mermaid" />
  <meta property="og:description" content="Open source diagram rendering library built for the AI era. Ultra-fast, fully themeable, outputs to SVG and ASCII." />
  <meta property="og:image" content="https://agents.craft.do/mermaid/og-image.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://agents.craft.do/mermaid" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Beautiful Mermaid" />
  <meta name="twitter:description" content="Mermaid rendering, made beautiful. Ultra-fast, fully themeable, outputs to SVG and ASCII." />
  <meta name="twitter:image" content="https://agents.craft.do/mermaid/og-image.png" />
  <!-- Plausible Analytics -->
  <script defer data-domain="agents.craft.do/mermaid" src="https://plausible.io/js/script.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    /* -- Reset & base -- */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    /* -----------------------------------------------------------------
     * CSS custom property theming
     *
     * --t-bg and --t-fg drive the entire page color scheme.
     * All other colors are derived via color-mix(). When a theme is
     * selected from the pill bar, JS updates these two variables on
     * <body> — and the whole page adapts instantly.
     * ----------------------------------------------------------------- */
    body {
      --t-bg: #FFFFFF;
      --t-fg: #27272A;
      --t-accent: #3b82f6;
      --foreground-rgb: 39, 39, 42;
      --accent-rgb: 59, 130, 246;
      --shadow-border-opacity: 0.08;
      --shadow-blur-opacity: 0.06;
      --theme-bar-bg: #f9f9fa;  /* Mixed bg for theme bar and top gradient — updated by JS on theme change */

      font-family: 'Geist', system-ui, -apple-system, sans-serif;
      background: color-mix(in srgb, var(--t-fg) 4%, var(--t-bg));
      color: var(--t-fg);
      line-height: 1.6;
      margin: 0;
      transition: background 0.2s, color 0.2s;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .content-wrapper {
      max-width: 1440px;
      margin: 0 auto;
      padding: 2rem;
      padding-top: 0;
    }
    @media (max-width: 768px) {
      .content-wrapper {
        padding: 1rem;
        padding-top: 0;
      }
    }
    @media (min-width: 1000px) {
      .content-wrapper {
        padding: 3rem;
        padding-top: 0;
      }
    }

    /* -- Scroll fade gradients (GPU accelerated) -- */
    body::before,
    body::after {
      content: '';
      position: fixed;
      left: 0;
      right: 0;
      height: 64px;
      pointer-events: none;
      z-index: 1000;
      will-change: transform;
    }
    body::before {
      top: 0;
      background: linear-gradient(to bottom, var(--theme-bar-bg) 0%, transparent 100%);
    }
    body::after {
      bottom: 0;
      background: linear-gradient(to top, var(--theme-bar-bg) 0%, transparent 100%);
    }

    /* -- Theme selector bar (full-width, sits outside .content-wrapper) -- */
    .theme-bar {
      position: sticky;
      top: 0;
      z-index: 1001;
      background: transparent;
      padding: 0.5rem 2rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      overflow: visible;
    }
    @media (max-width: 768px) {
      .theme-bar {
        padding: 0.5rem 1rem;
      }
    }
    .theme-label {
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: color-mix(in srgb, var(--t-fg) 35%, var(--t-bg));
      white-space: nowrap;
    }
    .theme-pills {
      display: flex;
      gap: 0.3rem;
      overflow: visible;
      padding: 4px;
      margin: -4px;
      margin-left: auto;
      position: relative;
      z-index: 2;
    }
    .theme-pills-inline {
      display: flex;
      gap: 0.3rem;
    }
    /* Hide inline theme pills on smaller screens, show only "15 Themes" dropdown */
    @media (max-width: 1024px) {
      .theme-pills-inline {
        display: none;
      }
    }
    .theme-pill {
      display: flex;
      align-items: center;
      height: 30px;
      gap: 8px;
      padding: 0 14px 0 12px;
      border: none;
      border-radius: 8px;
      background: color-mix(in srgb, var(--t-bg) 97%, var(--t-fg));
      color: color-mix(in srgb, var(--t-fg) 80%, var(--t-bg));
      font-size: 12px;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      white-space: nowrap;
      transition: color 0.15s, background 0.15s, box-shadow 0.2s, transform 0.1s;
    }
    .theme-pill:hover {
      color: var(--t-fg);
      background: color-mix(in srgb, var(--t-bg) 92%, var(--t-fg));
    }
    .theme-pill.active {
      color: var(--t-fg);
      background: var(--t-bg);
      font-weight: 600;
    }
    .theme-pill:active {
      transform: translateY(0.5px);
    }
    .theme-swatch {
      display: inline-block;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    /* -- "More" dropdown for overflow themes -- */
    .theme-more-wrapper {
      position: relative;
    }
    .theme-more-dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 6px);
      right: 0;
      background: var(--t-bg);
      border-radius: 12px;
      padding: 6px;
      flex-direction: column;
      gap: 2px;
      min-width: 160px;
      z-index: 1002;
    }
    .theme-more-dropdown.open {
      display: flex;
    }
    .theme-more-dropdown .theme-pill {
      width: 100%;
      justify-content: flex-start;
      background: transparent;
      box-shadow: none;
    }
    .theme-more-dropdown .theme-pill:hover {
      background: color-mix(in srgb, var(--t-bg) 92%, var(--t-fg));
    }
    /* Active pill in dropdown gets bg + shadow-minimal (same as inline pills) */
    .theme-more-dropdown .theme-pill.active,
    .theme-more-dropdown .theme-pill.shadow-tinted {
      background: var(--t-bg);
      box-shadow:
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(var(--foreground-rgb), 0.06) 0px 0px 0px 1px,
        rgba(0, 0, 0, var(--shadow-blur-opacity)) 0px 1px 1px -0.5px,
        rgba(0, 0, 0, var(--shadow-blur-opacity)) 0px 3px 3px -1.5px;
    }

    /* -- Brand badge (left-aligned in theme bar) -- */
    .brand-badge-wrapper {
      position: relative;
    }
    .brand-badge {
      display: flex;
      align-items: center;
      height: 30px;
      gap: 6px;
      padding: 0 12px;
      border: none;
      border-radius: 8px;
      background: color-mix(in srgb, var(--t-bg) 97%, var(--t-fg));
      color: color-mix(in srgb, var(--t-fg) 80%, var(--t-bg));
      font-size: 12px;
      font-weight: 400;
      font-family: inherit;
      white-space: nowrap;
      cursor: pointer;
      transition: color 0.15s, background 0.15s, box-shadow 0.2s, transform 0.1s;
    }
    .brand-badge:hover {
      color: var(--t-fg);
      background: color-mix(in srgb, var(--t-bg) 92%, var(--t-fg));
    }
    .brand-badge.active {
      color: var(--t-fg);
      background: var(--t-bg);
    }
    .brand-badge:active {
      transform: translateY(0.5px);
    }
    .brand-logo {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }
    /* -- Brand dropdown -- */
    .brand-dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 6px);
      left: 0;
      background: var(--t-bg);
      border-radius: 12px;
      padding: 6px;
      flex-direction: column;
      gap: 2px;
      width: max-content;
      z-index: 1002;
    }
    .brand-dropdown.open {
      display: flex;
    }
    .brand-dropdown-item {
      display: flex;
      align-items: center;
      height: 34px;
      gap: 8px;
      padding: 0 12px;
      border-radius: 8px;
      background: transparent;
      color: var(--t-fg);
      text-decoration: none;
      font-size: 13px;
      font-weight: 400;
      transition: background 0.15s;
    }
    .brand-dropdown-item:hover {
      background: color-mix(in srgb, var(--t-bg) 92%, var(--t-fg));
    }
    .brand-dropdown-logo {
      flex-shrink: 0;
    }
    .brand-dropdown-item .tagline {
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
      font-weight: 300;
      margin-left: 0.25rem;
    }
    .brand-dropdown-item .tagline::before {
      content: '·';
      margin-right: 0.25rem;
    }

    /* -- Contents button (screen-centered via absolute positioning) -- */
    .contents-btn {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      height: 30px;
      gap: 6px;
      padding: 0 12px;
      border: none;
      border-radius: 8px;
      background: color-mix(in srgb, var(--t-bg) 97%, var(--t-fg));
      color: color-mix(in srgb, var(--t-fg) 80%, var(--t-bg));
      font-size: 12px;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      white-space: nowrap;
      transition: color 0.15s, background 0.15s, box-shadow 0.2s, transform 0.1s;
    }
    .contents-btn:hover {
      color: var(--t-fg);
      background: color-mix(in srgb, var(--t-bg) 92%, var(--t-fg));
    }
    .contents-btn.active {
      color: var(--t-fg);
      background: var(--t-bg);
    }
    .contents-btn:active {
      transform: translateX(-50%) translateY(0.5px);
    }
    .contents-btn svg {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }
    /* Hide contents button on smaller screens */
    @media (max-width: 1024px) {
      .contents-btn,
      .mega-menu {
        display: none !important;
      }
    }
    /* -- Craft shadow + radius utilities -- */
    .rounded-6px { border-radius: 6px; }
    .shadow-minimal {
      box-shadow:
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(var(--foreground-rgb), 0.06) 0px 0px 0px 1px,
        rgba(0, 0, 0, var(--shadow-blur-opacity)) 0px 1px 1px -0.5px,
        rgba(0, 0, 0, var(--shadow-blur-opacity)) 0px 3px 3px -1.5px;
    }
    .shadow-modal-small {
      box-shadow:
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(var(--foreground-rgb), 0.06) 0px 0px 0px 1px,
        rgba(0, 0, 0, calc(var(--shadow-blur-opacity) * 0.67)) 0px 1px 1px -0.5px,
        rgba(0, 0, 0, calc(var(--shadow-blur-opacity) * 0.67)) 0px 3px 3px 0px,
        rgba(0, 0, 0, calc(var(--shadow-blur-opacity) * 0.33)) 0px 6px 6px 0px,
        rgba(0, 0, 0, calc(var(--shadow-blur-opacity) * 0.33)) 0px 12px 12px 0px,
        rgba(0, 0, 0, calc(var(--shadow-blur-opacity) * 0.33)) 0px 24px 24px 0px;
    }
    .shadow-tinted {
      --shadow-color: 0, 0, 0;
      box-shadow:
        rgba(var(--shadow-color), 0) 0px 0px 0px 0px,
        rgba(var(--shadow-color), 0) 0px 0px 0px 0px,
        rgba(var(--shadow-color), calc(var(--shadow-border-opacity) * 1.5)) 0px 0px 0px 1px,
        rgba(var(--shadow-color), var(--shadow-border-opacity)) 0px 1px 1px -0.5px,
        rgba(var(--shadow-color), var(--shadow-blur-opacity)) 0px 3px 3px -1.5px,
        rgba(var(--shadow-color), calc(var(--shadow-blur-opacity) * 0.67)) 0px 6px 6px -3px;
    }

    /* -- Mega menu dropdown (x-centered with Contents button) -- */
    .mega-menu {
      display: none;
      position: absolute;
      top: calc(100% + 6px);
      left: 50%;
      transform: translateX(-50%);
      max-width: min(1180px, calc(100vw - 2rem));
      width: max-content;
      background: var(--t-bg);
      border-radius: 12px;
      padding: 1.5rem 2rem;
      max-height: 70vh;
      overflow-y: auto;
      overflow-x: hidden;
      z-index: 998;
    }
    .mega-menu.open {
      display: block;
    }
    .toc-grid {
      columns: 4;
      column-gap: 2rem;
    }
    @media (max-width: 1200px) {
      .toc-grid {
        columns: 3;
      }
    }
    .toc-category {
      display: inline-block;
      width: 100%;
      margin: 0;
      padding-bottom: 1rem;
    }
    .toc-category h3 {
      font-size: 0.85rem;
      font-weight: 600;
      margin: 0 0 0.5rem 0;
      color: var(--t-fg);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .toc-category ol {
      padding: 0;
      margin: 0;
      list-style: none;
      font-size: 0.8rem;
    }
    .toc-category li {
      margin-bottom: 0.15rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .toc-category a { color: var(--t-fg); text-decoration: none; }
    .toc-category a:hover { text-decoration: underline; }
    .toc-num { color: color-mix(in srgb, var(--t-fg) 30%, var(--t-bg)); }

    /* -- Sample card -- */
    .sample {
      background: var(--t-bg);
      margin-bottom: 2rem;
      overflow: hidden;
    }

    /* -- Hero sample (full-width SVG showcase, above Samples heading) -- */
    .sample-hero {
      margin-bottom: 0;
      background: transparent;
    }
    .hero-diagram-panel {
      padding: 1rem 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: transparent;
    }
    .hero-diagram-panel .svg-container {
      width: 100%;
      max-width: 100%;
    }
    .hero-diagram-panel .svg-container svg {
      width: 100%;
      height: auto;
    }

    .sample-header {
      padding: 1.25rem 1.5rem;
      max-width: 48rem;
      border-bottom: 1px solid color-mix(in srgb, var(--t-fg) 5%, var(--t-bg));
    }
    .sample-header h2 {
      font-size: 1.5rem;
      font-weight: 500;
      color: var(--t-fg);
    }
    .description {
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
      font-size: 1rem;
      font-weight: 400;
      margin-top: 0.1rem;
    }
    .description code {
      font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: 0.875em;
      color: color-mix(in srgb, var(--t-fg) 85%, var(--t-bg));
      background: color-mix(in srgb, var(--t-fg) 6%, var(--t-bg));
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
    }

    .sample-content {
      display: grid;
      grid-template-columns:
        minmax(200px, 1fr)
        minmax(250px, 2fr)
        minmax(250px, 2fr);
      min-height: 420px;
    }
    @media (max-width: 900px) {
      .sample-content { grid-template-columns: 1fr; }
      .ascii-panel { border-left: none !important; border-top: 1px solid color-mix(in srgb, var(--t-fg) 5%, var(--t-bg)) !important; }
    }

    /* -- Source panel -- */
    .source-panel {
      padding: 0.75rem 1.5rem;
      border-right: 1px solid color-mix(in srgb, var(--t-fg) 5%, var(--t-bg));
      min-width: 0;      /* grid child: allow shrinking below content width */
      overflow-y: auto;
    }
    .source-panel h3 {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: color-mix(in srgb, var(--t-fg) 35%, var(--t-bg));
      margin-bottom: 0.75rem;
    }
    .source-panel pre {
      padding: 1rem;
      font-size: 0.8rem;
      line-height: 1.5;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .source-panel code {
      font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
    }

    /* -- Shiki syntax highlighting overrides --
     * Shiki outputs inline style="color:#hex" per token. We override these with
     * color-mix() rules derived from --t-fg / --t-bg so tokens adapt to any theme.
     * The hex values below are from the github-light Shiki theme used at build time. */
    .source-panel {
      background: color-mix(in srgb, var(--t-fg) 1.5%, var(--t-bg));
    }
    .source-panel .shiki {
      background: transparent !important;
      padding: 0.5rem 0;
      font-size: 0.8rem;
      line-height: 1.5;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
      margin: 0;
    }
    .source-panel .shiki code {
      background: transparent;
      font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
    }
    /* Default text */
    .source-panel .shiki,
    .source-panel .shiki span[style*="#24292e"],
    .source-panel .shiki span[style*="#24292E"] {
      color: color-mix(in srgb, var(--t-fg) 70%, var(--t-bg)) !important;
    }
    /* Keywords: graph, subgraph, end, participant, -->, classDef, brackets */
    .source-panel .shiki span[style*="#D73A49"],
    .source-panel .shiki span[style*="#d73a49"] {
      color: color-mix(in srgb, var(--t-fg) 90%, var(--t-bg)) !important;
      font-weight: 500;
    }
    /* Direction labels, subgraph names */
    .source-panel .shiki span[style*="#6F42C1"],
    .source-panel .shiki span[style*="#6f42c1"] {
      color: color-mix(in srgb, var(--t-fg) 65%, var(--t-bg)) !important;
    }
    /* Node IDs */
    .source-panel .shiki span[style*="#E36209"],
    .source-panel .shiki span[style*="#e36209"] {
      color: color-mix(in srgb, var(--t-fg) 75%, var(--t-bg)) !important;
    }
    /* Strings, labels, message text */
    .source-panel .shiki span[style*="#032F62"],
    .source-panel .shiki span[style*="#032f62"] {
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg)) !important;
    }
    .options {
      margin-top: 0.75rem;
      font-size: 0.8rem;
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
    }
    .options code {
      background: color-mix(in srgb, var(--t-fg) 6%, var(--t-bg));
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
      font-size: 0.75rem;
    }

    /* -- SVG panel -- */
    .svg-panel {
      padding: 1.25rem 1.5rem;
      display: flex;
      flex-direction: column;
      min-width: 0;      /* grid child: allow shrinking below content width */
      /* Background set dynamically: matches the SVG --bg in default mode,
         or the global theme bg when a theme is active. */
    }
    .svg-panel h3 {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: color-mix(in srgb, var(--t-fg) 35%, var(--t-bg));
      margin-bottom: 0.75rem;
    }
    .svg-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 0;     /* flex child: allow shrinking to fit */
    }
    .svg-container svg {
      max-width: 100%;
      max-height: 100%;  /* scale down to fit both axes */
      height: auto;
    }

    /* -- ASCII panel -- */
    .ascii-panel {
      padding: 1.25rem 1.5rem;
      border-left: 1px solid color-mix(in srgb, var(--t-fg) 5%, var(--t-bg));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 0;      /* grid child: allow shrinking below content width */
    }
    .ascii-panel h3 {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: color-mix(in srgb, var(--t-fg) 35%, var(--t-bg));
      margin-bottom: 0.75rem;
    }
    .ascii-output {
      padding: 1rem;
      font-size: 0.7rem;
      line-height: 1.3;
      overflow-x: auto;   /* horizontal scroll only */
      overflow-y: hidden;  /* scale to height, no vertical scroll */
      white-space: pre;
      flex: 1;
      max-width: 100%;
      font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
    }

    /* -- Loading spinner -- */
    .loading-spinner {
      width: 24px;
      height: 24px;
      border: 2px solid color-mix(in srgb, var(--t-fg) 12%, var(--t-bg));
      border-top-color: color-mix(in srgb, var(--t-fg) 35%, var(--t-bg));
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* -- Timing badge -- */
    .timing {
      font-size: 0.7rem;
      font-weight: 400;
      color: color-mix(in srgb, var(--t-fg) 30%, var(--t-bg));
      margin-left: 0.5rem;
      text-transform: none;
      letter-spacing: normal;
    }

    /* -- Error state -- */
    .render-error {
      color: #ef4444;
      font-size: 0.85rem;
      font-family: 'JetBrains Mono', monospace;
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* -- Hero header section -- */
    .hero-header {
      max-width: 1440px;
      margin: 0 auto;
      padding: 6rem 2rem 2rem;
      text-align: left;
    }
    @media (min-width: 1000px) {
      .hero-header {
        padding: 6rem 3rem 2rem;
      }
    }
    .hero-title {
      font-size: 2.25rem;
      font-weight: 800;
      line-height: 1.2;
      margin: 0 0 0.25rem;
      color: var(--t-fg);
    }
    .hero-tagline {
      font-size: 1rem;
      font-weight: 500;
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
      margin: 0 0 1rem;
    }
    .hero-description {
      font-size: 0.95rem;
      line-height: 1.6;
      color: color-mix(in srgb, var(--t-fg) 70%, var(--t-bg));
      margin: 0 0 1.5rem;
      max-width: 680px;
    }
    .hero-description a {
      color: var(--t-fg);
      text-decoration: underline;
      text-underline-offset: 2px;
    }
    .hero-description a:hover {
      color: var(--t-accent);
    }
    .hero-buttons {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      gap: 0.5rem;
    }
    @media (max-width: 768px) {
      .hero-buttons {
        flex-direction: column;
      }
    }
    .hero-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: 12px;
      text-decoration: none;
      transition: opacity 0.15s, transform 0.1s;
      cursor: pointer;
      border: none;
      font-family: inherit;
    }
    .hero-btn:hover {
      opacity: 0.9;
    }
    .hero-btn:active {
      transform: translateY(0.5px);
    }
    .hero-btn-primary {
      background: var(--t-fg);
      color: var(--t-bg);
      box-shadow:
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(0, 0, 0, 0.1) 0px 1px 3px 0px,
        rgba(0, 0, 0, 0.1) 0px 1px 2px -1px;
    }
    .hero-btn-secondary {
      background: var(--t-bg);
      color: var(--t-fg);
      box-shadow:
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(0, 0, 0, 0) 0px 0px 0px 0px,
        rgba(var(--foreground-rgb), 0.06) 0px 0px 0px 1px,
        rgba(0, 0, 0, 0.1) 0px 1px 3px 0px,
        rgba(0, 0, 0, 0.1) 0px 1px 2px -1px;
    }
    .hero-btn svg {
      width: 16px;
      height: 16px;
    }
    .hero-description code {
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.85em;
      background: color-mix(in srgb, var(--t-fg) 8%, var(--t-bg));
      padding: 0.15em 0.4em;
      border-radius: 4px;
    }

    /* -- Hero meta (below buttons) -- */
    .hero-meta {
      margin-top: 1.25rem;
    }
    .hero-meta .meta {
      font-size: 0.85rem;
      color: color-mix(in srgb, var(--t-fg) 40%, var(--t-bg));
      margin: 0.15rem 0;
    }
    .hero-meta .meta a {
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
      text-decoration: underline;
      text-underline-offset: 2px;
    }
    .hero-meta .meta a:hover {
      color: var(--t-fg);
    }

    /* -- Section title -- */
    .section-title {
      font-size: 1.875rem;
      font-weight: 800;
      line-height: 1.2;
      margin: 0;
      padding: 2.5rem 0 1.5rem;
      color: var(--t-fg);
    }

    /* -- Footer -- */
    .site-footer {
      position: relative;
      z-index: 10;
      padding: 1.5rem 2rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1440px;
      width: 100%;
      margin: 0 auto;
      font-size: 12px;
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
    }
    @media (min-width: 1000px) {
      .site-footer {
        padding: 1.5rem 3rem 2rem;
      }
    }
    .footer-links {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .footer-links a {
      color: color-mix(in srgb, var(--t-fg) 50%, var(--t-bg));
      text-decoration: none;
      transition: color 0.15s;
    }
    .footer-links a:hover {
      color: var(--t-fg);
    }
    .footer-links svg {
      width: 1.25rem;
      height: 1.25rem;
      display: block;
    }
  </style>
</head>
<body>
  <!-- Safari 26+ reads title bar color from the topmost fixed element's background.
       This invisible 1px div provides a real DOM element for Safari to detect. -->
  <div id="safari-theme-color" style="position:fixed;top:0;left:0;right:0;height:1px;background:var(--theme-bar-bg);z-index:9999;pointer-events:none;"></div>

  <!-- Navigation + theme bar -->
  <div class="theme-bar" id="theme-bar">
    <div class="brand-badge-wrapper">
      <button class="brand-badge shadow-minimal" id="brand-badge-btn"><svg class="brand-logo" viewBox="0 0 299 300" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M137.879,300.001 L137.875,300.001 C62.3239,300.001 0.966154,239.232 0.0117188,163.908 L2.56478e-10,162.126 L137.879,162.126 L137.879,300.001 Z" fill="#06367A"/><path d="M137.879,0 L137.875,0 C61.729,0 0,61.729 0,137.875 L0,137.878 L137.879,137.878 L137.879,0 Z" fill="#FF51FF"/><path d="M160.558,137.883 L160.561,137.883 C236.707,137.883 298.436,76.1537 298.436,0.00758561 L298.436,0.00562043 L160.558,0.00562043 L160.558,137.883 Z" fill="#007CFF"/><path d="M160.558,162.123 L160.561,162.123 C236.112,162.123 297.471,222.891 298.426,298.216 L298.436,299.998 L160.558,299.998 L160.558,162.123 Z" fill="#0A377B"/></svg><span><strong>Beautiful Mermaid</strong> by Craft</span></button>
      <div class="brand-dropdown shadow-modal-small" id="brand-dropdown">
        <a href="https://agents.craft.do" class="brand-dropdown-item" target="_blank" rel="noopener">
          <svg width="18" height="18" class="brand-dropdown-logo" style="margin-left: -4px;" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="translate(3.4502, 3)" fill="#9570BE"><path d="M3.17890888,3.6 L3.17890888,0 L16,0 L16,3.6 L3.17890888,3.6 Z M9.642,7.2 L9.64218223,10.8 L0,10.8 L0,3.6 L16,3.6 L16,7.2 L9.642,7.2 Z M3.17890888,18 L3.178,14.4 L0,14.4 L0,10.8 L16,10.8 L16,18 L3.17890888,18 Z" fill-rule="nonzero"></path></g></svg>
          <span style="margin-left: -2px;">Craft Agents<span class="tagline">Simply mind-blowing</span></span>
        </a>
        <a href="https://craft.do" class="brand-dropdown-item" target="_blank" rel="noopener">
          <svg width="12" height="12" class="brand-dropdown-logo" viewBox="0 0 299 300" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M137.879 300L137.875 300.001C62.3239 300.001 0.966154 239.232 0.0117188 163.908L2.56478e-10 162.126H137.879V300Z" fill="currentColor"/><path d="M137.879 0.000976562L137.875 0C61.729 6.6569e-06 0.000194275 61.729 0 137.875L2.56478e-10 137.878L137.879 137.878L137.879 0.000976562Z" fill="currentColor"/><path d="M160.558 137.882L160.561 137.883C236.707 137.882 298.436 76.1537 298.436 0.00758561V0.00563248L160.558 0.00562043L160.558 137.882Z" fill="currentColor"/><path d="M160.558 162.124L160.561 162.123C236.112 162.123 297.471 222.891 298.426 298.216L298.436 299.998H160.558V162.124Z" fill="currentColor"/></svg>
          <span>Craft Docs<span class="tagline">Amazing Notes &amp; Docs</span></span>
        </a>
      </div>
    </div>
    <button class="contents-btn shadow-minimal" id="contents-btn"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><line x1="3" y1="4" x2="13" y2="4"/><line x1="3" y1="8" x2="13" y2="8"/><line x1="3" y1="12" x2="10" y2="12"/></svg>Contents</button>
    <div class="theme-pills" id="theme-pills">
      
    <div class="theme-pills-inline">
      <button class="theme-pill shadow-minimal active" data-theme=""><span class="theme-swatch" style="background:#FFFFFF;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Default</button>
      <button class="theme-pill shadow-minimal" data-theme="dracula"><span class="theme-swatch" style="background:#282a36;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Dracula</button>
      <button class="theme-pill shadow-minimal" data-theme="solarized-light"><span class="theme-swatch" style="background:#fdf6e3;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Solarized</button>
    </div>
    <div class="theme-more-wrapper">
      <button class="theme-pill shadow-minimal" id="theme-more-btn">15 Themes</button>
      <div class="theme-more-dropdown shadow-modal-small" id="theme-more-dropdown">
        <button class="theme-pill shadow-minimal active" data-theme=""><span class="theme-swatch" style="background:#FFFFFF;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Default</button>
        <button class="theme-pill shadow-minimal" data-theme="zinc-dark"><span class="theme-swatch" style="background:#18181B;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Zinc Dark</button>
        <button class="theme-pill shadow-minimal" data-theme="tokyo-night"><span class="theme-swatch" style="background:#1a1b26;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Tokyo Night</button>
        <button class="theme-pill shadow-minimal" data-theme="tokyo-night-storm"><span class="theme-swatch" style="background:#24283b;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Tokyo Storm</button>
        <button class="theme-pill shadow-minimal" data-theme="tokyo-night-light"><span class="theme-swatch" style="background:#d5d6db;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Tokyo Light</button>
        <button class="theme-pill shadow-minimal" data-theme="catppuccin-mocha"><span class="theme-swatch" style="background:#1e1e2e;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Catppuccin</button>
        <button class="theme-pill shadow-minimal" data-theme="catppuccin-latte"><span class="theme-swatch" style="background:#eff1f5;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Latte</button>
        <button class="theme-pill shadow-minimal" data-theme="nord"><span class="theme-swatch" style="background:#2e3440;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Nord</button>
        <button class="theme-pill shadow-minimal" data-theme="nord-light"><span class="theme-swatch" style="background:#eceff4;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Nord Light</button>
        <button class="theme-pill shadow-minimal" data-theme="dracula"><span class="theme-swatch" style="background:#282a36;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Dracula</button>
        <button class="theme-pill shadow-minimal" data-theme="github-light"><span class="theme-swatch" style="background:#ffffff;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>GitHub</button>
        <button class="theme-pill shadow-minimal" data-theme="github-dark"><span class="theme-swatch" style="background:#0d1117;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>GitHub Dark</button>
        <button class="theme-pill shadow-minimal" data-theme="solarized-light"><span class="theme-swatch" style="background:#fdf6e3;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1)"></span>Solarized</button>
        <button class="theme-pill shadow-minimal" data-theme="solarized-dark"><span class="theme-swatch" style="background:#002b36;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>Solar Dark</button>
        <button class="theme-pill shadow-minimal" data-theme="one-dark"><span class="theme-swatch" style="background:#282c34;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15)"></span>One Dark</button>
      </div>
    </div>
    </div>
    <div class="mega-menu shadow-modal-small" id="mega-menu">
      <div class="toc-grid">
        
        <div class="toc-category">
          <h3>Flowchart (21 samples)</h3>
          <ol start="1">
            <li><a href="#sample-1"><span class="toc-num">1.</span> Simple Flow</a></li>
            <li><a href="#sample-2"><span class="toc-num">2.</span> Original Node Shapes</a></li>
            <li><a href="#sample-3"><span class="toc-num">3.</span> Batch 1 Shapes</a></li>
            <li><a href="#sample-4"><span class="toc-num">4.</span> Batch 2 Shapes</a></li>
            <li><a href="#sample-5"><span class="toc-num">5.</span> All 12 Flowchart Shapes</a></li>
            <li><a href="#sample-6"><span class="toc-num">6.</span> All Edge Styles</a></li>
            <li><a href="#sample-7"><span class="toc-num">7.</span> No-Arrow Edges</a></li>
            <li><a href="#sample-8"><span class="toc-num">8.</span> Bidirectional Arrows</a></li>
            <li><a href="#sample-9"><span class="toc-num">9.</span> Parallel Links (&amp;)</a></li>
            <li><a href="#sample-10"><span class="toc-num">10.</span> Chained Edges</a></li>
            <li><a href="#sample-11"><span class="toc-num">11.</span> Direction: Left-Right (LR)</a></li>
            <li><a href="#sample-12"><span class="toc-num">12.</span> Direction: Bottom-Top (BT)</a></li>
            <li><a href="#sample-13"><span class="toc-num">13.</span> Subgraphs</a></li>
            <li><a href="#sample-14"><span class="toc-num">14.</span> Nested Subgraphs</a></li>
            <li><a href="#sample-15"><span class="toc-num">15.</span> Subgraph Direction Override</a></li>
            <li><a href="#sample-16"><span class="toc-num">16.</span> ::: Class Shorthand</a></li>
            <li><a href="#sample-17"><span class="toc-num">17.</span> Inline Style Overrides</a></li>
            <li><a href="#sample-18"><span class="toc-num">18.</span> CI/CD Pipeline</a></li>
            <li><a href="#sample-19"><span class="toc-num">19.</span> System Architecture</a></li>
            <li><a href="#sample-20"><span class="toc-num">20.</span> Decision Tree</a></li>
            <li><a href="#sample-21"><span class="toc-num">21.</span> Git Branching Workflow</a></li>
          </ol>
        </div>

        <div class="toc-category">
          <h3>State (3 samples)</h3>
          <ol start="22">
            <li><a href="#sample-22"><span class="toc-num">22.</span> Basic State Diagram</a></li>
            <li><a href="#sample-23"><span class="toc-num">23.</span> Composite States</a></li>
            <li><a href="#sample-24"><span class="toc-num">24.</span> Connection Lifecycle</a></li>
          </ol>
        </div>

        <div class="toc-category">
          <h3>Sequence (15 samples)</h3>
          <ol start="25">
            <li><a href="#sample-25"><span class="toc-num">25.</span> Basic Messages</a></li>
            <li><a href="#sample-26"><span class="toc-num">26.</span> Participant Aliases</a></li>
            <li><a href="#sample-27"><span class="toc-num">27.</span> Actor Stick Figures</a></li>
            <li><a href="#sample-28"><span class="toc-num">28.</span> Arrow Types</a></li>
            <li><a href="#sample-29"><span class="toc-num">29.</span> Activation Boxes</a></li>
            <li><a href="#sample-30"><span class="toc-num">30.</span> Self-Messages</a></li>
            <li><a href="#sample-31"><span class="toc-num">31.</span> Loop Block</a></li>
            <li><a href="#sample-32"><span class="toc-num">32.</span> Alt/Else Block</a></li>
            <li><a href="#sample-33"><span class="toc-num">33.</span> Opt Block</a></li>
            <li><a href="#sample-34"><span class="toc-num">34.</span> Par Block</a></li>
            <li><a href="#sample-35"><span class="toc-num">35.</span> Critical Block</a></li>
            <li><a href="#sample-36"><span class="toc-num">36.</span> Notes (Right/Left/Over)</a></li>
            <li><a href="#sample-37"><span class="toc-num">37.</span> OAuth 2.0 Flow</a></li>
            <li><a href="#sample-38"><span class="toc-num">38.</span> Database Transaction</a></li>
            <li><a href="#sample-39"><span class="toc-num">39.</span> Microservice Orchestration</a></li>
          </ol>
        </div>

        <div class="toc-category">
          <h3>Class (16 samples)</h3>
          <ol start="40">
            <li><a href="#sample-40"><span class="toc-num">40.</span> Basic Class</a></li>
            <li><a href="#sample-41"><span class="toc-num">41.</span> Visibility Markers</a></li>
            <li><a href="#sample-42"><span class="toc-num">42.</span> Interface Annotation</a></li>
            <li><a href="#sample-43"><span class="toc-num">43.</span> Abstract Annotation</a></li>
            <li><a href="#sample-44"><span class="toc-num">44.</span> Enum Annotation</a></li>
            <li><a href="#sample-45"><span class="toc-num">45.</span> Inheritance (&lt;|--)</a></li>
            <li><a href="#sample-46"><span class="toc-num">46.</span> Composition (*--)</a></li>
            <li><a href="#sample-47"><span class="toc-num">47.</span> Aggregation (o--)</a></li>
            <li><a href="#sample-48"><span class="toc-num">48.</span> Association (--&gt;)</a></li>
            <li><a href="#sample-49"><span class="toc-num">49.</span> Dependency (..&gt;)</a></li>
            <li><a href="#sample-50"><span class="toc-num">50.</span> Realization (..|&gt;)</a></li>
            <li><a href="#sample-51"><span class="toc-num">51.</span> All 6 Relationship Types</a></li>
            <li><a href="#sample-52"><span class="toc-num">52.</span> Relationship Labels</a></li>
            <li><a href="#sample-53"><span class="toc-num">53.</span> Design Pattern — Observer</a></li>
            <li><a href="#sample-54"><span class="toc-num">54.</span> MVC Architecture</a></li>
            <li><a href="#sample-55"><span class="toc-num">55.</span> Full Hierarchy</a></li>
          </ol>
        </div>

        <div class="toc-category">
          <h3>ER (14 samples)</h3>
          <ol start="56">
            <li><a href="#sample-56"><span class="toc-num">56.</span> Basic Relationship</a></li>
            <li><a href="#sample-57"><span class="toc-num">57.</span> Entity with Attributes</a></li>
            <li><a href="#sample-58"><span class="toc-num">58.</span> Attribute Keys (PK, FK, UK)</a></li>
            <li><a href="#sample-59"><span class="toc-num">59.</span> Exactly One to Exactly One (||--||)</a></li>
            <li><a href="#sample-60"><span class="toc-num">60.</span> Exactly One to Zero-or-Many (||--o{)</a></li>
            <li><a href="#sample-61"><span class="toc-num">61.</span> Zero-or-One to One-or-Many (|o--|{)</a></li>
            <li><a href="#sample-62"><span class="toc-num">62.</span> One-or-More to Zero-or-Many (}|--o{)</a></li>
            <li><a href="#sample-63"><span class="toc-num">63.</span> All Cardinality Types</a></li>
            <li><a href="#sample-64"><span class="toc-num">64.</span> Identifying (Solid) Relationship</a></li>
            <li><a href="#sample-65"><span class="toc-num">65.</span> Non-Identifying (Dashed) Relationship</a></li>
            <li><a href="#sample-66"><span class="toc-num">66.</span> Mixed Identifying &amp; Non-Identifying</a></li>
            <li><a href="#sample-67"><span class="toc-num">67.</span> E-Commerce Schema</a></li>
            <li><a href="#sample-68"><span class="toc-num">68.</span> Blog Platform Schema</a></li>
            <li><a href="#sample-69"><span class="toc-num">69.</span> School Management Schema</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>

  <!-- Hero header section -->
  <header class="hero-header">
    <h1 class="hero-title">Beautiful Mermaid</h1>
    <p class="hero-tagline">Mermaid Rendering, made beautiful.</p>
    <p class="hero-description">
      An open source library for rendering diagrams, designed for the age of AI: <a href="https://www.npmjs.com/package/beautiful-mermaid" target="_blank" rel="noopener"><code>beautiful-mermaid</code></a>.
      Ultra-fast, fully themeable, and outputs to both SVG and ASCII.<br>
      Built by the team at <a href="https://craft.do" target="_blank" rel="noopener">Craft</a> — because diagrams deserve great design too.
    </p>
    <div class="hero-buttons">
      <a href="https://agents.craft.do" target="_blank" rel="noopener" class="hero-btn hero-btn-primary">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="translate(3.4502, 3)" fill="currentColor"><path d="M3.17890888,3.6 L3.17890888,0 L16,0 L16,3.6 L3.17890888,3.6 Z M9.642,7.2 L9.64218223,10.8 L0,10.8 L0,3.6 L16,3.6 L16,7.2 L9.642,7.2 Z M3.17890888,18 L3.178,14.4 L0,14.4 L0,10.8 L16,10.8 L16,18 L3.17890888,18 Z" fill-rule="nonzero"></path></g></svg>
        Use in Craft Agents
      </a>
      <a href="https://github.com/lukilabs/beautiful-mermaid" target="_blank" rel="noopener" class="hero-btn hero-btn-secondary">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        GitHub
      </a>
      <button type="button" class="hero-btn hero-btn-secondary" id="random-theme-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="4" y1="4" x2="9" y2="9"/></svg>
        Random Theme
      </button>
    </div>
    <div class="hero-meta">
      <p class="meta" id="total-timing">Rendering 140 samples…</p>
      <div class="meta">ASCII rendering based on <a href="https://github.com/AlexanderGrooff/mermaid-ascii" target="_blank" rel="noopener">Mermaid-ASCII</a></div>
      <div class="meta">Early preview — actively evolving</div>
    </div>
  </header>

  <div class="content-wrapper">


    <section class="sample sample-hero" id="sample-0">
      <div class="hero-diagram-panel" id="svg-panel-0" data-sample-bg="">
        <div class="svg-container" id="svg-0">
          <div class="loading-spinner"></div>
        </div>
      </div>
    </section>

  <h2 class="section-title">Samples</h2>


    <section class="sample" id="sample-1">
      <div class="sample-header">
        <h2>Simple Flow</h2>
        <p class="description">Basic linear flow with three nodes connected by solid arrows.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Start</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> B[Process] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">End</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-1" data-sample-bg="">
          <div class="svg-container" id="svg-1">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-1">
          <pre class="ascii-output"><code id="ascii-1">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-2">
      <div class="sample-header">
        <h2>Original Node Shapes</h2>
        <p class="description">Rectangle, rounded, diamond, stadium, and circle.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Rectangle</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">(</span><span style="color:#032F62">Rounded</span><span style="color:#D73A49">)</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">{</span><span style="color:#032F62">Diamond</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">--></span><span style="color:#E36209"> D</span><span style="color:#D73A49">([</span><span style="color:#032F62">Stadium</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#E36209">  D </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span><span style="color:#D73A49">((</span><span style="color:#032F62">Circle</span><span style="color:#D73A49">))</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-2" data-sample-bg="">
          <div class="svg-container" id="svg-2">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-2">
          <pre class="ascii-output"><code id="ascii-2">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-3">
      <div class="sample-header">
        <h2>Batch 1 Shapes</h2>
        <p class="description">Subroutine <code>[[text]]</code>, double circle <code>(((text)))</code>, and hexagon <code>{{text}}</code>.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[[</span><span style="color:#032F62">Subroutine</span><span style="color:#D73A49">]]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">(((</span><span style="color:#032F62">Double Circle</span><span style="color:#D73A49">)))</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">{</span><span style="color:#24292E">{</span><span style="color:#032F62">Hexagon</span><span style="color:#D73A49">}</span><span style="color:#24292E">}</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-3" data-sample-bg="">
          <div class="svg-container" id="svg-3">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-3">
          <pre class="ascii-output"><code id="ascii-3">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-4">
      <div class="sample-header">
        <h2>Batch 2 Shapes</h2>
        <p class="description">Cylinder <code>[(text)]</code>, asymmetric <code>>text]</code>, trapezoid <code>[/text\]</code>, and inverse trapezoid <code>[\text/]</code>.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[(</span><span style="color:#032F62">Database</span><span style="color:#D73A49">)]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">></span><span style="color:#032F62">Flag Shape</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">/Wider Bottom\</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">--></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">\Wider Top/</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-4" data-sample-bg="">
          <div class="svg-container" id="svg-4">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-4">
          <pre class="ascii-output"><code id="ascii-4">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-5">
      <div class="sample-header">
        <h2>All 12 Flowchart Shapes</h2>
        <p class="description">Every supported flowchart shape in a single diagram.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Rectangle</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">(</span><span style="color:#032F62">Rounded</span><span style="color:#D73A49">)</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">{</span><span style="color:#032F62">Diamond</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">--></span><span style="color:#E36209"> D</span><span style="color:#D73A49">([</span><span style="color:#032F62">Stadium</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#E36209">  D </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span><span style="color:#D73A49">((</span><span style="color:#032F62">Circle</span><span style="color:#D73A49">))</span></span>
<span class="line"><span style="color:#E36209">  E </span><span style="color:#D73A49">--></span><span style="color:#E36209"> F</span><span style="color:#D73A49">[[</span><span style="color:#032F62">Subroutine</span><span style="color:#D73A49">]]</span></span>
<span class="line"><span style="color:#E36209">  F </span><span style="color:#D73A49">--></span><span style="color:#E36209"> G</span><span style="color:#D73A49">(((</span><span style="color:#032F62">Double Circle</span><span style="color:#D73A49">)))</span></span>
<span class="line"><span style="color:#E36209">  G </span><span style="color:#D73A49">--></span><span style="color:#E36209"> H</span><span style="color:#D73A49">{</span><span style="color:#24292E">{</span><span style="color:#032F62">Hexagon</span><span style="color:#D73A49">}</span><span style="color:#24292E">}</span></span>
<span class="line"><span style="color:#E36209">  H </span><span style="color:#D73A49">--></span><span style="color:#E36209"> I</span><span style="color:#D73A49">[(</span><span style="color:#032F62">Database</span><span style="color:#D73A49">)]</span></span>
<span class="line"><span style="color:#E36209">  I </span><span style="color:#D73A49">--></span><span style="color:#E36209"> J</span><span style="color:#D73A49">></span><span style="color:#032F62">Flag</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  J </span><span style="color:#D73A49">--></span><span style="color:#E36209"> K</span><span style="color:#D73A49">[</span><span style="color:#032F62">/Trapezoid\</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  K </span><span style="color:#D73A49">--></span><span style="color:#E36209"> L</span><span style="color:#D73A49">[</span><span style="color:#032F62">\Inverse Trap/</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-5" data-sample-bg="">
          <div class="svg-container" id="svg-5">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-5">
          <pre class="ascii-output"><code id="ascii-5">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-6">
      <div class="sample-header">
        <h2>All Edge Styles</h2>
        <p class="description">Solid, dotted, and thick arrows with labels.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Source</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> -->|</span><span style="color:#032F62">solid</span><span style="color:#D73A49">|</span><span style="color:#E36209"> B</span><span style="color:#D73A49">[</span><span style="color:#032F62">Target 1</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  A </span><span style="color:#D73A49">-.->|</span><span style="color:#032F62">dotted</span><span style="color:#D73A49">|</span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Target 2</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  A </span><span style="color:#D73A49">==>|</span><span style="color:#032F62">thick</span><span style="color:#D73A49">|</span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Target 3</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-6" data-sample-bg="">
          <div class="svg-container" id="svg-6">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-6">
          <pre class="ascii-output"><code id="ascii-6">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-7">
      <div class="sample-header">
        <h2>No-Arrow Edges</h2>
        <p class="description">Lines without arrowheads: solid <code>---</code>, dotted <code>-.-</code>, thick <code>===</code>.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Node 1</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> ---|</span><span style="color:#032F62">related</span><span style="color:#D73A49">|</span><span style="color:#E36209"> B</span><span style="color:#D73A49">[</span><span style="color:#032F62">Node 2</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">-.-</span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Node 3</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">===</span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Node 4</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-7" data-sample-bg="">
          <div class="svg-container" id="svg-7">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-7">
          <pre class="ascii-output"><code id="ascii-7">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-8">
      <div class="sample-header">
        <h2>Bidirectional Arrows</h2>
        <p class="description">Arrows in both directions: <code><--></code>, <code><-.-></code>, <code><==></code>.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Client</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> &#x3C;--></span><span style="color:#24292E">|</span><span style="color:#E36209">sync</span><span style="color:#24292E">| </span><span style="color:#E36209">B</span><span style="color:#D73A49">[</span><span style="color:#032F62">Server</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">&#x3C;-.-></span><span style="color:#24292E">|</span><span style="color:#E36209">heartbeat</span><span style="color:#24292E">| </span><span style="color:#E36209">C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Monitor</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">&#x3C;==></span><span style="color:#24292E">|</span><span style="color:#E36209">data</span><span style="color:#24292E">| </span><span style="color:#E36209">D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Storage</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-8" data-sample-bg="">
          <div class="svg-container" id="svg-8">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-8">
          <pre class="ascii-output"><code id="ascii-8">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-9">
      <div class="sample-header">
        <h2>Parallel Links (&amp;)</h2>
        <p class="description">Using <code>&</code> to create multiple edges from/to groups of nodes.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Input</span><span style="color:#D73A49">]</span><span style="color:#24292E"> &#x26; </span><span style="color:#E36209">B</span><span style="color:#D73A49">[</span><span style="color:#032F62">Config</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Processor</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">--></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Output</span><span style="color:#D73A49">]</span><span style="color:#24292E"> &#x26; </span><span style="color:#E36209">E</span><span style="color:#D73A49">[</span><span style="color:#032F62">Log</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-9" data-sample-bg="">
          <div class="svg-container" id="svg-9">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-9">
          <pre class="ascii-output"><code id="ascii-9">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-10">
      <div class="sample-header">
        <h2>Chained Edges</h2>
        <p class="description">A long chain of nodes demonstrating edge chaining syntax.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Step 1</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> B[Step 2] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Step 3</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> D[Step 4] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span><span style="color:#D73A49">[</span><span style="color:#032F62">Step 5</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-10" data-sample-bg="">
          <div class="svg-container" id="svg-10">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-10">
          <pre class="ascii-output"><code id="ascii-10">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-11">
      <div class="sample-header">
        <h2>Direction: Left-Right (LR)</h2>
        <p class="description">Horizontal layout flowing left to right.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Input</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> B[Transform] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Output</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-11" data-sample-bg="">
          <div class="svg-container" id="svg-11">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-11">
          <pre class="ascii-output"><code id="ascii-11">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-12">
      <div class="sample-header">
        <h2>Direction: Bottom-Top (BT)</h2>
        <p class="description">Vertical layout flowing from bottom to top.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> BT</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Foundation</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> B[Layer 2] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Top</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-12" data-sample-bg="">
          <div class="svg-container" id="svg-12">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-12">
          <pre class="ascii-output"><code id="ascii-12">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-13">
      <div class="sample-header">
        <h2>Subgraphs</h2>
        <p class="description">Grouped nodes inside labeled subgraph containers.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> Frontend</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">[</span><span style="color:#032F62">React App</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">[</span><span style="color:#032F62">State Manager</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> Backend</span></span>
<span class="line"><span style="color:#E36209">    C</span><span style="color:#D73A49">[</span><span style="color:#032F62">API Server</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Database</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-13" data-sample-bg="">
          <div class="svg-container" id="svg-13">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-13">
          <pre class="ascii-output"><code id="ascii-13">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-14">
      <div class="sample-header">
        <h2>Nested Subgraphs</h2>
        <p class="description">Subgraphs inside subgraphs for hierarchical grouping.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> Cloud</span></span>
<span class="line"><span style="color:#D73A49">    subgraph</span><span style="color:#6F42C1"> us</span><span style="color:#E36209">-east </span><span style="color:#D73A49">[</span><span style="color:#032F62">US East Region</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">      A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Web Server</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">[</span><span style="color:#032F62">App Server</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#D73A49">    end</span></span>
<span class="line"><span style="color:#D73A49">    subgraph</span><span style="color:#6F42C1"> us</span><span style="color:#E36209">-west </span><span style="color:#D73A49">[</span><span style="color:#032F62">US West Region</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">      C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Web Server</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">App Server</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#D73A49">    end</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  E</span><span style="color:#D73A49">[</span><span style="color:#032F62">Load Balancer</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> A</span></span>
<span class="line"><span style="color:#E36209">  E </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-14" data-sample-bg="">
          <div class="svg-container" id="svg-14">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-14">
          <pre class="ascii-output"><code id="ascii-14">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-15">
      <div class="sample-header">
        <h2>Subgraph Direction Override</h2>
        <p class="description">Using <code>direction LR</code> inside a subgraph while the outer graph flows TD.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> pipeline </span><span style="color:#24292E">[</span><span style="color:#E36209">Processing Pipeline</span><span style="color:#24292E">]</span></span>
<span class="line"><span style="color:#D73A49">    direction</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Input</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> B[Parse] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Transform</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Output</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  E</span><span style="color:#D73A49">[</span><span style="color:#032F62">Source</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> A</span></span>
<span class="line"><span style="color:#E36209">  D </span><span style="color:#D73A49">--></span><span style="color:#E36209"> F</span><span style="color:#D73A49">[</span><span style="color:#032F62">Sink</span><span style="color:#D73A49">]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-15" data-sample-bg="">
          <div class="svg-container" id="svg-15">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-15">
          <pre class="ascii-output"><code id="ascii-15">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-16">
      <div class="sample-header">
        <h2>::: Class Shorthand</h2>
        <p class="description">Assigning classes with <code>:::</code> syntax directly on node definitions.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Normal</span><span style="color:#D73A49">]</span><span style="color:#24292E">:::</span><span style="color:#E36209">default </span><span style="color:#D73A49">--</span><span style="color:#032F62">> B[Highlighted]:::highlight </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Error</span><span style="color:#D73A49">]</span><span style="color:#24292E">:::</span><span style="color:#E36209">error</span></span>
<span class="line"><span style="color:#D73A49">  classDef</span><span style="color:#E36209"> default</span><span style="color:#032F62"> fill:#f4f4f5,stroke:#a1a1aa</span></span>
<span class="line"><span style="color:#D73A49">  classDef</span><span style="color:#E36209"> highlight</span><span style="color:#032F62"> fill:#fbbf24,stroke:#d97706</span></span>
<span class="line"><span style="color:#D73A49">  classDef</span><span style="color:#E36209"> error</span><span style="color:#032F62"> fill:#ef4444,stroke:#dc2626</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-16" data-sample-bg="">
          <div class="svg-container" id="svg-16">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-16">
          <pre class="ascii-output"><code id="ascii-16">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-17">
      <div class="sample-header">
        <h2>Inline Style Overrides</h2>
        <p class="description">Using <code>style</code> statements to override node fill and stroke colors.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Default</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --</span><span style="color:#032F62">> B[Custom Colors] </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Another Custom</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  style B fill</span><span style="color:#24292E">:#</span><span style="color:#E36209">3b82f6</span><span style="color:#24292E">,</span><span style="color:#E36209">stroke</span><span style="color:#24292E">:#</span><span style="color:#E36209">1d4ed8</span><span style="color:#24292E">,</span><span style="color:#E36209">color</span><span style="color:#24292E">:#</span><span style="color:#E36209">ffffff</span></span>
<span class="line"><span style="color:#E36209">  style C fill</span><span style="color:#24292E">:#</span><span style="color:#E36209">10b981</span><span style="color:#24292E">,</span><span style="color:#E36209">stroke</span><span style="color:#24292E">:#</span><span style="color:#E36209">059669</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-17" data-sample-bg="">
          <div class="svg-container" id="svg-17">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-17">
          <pre class="ascii-output"><code id="ascii-17">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-18">
      <div class="sample-header">
        <h2>CI/CD Pipeline</h2>
        <p class="description">A realistic CI/CD pipeline with decision points, feedback loops, and deployment stages.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> ci </span><span style="color:#24292E">[</span><span style="color:#E36209">CI Pipeline</span><span style="color:#24292E">]</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">[</span><span style="color:#032F62">Push Code</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">{</span><span style="color:#032F62">Tests Pass?</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">    B </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">Yes</span><span style="color:#D73A49">|</span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">Build Image</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">    B </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">No</span><span style="color:#D73A49">|</span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Fix &#x26; Retry</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">    D </span><span style="color:#D73A49">-.-></span><span style="color:#E36209"> A</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span><span style="color:#D73A49">([</span><span style="color:#032F62">Deploy Staging</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#E36209">  E </span><span style="color:#D73A49">--></span><span style="color:#E36209"> F</span><span style="color:#D73A49">{</span><span style="color:#032F62">QA Approved?</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  F </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">Yes</span><span style="color:#D73A49">|</span><span style="color:#E36209"> G</span><span style="color:#D73A49">((</span><span style="color:#032F62">Production</span><span style="color:#D73A49">))</span></span>
<span class="line"><span style="color:#E36209">  F </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">No</span><span style="color:#D73A49">|</span><span style="color:#E36209"> D</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-18" data-sample-bg="">
          <div class="svg-container" id="svg-18">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-18">
          <pre class="ascii-output"><code id="ascii-18">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-19">
      <div class="sample-header">
        <h2>System Architecture</h2>
        <p class="description">A microservices architecture with multiple services and data stores.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> clients </span><span style="color:#24292E">[</span><span style="color:#E36209">Client Layer</span><span style="color:#24292E">]</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">([</span><span style="color:#032F62">Web App</span><span style="color:#D73A49">])</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">[</span><span style="color:#032F62">API Gateway</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">    C</span><span style="color:#D73A49">([</span><span style="color:#032F62">Mobile App</span><span style="color:#D73A49">])</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> services </span><span style="color:#24292E">[</span><span style="color:#E36209">Service Layer</span><span style="color:#24292E">]</span></span>
<span class="line"><span style="color:#E36209">    B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">Auth Service</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">    B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span><span style="color:#D73A49">[</span><span style="color:#032F62">User Service</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">    B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> F</span><span style="color:#D73A49">[</span><span style="color:#032F62">Order Service</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#D73A49">  subgraph</span><span style="color:#6F42C1"> data </span><span style="color:#24292E">[</span><span style="color:#E36209">Data Layer</span><span style="color:#24292E">]</span></span>
<span class="line"><span style="color:#E36209">    D </span><span style="color:#D73A49">--></span><span style="color:#E36209"> G</span><span style="color:#D73A49">[(</span><span style="color:#032F62">Auth DB</span><span style="color:#D73A49">)]</span></span>
<span class="line"><span style="color:#E36209">    E </span><span style="color:#D73A49">--></span><span style="color:#E36209"> H</span><span style="color:#D73A49">[(</span><span style="color:#032F62">User DB</span><span style="color:#D73A49">)]</span></span>
<span class="line"><span style="color:#E36209">    F </span><span style="color:#D73A49">--></span><span style="color:#E36209"> I</span><span style="color:#D73A49">[(</span><span style="color:#032F62">Order DB</span><span style="color:#D73A49">)]</span></span>
<span class="line"><span style="color:#E36209">    F </span><span style="color:#D73A49">--></span><span style="color:#E36209"> J</span><span style="color:#D73A49">([</span><span style="color:#032F62">Message Queue</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-19" data-sample-bg="">
          <div class="svg-container" id="svg-19">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-19">
          <pre class="ascii-output"><code id="ascii-19">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-20">
      <div class="sample-header">
        <h2>Decision Tree</h2>
        <p class="description">A branching decision flowchart with multiple outcomes.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> TD</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">{</span><span style="color:#032F62">Is it raining?</span><span style="color:#D73A49">}</span><span style="color:#D73A49"> -->|</span><span style="color:#032F62">Yes</span><span style="color:#D73A49">|</span><span style="color:#E36209"> B</span><span style="color:#D73A49">{</span><span style="color:#032F62">Have umbrella?</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  A </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">No</span><span style="color:#D73A49">|</span><span style="color:#E36209"> C</span><span style="color:#D73A49">([</span><span style="color:#032F62">Go outside</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">Yes</span><span style="color:#D73A49">|</span><span style="color:#E36209"> D</span><span style="color:#D73A49">([</span><span style="color:#032F62">Go with umbrella</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">No</span><span style="color:#D73A49">|</span><span style="color:#E36209"> E</span><span style="color:#D73A49">{</span><span style="color:#032F62">Is it heavy?</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  E </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">Yes</span><span style="color:#D73A49">|</span><span style="color:#E36209"> F</span><span style="color:#D73A49">([</span><span style="color:#032F62">Stay inside</span><span style="color:#D73A49">])</span></span>
<span class="line"><span style="color:#E36209">  E </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">No</span><span style="color:#D73A49">|</span><span style="color:#E36209"> G</span><span style="color:#D73A49">([</span><span style="color:#032F62">Run for it</span><span style="color:#D73A49">])</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-20" data-sample-bg="">
          <div class="svg-container" id="svg-20">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-20">
          <pre class="ascii-output"><code id="ascii-20">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-21">
      <div class="sample-header">
        <h2>Git Branching Workflow</h2>
        <p class="description">A git flow showing feature branches, PRs, and release cycle.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">graph</span><span style="color:#6F42C1"> LR</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">[</span><span style="color:#032F62">main</span><span style="color:#D73A49">]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> B</span><span style="color:#D73A49">[</span><span style="color:#032F62">develop</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> C</span><span style="color:#D73A49">[</span><span style="color:#032F62">feature/auth</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> D</span><span style="color:#D73A49">[</span><span style="color:#032F62">feature/ui</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  C </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span><span style="color:#D73A49">{</span><span style="color:#032F62">PR Review</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  D </span><span style="color:#D73A49">--></span><span style="color:#E36209"> E</span></span>
<span class="line"><span style="color:#E36209">  E </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">approved</span><span style="color:#D73A49">|</span><span style="color:#E36209"> B</span></span>
<span class="line"><span style="color:#E36209">  B </span><span style="color:#D73A49">--></span><span style="color:#E36209"> F</span><span style="color:#D73A49">[</span><span style="color:#032F62">release/1.0</span><span style="color:#D73A49">]</span></span>
<span class="line"><span style="color:#E36209">  F </span><span style="color:#D73A49">--></span><span style="color:#E36209"> G</span><span style="color:#D73A49">{</span><span style="color:#032F62">Tests?</span><span style="color:#D73A49">}</span></span>
<span class="line"><span style="color:#E36209">  G </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">pass</span><span style="color:#D73A49">|</span><span style="color:#E36209"> A</span></span>
<span class="line"><span style="color:#E36209">  G </span><span style="color:#D73A49">-->|</span><span style="color:#032F62">fail</span><span style="color:#D73A49">|</span><span style="color:#E36209"> F</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-21" data-sample-bg="">
          <div class="svg-container" id="svg-21">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-21">
          <pre class="ascii-output"><code id="ascii-21">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-22">
      <div class="sample-header">
        <h2>Basic State Diagram</h2>
        <p class="description">A simple <code>stateDiagram-v2</code> with start/end pseudostates and transitions.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">stateDiagram-v2</span></span>
<span class="line"><span style="color:#D73A49">  [*]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Idle</span></span>
<span class="line"><span style="color:#E36209">  Idle</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Active</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> start</span></span>
<span class="line"><span style="color:#E36209">  Active</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Idle</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> cancel</span></span>
<span class="line"><span style="color:#E36209">  Active</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Done</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> complete</span></span>
<span class="line"><span style="color:#E36209">  Done</span><span style="color:#D73A49"> --></span><span style="color:#D73A49"> [*]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-22" data-sample-bg="">
          <div class="svg-container" id="svg-22">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-22">
          <pre class="ascii-output"><code id="ascii-22">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-23">
      <div class="sample-header">
        <h2>State: Composite States</h2>
        <p class="description">Nested composite states with inner transitions.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">stateDiagram-v2</span></span>
<span class="line"><span style="color:#D73A49">  [*]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Idle</span></span>
<span class="line"><span style="color:#E36209">  Idle</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Processing</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> submit</span></span>
<span class="line"><span style="color:#D73A49">  state</span><span style="color:#E36209"> Processing</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#E36209">    parse</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> validate</span></span>
<span class="line"><span style="color:#E36209">    validate</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> execute</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  Processing</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Complete</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> done</span></span>
<span class="line"><span style="color:#E36209">  Processing</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Error</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> fail</span></span>
<span class="line"><span style="color:#E36209">  Error</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Idle</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> retry</span></span>
<span class="line"><span style="color:#E36209">  Complete</span><span style="color:#D73A49"> --></span><span style="color:#D73A49"> [*]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-23" data-sample-bg="">
          <div class="svg-container" id="svg-23">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-23">
          <pre class="ascii-output"><code id="ascii-23">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-24">
      <div class="sample-header">
        <h2>State: Connection Lifecycle</h2>
        <p class="description">TCP-like connection state machine with multiple states.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">stateDiagram-v2</span></span>
<span class="line"><span style="color:#D73A49">  [*]</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Closed</span></span>
<span class="line"><span style="color:#E36209">  Closed</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Connecting</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> connect</span></span>
<span class="line"><span style="color:#E36209">  Connecting</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Connected</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> success</span></span>
<span class="line"><span style="color:#E36209">  Connecting</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Closed</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> timeout</span></span>
<span class="line"><span style="color:#E36209">  Connected</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Disconnecting</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> close</span></span>
<span class="line"><span style="color:#E36209">  Connected</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Reconnecting</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> error</span></span>
<span class="line"><span style="color:#E36209">  Reconnecting</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Connected</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> success</span></span>
<span class="line"><span style="color:#E36209">  Reconnecting</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Closed</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> max_retries</span></span>
<span class="line"><span style="color:#E36209">  Disconnecting</span><span style="color:#D73A49"> --></span><span style="color:#E36209"> Closed</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> done</span></span>
<span class="line"><span style="color:#E36209">  Closed</span><span style="color:#D73A49"> --></span><span style="color:#D73A49"> [*]</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-24" data-sample-bg="">
          <div class="svg-container" id="svg-24">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-24">
          <pre class="ascii-output"><code id="ascii-24">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-25">
      <div class="sample-header">
        <h2>Sequence: Basic Messages</h2>
        <p class="description">Simple request/response between two participants.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#E36209">  Alice</span><span style="color:#D73A49">->></span><span style="color:#E36209">Bob</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Hello Bob!</span></span>
<span class="line"><span style="color:#E36209">  Bob</span><span style="color:#D73A49">-->></span><span style="color:#E36209">Alice</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Hi Alice!</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-25" data-sample-bg="">
          <div class="svg-container" id="svg-25">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-25">
          <pre class="ascii-output"><code id="ascii-25">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-26">
      <div class="sample-header">
        <h2>Sequence: Participant Aliases</h2>
        <p class="description">Using <code>participant ... as ...</code> for compact diagram IDs with readable labels.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> A</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Alice</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> B</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Bob</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Charlie</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">->></span><span style="color:#E36209">B</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Hello</span></span>
<span class="line"><span style="color:#E36209">  B</span><span style="color:#D73A49">->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Forward</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">-->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Reply</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-26" data-sample-bg="">
          <div class="svg-container" id="svg-26">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-26">
          <pre class="ascii-output"><code id="ascii-26">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-27">
      <div class="sample-header">
        <h2>Sequence: Actor Stick Figures</h2>
        <p class="description">Using <code>actor</code> instead of <code>participant</code> renders stick figures instead of boxes.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  actor</span><span style="color:#E36209"> U</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> User</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> S</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> System</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> DB</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Database</span></span>
<span class="line"><span style="color:#E36209">  U</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Click button</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Query</span></span>
<span class="line"><span style="color:#E36209">  DB</span><span style="color:#D73A49">-->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Results</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">U</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Display</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-27" data-sample-bg="">
          <div class="svg-container" id="svg-27">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-27">
          <pre class="ascii-output"><code id="ascii-27">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-28">
      <div class="sample-header">
        <h2>Sequence: Arrow Types</h2>
        <p class="description">All arrow types: solid <code>->></code> and dashed <code>-->></code> with filled arrowheads, open arrows <code>-)</code> .</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">->></span><span style="color:#E36209">B</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Solid arrow (sync)</span></span>
<span class="line"><span style="color:#E36209">  B</span><span style="color:#D73A49">-->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Dashed arrow (return)</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">-)</span><span style="color:#E36209">B</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Open arrow (async)</span></span>
<span class="line"><span style="color:#E36209">  B</span><span style="color:#D73A49">--)</span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Open dashed arrow</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-28" data-sample-bg="">
          <div class="svg-container" id="svg-28">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-28">
          <pre class="ascii-output"><code id="ascii-28">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-29">
      <div class="sample-header">
        <h2>Sequence: Activation Boxes</h2>
        <p class="description">Using <code>+</code> and <code>-</code> to show when participants are active.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Client</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> S</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Server</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">->>+</span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Request</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->>+</span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Process</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->>-</span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Done</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">-->>-</span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Response</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-29" data-sample-bg="">
          <div class="svg-container" id="svg-29">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-29">
          <pre class="ascii-output"><code id="ascii-29">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-30">
      <div class="sample-header">
        <h2>Sequence: Self-Messages</h2>
        <p class="description">A participant sending a message to itself (displayed as a loop arrow).</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> S</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Server</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Internal process</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Validate</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Log</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-30" data-sample-bg="">
          <div class="svg-container" id="svg-30">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-30">
          <pre class="ascii-output"><code id="ascii-30">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-31">
      <div class="sample-header">
        <h2>Sequence: Loop Block</h2>
        <p class="description">A <code>loop</code> construct wrapping repeated message exchanges.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Client</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> S</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Server</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Connect</span></span>
<span class="line"><span style="color:#D73A49">  loop</span><span style="color:#032F62"> Every 30s</span></span>
<span class="line"><span style="color:#E36209">    C</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Heartbeat</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Ack</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Disconnect</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-31" data-sample-bg="">
          <div class="svg-container" id="svg-31">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-31">
          <pre class="ascii-output"><code id="ascii-31">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-32">
      <div class="sample-header">
        <h2>Sequence: Alt/Else Block</h2>
        <p class="description">Conditional branching with <code>alt</code> (if) and <code>else</code> blocks.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Client</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> S</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Server</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Login</span></span>
<span class="line"><span style="color:#D73A49">  alt</span><span style="color:#032F62"> Valid credentials</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> 200 OK</span></span>
<span class="line"><span style="color:#D73A49">  else</span><span style="color:#032F62"> Invalid</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> 401 Unauthorized</span></span>
<span class="line"><span style="color:#D73A49">  else</span><span style="color:#032F62"> Account locked</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> 403 Forbidden</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-32" data-sample-bg="">
          <div class="svg-container" id="svg-32">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-32">
          <pre class="ascii-output"><code id="ascii-32">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-33">
      <div class="sample-header">
        <h2>Sequence: Opt Block</h2>
        <p class="description">Optional block — executes only if condition is met.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> A</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> App</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Cache</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> DB</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Database</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Get data</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">-->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Cache miss</span></span>
<span class="line"><span style="color:#D73A49">  opt</span><span style="color:#032F62"> Cache miss</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Query</span></span>
<span class="line"><span style="color:#E36209">    DB</span><span style="color:#D73A49">-->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Results</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Store in cache</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-33" data-sample-bg="">
          <div class="svg-container" id="svg-33">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-33">
          <pre class="ascii-output"><code id="ascii-33">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-34">
      <div class="sample-header">
        <h2>Sequence: Par Block</h2>
        <p class="description">Parallel execution with <code>par</code>/<code>and</code> constructs.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Client</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> A</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> AuthService</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> U</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> UserService</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> O</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> OrderService</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Authenticate</span></span>
<span class="line"><span style="color:#D73A49">  par</span><span style="color:#032F62"> Fetch user data</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">->></span><span style="color:#E36209">U</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Get profile</span></span>
<span class="line"><span style="color:#D73A49">  and</span><span style="color:#032F62"> Fetch orders</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">->></span><span style="color:#E36209">O</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Get orders</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Combined response</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-34" data-sample-bg="">
          <div class="svg-container" id="svg-34">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-34">
          <pre class="ascii-output"><code id="ascii-34">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-35">
      <div class="sample-header">
        <h2>Sequence: Critical Block</h2>
        <p class="description">Critical section that must complete atomically.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> A</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> App</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> DB</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Database</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> BEGIN</span></span>
<span class="line"><span style="color:#D73A49">  critical</span><span style="color:#032F62"> Transaction</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> UPDATE accounts</span></span>
<span class="line"><span style="color:#E36209">    A</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> INSERT log</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> COMMIT</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-35" data-sample-bg="">
          <div class="svg-container" id="svg-35">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-35">
          <pre class="ascii-output"><code id="ascii-35">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-36">
      <div class="sample-header">
        <h2>Sequence: Notes (Right/Left/Over)</h2>
        <p class="description">Notes positioned to the right, left, or over participants.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> A</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Alice</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> B</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Bob</span></span>
<span class="line"><span style="color:#D73A49">  Note</span><span style="color:#6F42C1"> left of</span><span style="color:#E36209"> A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Alice prepares</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">->></span><span style="color:#E36209">B</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Hello</span></span>
<span class="line"><span style="color:#D73A49">  Note</span><span style="color:#6F42C1"> right of</span><span style="color:#E36209"> B</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Bob thinks</span></span>
<span class="line"><span style="color:#E36209">  B</span><span style="color:#D73A49">-->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Reply</span></span>
<span class="line"><span style="color:#D73A49">  Note</span><span style="color:#6F42C1"> over</span><span style="color:#E36209"> A</span><span style="color:#D73A49">,</span><span style="color:#E36209">B</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Conversation complete</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-36" data-sample-bg="">
          <div class="svg-container" id="svg-36">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-36">
          <pre class="ascii-output"><code id="ascii-36">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-37">
      <div class="sample-header">
        <h2>Sequence: OAuth 2.0 Flow</h2>
        <p class="description">Full OAuth 2.0 authorization code flow with token exchange.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  actor</span><span style="color:#E36209"> U</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> User</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> App</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Client App</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> Auth</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Auth Server</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> API</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Resource API</span></span>
<span class="line"><span style="color:#E36209">  U</span><span style="color:#D73A49">->></span><span style="color:#E36209">App</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Click Login</span></span>
<span class="line"><span style="color:#E36209">  App</span><span style="color:#D73A49">->></span><span style="color:#E36209">Auth</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Authorization request</span></span>
<span class="line"><span style="color:#E36209">  Auth</span><span style="color:#D73A49">->></span><span style="color:#E36209">U</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Login page</span></span>
<span class="line"><span style="color:#E36209">  U</span><span style="color:#D73A49">->></span><span style="color:#E36209">Auth</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Credentials</span></span>
<span class="line"><span style="color:#E36209">  Auth</span><span style="color:#D73A49">-->></span><span style="color:#E36209">App</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Authorization code</span></span>
<span class="line"><span style="color:#E36209">  App</span><span style="color:#D73A49">->></span><span style="color:#E36209">Auth</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Exchange code for token</span></span>
<span class="line"><span style="color:#E36209">  Auth</span><span style="color:#D73A49">-->></span><span style="color:#E36209">App</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Access token</span></span>
<span class="line"><span style="color:#E36209">  App</span><span style="color:#D73A49">->></span><span style="color:#E36209">API</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Request + token</span></span>
<span class="line"><span style="color:#E36209">  API</span><span style="color:#D73A49">-->></span><span style="color:#E36209">App</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Protected resource</span></span>
<span class="line"><span style="color:#E36209">  App</span><span style="color:#D73A49">-->></span><span style="color:#E36209">U</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Display data</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-37" data-sample-bg="">
          <div class="svg-container" id="svg-37">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-37">
          <pre class="ascii-output"><code id="ascii-37">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-38">
      <div class="sample-header">
        <h2>Sequence: Database Transaction</h2>
        <p class="description">Multi-step database transaction with rollback handling.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> C</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Client</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> S</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Server</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> DB</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Database</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49">->></span><span style="color:#E36209">S</span><span style="color:#D73A49">:</span><span style="color:#032F62"> POST /transfer</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> BEGIN</span></span>
<span class="line"><span style="color:#E36209">  S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Debit account A</span></span>
<span class="line"><span style="color:#D73A49">  alt</span><span style="color:#032F62"> Success</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Credit account B</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> INSERT audit_log</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> COMMIT</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> 200 OK</span></span>
<span class="line"><span style="color:#D73A49">  else</span><span style="color:#032F62"> Insufficient funds</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">->></span><span style="color:#E36209">DB</span><span style="color:#D73A49">:</span><span style="color:#032F62"> ROLLBACK</span></span>
<span class="line"><span style="color:#E36209">    S</span><span style="color:#D73A49">-->></span><span style="color:#E36209">C</span><span style="color:#D73A49">:</span><span style="color:#032F62"> 400 Bad Request</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-38" data-sample-bg="">
          <div class="svg-container" id="svg-38">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-38">
          <pre class="ascii-output"><code id="ascii-38">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-39">
      <div class="sample-header">
        <h2>Sequence: Microservice Orchestration</h2>
        <p class="description">Complex multi-service flow with parallel calls and error handling.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">sequenceDiagram</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> G</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Gateway</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> A</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Auth</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> U</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Users</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> O</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Orders</span></span>
<span class="line"><span style="color:#D73A49">  participant</span><span style="color:#E36209"> N</span><span style="color:#D73A49"> as</span><span style="color:#032F62"> Notify</span></span>
<span class="line"><span style="color:#E36209">  G</span><span style="color:#D73A49">->></span><span style="color:#E36209">A</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Validate token</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49">-->></span><span style="color:#E36209">G</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Valid</span></span>
<span class="line"><span style="color:#D73A49">  par</span><span style="color:#032F62"> Fetch data</span></span>
<span class="line"><span style="color:#E36209">    G</span><span style="color:#D73A49">->></span><span style="color:#E36209">U</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Get user</span></span>
<span class="line"><span style="color:#E36209">    U</span><span style="color:#D73A49">-->></span><span style="color:#E36209">G</span><span style="color:#D73A49">:</span><span style="color:#032F62"> User data</span></span>
<span class="line"><span style="color:#D73A49">  and</span></span>
<span class="line"><span style="color:#E36209">    G</span><span style="color:#D73A49">->></span><span style="color:#E36209">O</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Get orders</span></span>
<span class="line"><span style="color:#E36209">    O</span><span style="color:#D73A49">-->></span><span style="color:#E36209">G</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Order list</span></span>
<span class="line"><span style="color:#D73A49">  end</span></span>
<span class="line"><span style="color:#E36209">  G</span><span style="color:#D73A49">->></span><span style="color:#E36209">N</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Send notification</span></span>
<span class="line"><span style="color:#E36209">  N</span><span style="color:#D73A49">-->></span><span style="color:#E36209">G</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Queued</span></span>
<span class="line"><span style="color:#D73A49">  Note</span><span style="color:#6F42C1"> over</span><span style="color:#E36209"> G</span><span style="color:#D73A49">:</span><span style="color:#032F62"> Aggregate response</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-39" data-sample-bg="">
          <div class="svg-container" id="svg-39">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-39">
          <pre class="ascii-output"><code id="ascii-39">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-40">
      <div class="sample-header">
        <h2>Class: Basic Class</h2>
        <p class="description">A single class with attributes and methods, rendered as a 3-compartment box.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Animal</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">    +int</span><span style="color:#6F42C1"> age</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">eat</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">sleep</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-40" data-sample-bg="">
          <div class="svg-container" id="svg-40">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-40">
          <pre class="ascii-output"><code id="ascii-40">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-41">
      <div class="sample-header">
        <h2>Class: Visibility Markers</h2>
        <p class="description">All four visibility levels: <code>+</code> (public), <code>-</code> (private), <code>#</code> (protected), <code>~</code> (package).</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> User</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">    -String</span><span style="color:#6F42C1"> password</span></span>
<span class="line"><span style="color:#D73A49">    #int</span><span style="color:#6F42C1"> internalId</span></span>
<span class="line"><span style="color:#D73A49">    ~String</span><span style="color:#6F42C1"> packageField</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">login</span><span style="color:#24292E">() </span><span style="color:#D73A49">bool</span></span>
<span class="line"><span style="color:#D73A49">    -</span><span style="color:#6F42C1">hashPassword</span><span style="color:#24292E">() </span><span style="color:#D73A49">String</span></span>
<span class="line"><span style="color:#D73A49">    #</span><span style="color:#6F42C1">validate</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    ~</span><span style="color:#6F42C1">notify</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-41" data-sample-bg="">
          <div class="svg-container" id="svg-41">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-41">
          <pre class="ascii-output"><code id="ascii-41">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-42">
      <div class="sample-header">
        <h2>Class: Interface Annotation</h2>
        <p class="description">Using <code><<interface>></code> annotation above the class name.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Serializable</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">interface</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">serialize</span><span style="color:#24292E">() </span><span style="color:#D73A49">String</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">deserialize</span><span style="color:#24292E">(</span><span style="color:#D73A49">data</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-42" data-sample-bg="">
          <div class="svg-container" id="svg-42">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-42">
          <pre class="ascii-output"><code id="ascii-42">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-43">
      <div class="sample-header">
        <h2>Class: Abstract Annotation</h2>
        <p class="description">Using <code><<abstract>></code> annotation for abstract classes.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Shape</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">abstract</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> color</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">area</span><span style="color:#24292E">() </span><span style="color:#D73A49">double</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">draw</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-43" data-sample-bg="">
          <div class="svg-container" id="svg-43">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-43">
          <pre class="ascii-output"><code id="ascii-43">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-44">
      <div class="sample-header">
        <h2>Class: Enum Annotation</h2>
        <p class="description">Using <code><<enumeration>></code> annotation for enum types.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Status</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">enumeration</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    ACTIVE</span></span>
<span class="line"><span style="color:#D73A49">    INACTIVE</span></span>
<span class="line"><span style="color:#D73A49">    PENDING</span></span>
<span class="line"><span style="color:#D73A49">    DELETED</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-44" data-sample-bg="">
          <div class="svg-container" id="svg-44">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-44">
          <pre class="ascii-output"><code id="ascii-44">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-45">
      <div class="sample-header">
        <h2>Class: Inheritance (&lt;|--)</h2>
        <p class="description">Inheritance relationship rendered with a hollow triangle marker.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Animal</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">eat</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Dog</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> breed</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">bark</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Cat</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +bool</span><span style="color:#6F42C1"> isIndoor</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">meow</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Animal</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Dog</span></span>
<span class="line"><span style="color:#6F42C1">  Animal</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Cat</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-45" data-sample-bg="">
          <div class="svg-container" id="svg-45">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-45">
          <pre class="ascii-output"><code id="ascii-45">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-46">
      <div class="sample-header">
        <h2>Class: Composition (*--)</h2>
        <p class="description">Composition — "owns" relationship with filled diamond marker.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Car</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> model</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">start</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Engine</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +int</span><span style="color:#6F42C1"> horsepower</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">rev</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Car</span><span style="color:#D73A49"> *--</span><span style="color:#6F42C1"> Engine</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-46" data-sample-bg="">
          <div class="svg-container" id="svg-46">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-46">
          <pre class="ascii-output"><code id="ascii-46">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-47">
      <div class="sample-header">
        <h2>Class: Aggregation (o--)</h2>
        <p class="description">Aggregation — "has" relationship with hollow diamond marker.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> University</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Department</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> faculty</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  University</span><span style="color:#D73A49"> o--</span><span style="color:#6F42C1"> Department</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-47" data-sample-bg="">
          <div class="svg-container" id="svg-47">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-47">
          <pre class="ascii-output"><code id="ascii-47">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-48">
      <div class="sample-header">
        <h2>Class: Association (--&gt;)</h2>
        <p class="description">Basic association — simple directed arrow.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Customer</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Order</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +int</span><span style="color:#6F42C1"> orderId</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Customer</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> Order</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-48" data-sample-bg="">
          <div class="svg-container" id="svg-48">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-48">
          <pre class="ascii-output"><code id="ascii-48">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-49">
      <div class="sample-header">
        <h2>Class: Dependency (..&gt;)</h2>
        <p class="description">Dependency — dashed line with open arrow.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Service</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">process</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Repository</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">find</span><span style="color:#24292E">() </span><span style="color:#D73A49">Object</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Service</span><span style="color:#D73A49"> ..></span><span style="color:#6F42C1"> Repository</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-49" data-sample-bg="">
          <div class="svg-container" id="svg-49">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-49">
          <pre class="ascii-output"><code id="ascii-49">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-50">
      <div class="sample-header">
        <h2>Class: Realization (..|&gt;)</h2>
        <p class="description">Realization — dashed line with hollow triangle (implements interface).</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Flyable</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">interface</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">fly</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Bird</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">fly</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">sing</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Bird</span><span style="color:#D73A49"> ..|></span><span style="color:#6F42C1"> Flyable</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-50" data-sample-bg="">
          <div class="svg-container" id="svg-50">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-50">
          <pre class="ascii-output"><code id="ascii-50">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-51">
      <div class="sample-header">
        <h2>Class: All 6 Relationship Types</h2>
        <p class="description">Every relationship type in a single diagram for comparison.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#6F42C1">  A</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> B</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> inheritance</span></span>
<span class="line"><span style="color:#6F42C1">  C</span><span style="color:#D73A49"> *--</span><span style="color:#6F42C1"> D</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> composition</span></span>
<span class="line"><span style="color:#6F42C1">  E</span><span style="color:#D73A49"> o--</span><span style="color:#6F42C1"> F</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> aggregation</span></span>
<span class="line"><span style="color:#6F42C1">  G</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> H</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> association</span></span>
<span class="line"><span style="color:#6F42C1">  I</span><span style="color:#D73A49"> ..></span><span style="color:#6F42C1"> J</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> dependency</span></span>
<span class="line"><span style="color:#6F42C1">  K</span><span style="color:#D73A49"> ..|></span><span style="color:#6F42C1"> L</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> realization</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-51" data-sample-bg="">
          <div class="svg-container" id="svg-51">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-51">
          <pre class="ascii-output"><code id="ascii-51">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-52">
      <div class="sample-header">
        <h2>Class: Relationship Labels</h2>
        <p class="description">Labeled relationships between classes with descriptive text.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Teacher</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Student</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Course</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> title</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Teacher</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> Course</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> teaches</span></span>
<span class="line"><span style="color:#6F42C1">  Student</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> Course</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> enrolled in</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-52" data-sample-bg="">
          <div class="svg-container" id="svg-52">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-52">
          <pre class="ascii-output"><code id="ascii-52">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-53">
      <div class="sample-header">
        <h2>Class: Design Pattern — Observer</h2>
        <p class="description">The Observer (publish-subscribe) design pattern with interface + concrete implementations.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Subject</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">interface</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">attach</span><span style="color:#24292E">(</span><span style="color:#D73A49">Observer</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">detach</span><span style="color:#24292E">(</span><span style="color:#D73A49">Observer</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">notify</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Observer</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">interface</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">update</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> EventEmitter</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    -List</span><span style="color:#24292E">~</span><span style="color:#D73A49">Observer</span><span style="color:#24292E">~ </span><span style="color:#6F42C1">observers</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">attach</span><span style="color:#24292E">(</span><span style="color:#D73A49">Observer</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">detach</span><span style="color:#24292E">(</span><span style="color:#D73A49">Observer</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">notify</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Logger</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">update</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Alerter</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">update</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Subject</span><span style="color:#D73A49"> &#x3C;|..</span><span style="color:#6F42C1"> EventEmitter</span></span>
<span class="line"><span style="color:#6F42C1">  Observer</span><span style="color:#D73A49"> &#x3C;|..</span><span style="color:#6F42C1"> Logger</span></span>
<span class="line"><span style="color:#6F42C1">  Observer</span><span style="color:#D73A49"> &#x3C;|..</span><span style="color:#6F42C1"> Alerter</span></span>
<span class="line"><span style="color:#6F42C1">  EventEmitter</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> Observer</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-53" data-sample-bg="">
          <div class="svg-container" id="svg-53">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-53">
          <pre class="ascii-output"><code id="ascii-53">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-54">
      <div class="sample-header">
        <h2>Class: MVC Architecture</h2>
        <p class="description">Model-View-Controller pattern showing relationships between layers.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Model</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    -data</span><span style="color:#6F42C1"> Map</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">getData</span><span style="color:#24292E">() </span><span style="color:#D73A49">Map</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">setData</span><span style="color:#24292E">(</span><span style="color:#D73A49">key</span><span style="color:#24292E">, </span><span style="color:#D73A49">val</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">notify</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> View</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    -model</span><span style="color:#6F42C1"> Model</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">render</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">update</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Controller</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    -model</span><span style="color:#6F42C1"> Model</span></span>
<span class="line"><span style="color:#D73A49">    -view</span><span style="color:#6F42C1"> View</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">handleInput</span><span style="color:#24292E">(</span><span style="color:#D73A49">event</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">updateModel</span><span style="color:#24292E">(</span><span style="color:#D73A49">data</span><span style="color:#24292E">) </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Controller</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> Model</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> updates</span></span>
<span class="line"><span style="color:#6F42C1">  Controller</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> View</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> refreshes</span></span>
<span class="line"><span style="color:#6F42C1">  View</span><span style="color:#D73A49"> --></span><span style="color:#6F42C1"> Model</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> reads</span></span>
<span class="line"><span style="color:#6F42C1">  Model</span><span style="color:#D73A49"> ..></span><span style="color:#6F42C1"> View</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> notifies</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-54" data-sample-bg="">
          <div class="svg-container" id="svg-54">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-54">
          <pre class="ascii-output"><code id="ascii-54">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-55">
      <div class="sample-header">
        <h2>Class: Full Hierarchy</h2>
        <p class="description">A complete class hierarchy with abstract base, interfaces, and concrete classes.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">classDiagram</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Animal</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;&#x3C;</span><span style="color:#D73A49">abstract</span><span style="color:#24292E">>></span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> name</span></span>
<span class="line"><span style="color:#D73A49">    +int</span><span style="color:#6F42C1"> age</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">eat</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">sleep</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Mammal</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +bool</span><span style="color:#6F42C1"> warmBlooded</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">nurse</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Bird</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +bool</span><span style="color:#6F42C1"> canFly</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">layEggs</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Dog</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> breed</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">bark</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Cat</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +bool</span><span style="color:#6F42C1"> isIndoor</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">purr</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#D73A49">  class</span><span style="color:#6F42C1"> Parrot</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    +String</span><span style="color:#6F42C1"> vocabulary</span></span>
<span class="line"><span style="color:#D73A49">    +</span><span style="color:#6F42C1">speak</span><span style="color:#24292E">() </span><span style="color:#D73A49">void</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#6F42C1">  Animal</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Mammal</span></span>
<span class="line"><span style="color:#6F42C1">  Animal</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Bird</span></span>
<span class="line"><span style="color:#6F42C1">  Mammal</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Dog</span></span>
<span class="line"><span style="color:#6F42C1">  Mammal</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Cat</span></span>
<span class="line"><span style="color:#6F42C1">  Bird</span><span style="color:#D73A49"> &#x3C;|--</span><span style="color:#6F42C1"> Parrot</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-55" data-sample-bg="">
          <div class="svg-container" id="svg-55">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-55">
          <pre class="ascii-output"><code id="ascii-55">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-56">
      <div class="sample-header">
        <h2>ER: Basic Relationship</h2>
        <p class="description">A simple one-to-many relationship between two entities.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  CUSTOMER</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> ORDER</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> places</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-56" data-sample-bg="">
          <div class="svg-container" id="svg-56">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-56">
          <pre class="ascii-output"><code id="ascii-56">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-57">
      <div class="sample-header">
        <h2>ER: Entity with Attributes</h2>
        <p class="description">An entity with typed attributes and <code>PK</code>/<code>FK</code>/<code>UK</code> key badges.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  CUSTOMER</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> name</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> email</span><span style="color:#D73A49"> UK</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> created_at</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-57" data-sample-bg="">
          <div class="svg-container" id="svg-57">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-57">
          <pre class="ascii-output"><code id="ascii-57">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-58">
      <div class="sample-header">
        <h2>ER: Attribute Keys (PK, FK, UK)</h2>
        <p class="description">All three key constraint types rendered as badges.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  ORDER</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> customer_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> invoice_number</span><span style="color:#D73A49"> UK</span></span>
<span class="line"><span style="color:#D73A49">    decimal</span><span style="color:#E36209"> total</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> order_date</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> status</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-58" data-sample-bg="">
          <div class="svg-container" id="svg-58">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-58">
          <pre class="ascii-output"><code id="ascii-58">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-59">
      <div class="sample-header">
        <h2>ER: Exactly One to Exactly One (||--||)</h2>
        <p class="description">One-to-one mandatory relationship.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  PERSON</span><span style="color:#D73A49"> ||--||</span><span style="color:#E36209"> PASSPORT</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> has</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-59" data-sample-bg="">
          <div class="svg-container" id="svg-59">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-59">
          <pre class="ascii-output"><code id="ascii-59">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-60">
      <div class="sample-header">
        <h2>ER: Exactly One to Zero-or-Many (||--o{)</h2>
        <p class="description">Classic one-to-many optional relationship (crow's foot).</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  CUSTOMER</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> ORDER</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> places</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-60" data-sample-bg="">
          <div class="svg-container" id="svg-60">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-60">
          <pre class="ascii-output"><code id="ascii-60">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-61">
      <div class="sample-header">
        <h2>ER: Zero-or-One to One-or-Many (|o--|{)</h2>
        <p class="description">Optional on one side, at-least-one on the other.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  SUPERVISOR</span><span style="color:#D73A49"> |o--|{</span><span style="color:#E36209"> EMPLOYEE</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> manages</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-61" data-sample-bg="">
          <div class="svg-container" id="svg-61">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-61">
          <pre class="ascii-output"><code id="ascii-61">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-62">
      <div class="sample-header">
        <h2>ER: One-or-More to Zero-or-Many (}|--o{)</h2>
        <p class="description">At-least-one to zero-or-many relationship.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  TEACHER</span><span style="color:#D73A49"> }|--o{</span><span style="color:#E36209"> COURSE</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> teaches</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-62" data-sample-bg="">
          <div class="svg-container" id="svg-62">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-62">
          <pre class="ascii-output"><code id="ascii-62">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-63">
      <div class="sample-header">
        <h2>ER: All Cardinality Types</h2>
        <p class="description">Every cardinality combination in one diagram.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  A</span><span style="color:#D73A49"> ||--||</span><span style="color:#E36209"> B</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> one-to-one</span></span>
<span class="line"><span style="color:#E36209">  C</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> D</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> one-to-many</span></span>
<span class="line"><span style="color:#E36209">  E</span><span style="color:#D73A49"> |o--|{</span><span style="color:#E36209"> F</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> opt-to-many</span></span>
<span class="line"><span style="color:#E36209">  G</span><span style="color:#D73A49"> }|--o{</span><span style="color:#E36209"> H</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> many-to-many</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-63" data-sample-bg="">
          <div class="svg-container" id="svg-63">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-63">
          <pre class="ascii-output"><code id="ascii-63">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-64">
      <div class="sample-header">
        <h2>ER: Identifying (Solid) Relationship</h2>
        <p class="description">Solid line indicating an identifying relationship (child depends on parent for identity).</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  ORDER</span><span style="color:#D73A49"> ||--|{</span><span style="color:#E36209"> LINE_ITEM</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> contains</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-64" data-sample-bg="">
          <div class="svg-container" id="svg-64">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-64">
          <pre class="ascii-output"><code id="ascii-64">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-65">
      <div class="sample-header">
        <h2>ER: Non-Identifying (Dashed) Relationship</h2>
        <p class="description">Dashed line indicating a non-identifying relationship.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  USER</span><span style="color:#D73A49"> ||..o{</span><span style="color:#E36209"> LOG_ENTRY</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> generates</span></span>
<span class="line"><span style="color:#E36209">  USER</span><span style="color:#D73A49"> ||..o{</span><span style="color:#E36209"> SESSION</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> opens</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-65" data-sample-bg="">
          <div class="svg-container" id="svg-65">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-65">
          <pre class="ascii-output"><code id="ascii-65">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-66">
      <div class="sample-header">
        <h2>ER: Mixed Identifying &amp; Non-Identifying</h2>
        <p class="description">Both solid and dashed lines in the same diagram.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  ORDER</span><span style="color:#D73A49"> ||--|{</span><span style="color:#E36209"> LINE_ITEM</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> contains</span></span>
<span class="line"><span style="color:#E36209">  ORDER</span><span style="color:#D73A49"> ||..o{</span><span style="color:#E36209"> SHIPMENT</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> ships-via</span></span>
<span class="line"><span style="color:#E36209">  PRODUCT</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> LINE_ITEM</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> includes</span></span>
<span class="line"><span style="color:#E36209">  PRODUCT</span><span style="color:#D73A49"> ||..o{</span><span style="color:#E36209"> REVIEW</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> receives</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-66" data-sample-bg="">
          <div class="svg-container" id="svg-66">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-66">
          <pre class="ascii-output"><code id="ascii-66">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-67">
      <div class="sample-header">
        <h2>ER: E-Commerce Schema</h2>
        <p class="description">Full e-commerce database schema with customers, orders, products, and line items.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  CUSTOMER</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> name</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> email</span><span style="color:#D73A49"> UK</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  ORDER</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> created</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> customer_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  PRODUCT</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> name</span></span>
<span class="line"><span style="color:#D73A49">    float</span><span style="color:#E36209"> price</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  LINE_ITEM</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> order_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> product_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> quantity</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  CUSTOMER</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> ORDER</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> places</span></span>
<span class="line"><span style="color:#E36209">  ORDER</span><span style="color:#D73A49"> ||--|{</span><span style="color:#E36209"> LINE_ITEM</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> contains</span></span>
<span class="line"><span style="color:#E36209">  PRODUCT</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> LINE_ITEM</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> includes</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-67" data-sample-bg="">
          <div class="svg-container" id="svg-67">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-67">
          <pre class="ascii-output"><code id="ascii-67">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-68">
      <div class="sample-header">
        <h2>ER: Blog Platform Schema</h2>
        <p class="description">Blog system with users, posts, comments, and tags.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  USER</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> username</span><span style="color:#D73A49"> UK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> email</span><span style="color:#D73A49"> UK</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> joined</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  POST</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> title</span></span>
<span class="line"><span style="color:#D73A49">    text</span><span style="color:#E36209"> content</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> author_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> published</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  COMMENT</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    text</span><span style="color:#E36209"> body</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> post_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> user_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> created</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  TAG</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> name</span><span style="color:#D73A49"> UK</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  USER</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> POST</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> writes</span></span>
<span class="line"><span style="color:#E36209">  USER</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> COMMENT</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> authors</span></span>
<span class="line"><span style="color:#E36209">  POST</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> COMMENT</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> has</span></span>
<span class="line"><span style="color:#E36209">  POST</span><span style="color:#D73A49"> }|--o{</span><span style="color:#E36209"> TAG</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> tagged-with</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-68" data-sample-bg="">
          <div class="svg-container" id="svg-68">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-68">
          <pre class="ascii-output"><code id="ascii-68">Rendering…</code></pre>
        </div>
      </div>
    </section>

    <section class="sample" id="sample-69">
      <div class="sample-header">
        <h2>ER: School Management Schema</h2>
        <p class="description">School system with students, teachers, courses, and enrollments.</p>
      </div>
      <div class="sample-content">
        <div class="source-panel">
          <pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">erDiagram</span></span>
<span class="line"><span style="color:#E36209">  STUDENT</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> name</span></span>
<span class="line"><span style="color:#D73A49">    date</span><span style="color:#E36209"> dob</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> grade</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  TEACHER</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> name</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> department</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  COURSE</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> title</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> teacher_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> credits</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  ENROLLMENT</span><span style="color:#D73A49"> {</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> id</span><span style="color:#D73A49"> PK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> student_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    int</span><span style="color:#E36209"> course_id</span><span style="color:#D73A49"> FK</span></span>
<span class="line"><span style="color:#D73A49">    string</span><span style="color:#E36209"> semester</span></span>
<span class="line"><span style="color:#D73A49">    float</span><span style="color:#E36209"> grade</span></span>
<span class="line"><span style="color:#D73A49">  }</span></span>
<span class="line"><span style="color:#E36209">  TEACHER</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> COURSE</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> teaches</span></span>
<span class="line"><span style="color:#E36209">  STUDENT</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> ENROLLMENT</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> enrolled</span></span>
<span class="line"><span style="color:#E36209">  COURSE</span><span style="color:#D73A49"> ||--o{</span><span style="color:#E36209"> ENROLLMENT</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> has</span></span></code></pre>
          
        </div>
        <div class="svg-panel" id="svg-panel-69" data-sample-bg="">
          <div class="svg-container" id="svg-69">
            <div class="loading-spinner"></div>
          </div>
        </div>
        <div class="ascii-panel" id="ascii-panel-69">
          <pre class="ascii-output"><code id="ascii-69">Rendering…</code></pre>
        </div>
      </div>
    </section>

  <!-- Bundled mermaid renderer — exposes window.__mermaid -->
  <script type="module">
var S7=Object.create;var{getPrototypeOf:w7,defineProperty:w6,getOwnPropertyNames:f7}=Object;var b7=Object.prototype.hasOwnProperty;var G6=($,J,K)=>{K=$!=null?S7(w7($)):{};let Q=J||!$||!$.__esModule?w6(K,"default",{value:$,enumerable:!0}):K;for(let Z of f7($))if(!b7.call(Q,Z))w6(Q,Z,{get:()=>$[Z],enumerable:!0});return Q};var x7=($,J)=>()=>(J||$((J={exports:{}}).exports,J),J.exports);var _6=(($)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy($,{get:(J,K)=>(typeof require!=="undefined"?require:J)[K]}):$)(function($){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+$+'" is not supported')});var Z6=x7((z7,O6)=>{(function($){if(typeof z7==="object"&&typeof O6!=="undefined")O6.exports=$();else if(typeof define==="function"&&define.amd)define([],$);else{var J;if(typeof window!=="undefined")J=window;else if(typeof global!=="undefined")J=global;else if(typeof self!=="undefined")J=self;else J=this;J.dagre=$()}})(function(){var $,J,K;return function(){function Q(Z,z,B){function U(F,H){if(!z[F]){if(!Z[F]){var V=_6;if(!H&&V)return V(F,!0);if(j)return j(F,!0);var P=new Error("Cannot find module '"+F+"'");throw P.code="MODULE_NOT_FOUND",P}var W=z[F]={exports:{}};Z[F][0].call(W.exports,function(_){var R=Z[F][1][_];return U(R||_)},W,W.exports,Q,Z,z,B)}return z[F].exports}for(var j=_6,G=0;G<B.length;G++)U(B[G]);return U}return Q}()({1:[function(Q,Z,z){Z.exports={graphlib:Q("@dagrejs/graphlib"),layout:Q("./lib/layout"),debug:Q("./lib/debug"),util:{time:Q("./lib/util").time,notime:Q("./lib/util").notime},version:Q("./lib/version")}},{"./lib/debug":6,"./lib/layout":8,"./lib/util":27,"./lib/version":28,"@dagrejs/graphlib":29}],2:[function(Q,Z,z){let B=Q("./greedy-fas"),U=Q("./util").uniqueId;Z.exports={run:j,undo:F};function j(H){(H.graph().acyclicer==="greedy"?B(H,P(H)):G(H)).forEach((W)=>{let _=H.edge(W);H.removeEdge(W),_.forwardName=W.name,_.reversed=!0,H.setEdge(W.w,W.v,_,U("rev"))});function P(W){return(_)=>{return W.edge(_).weight}}}function G(H){let V=[],P={},W={};function _(R){if(Object.hasOwn(W,R))return;W[R]=!0,P[R]=!0,H.outEdges(R).forEach((M)=>{if(Object.hasOwn(P,M.w))V.push(M);else _(M.w)}),delete P[R]}return H.nodes().forEach(_),V}function F(H){H.edges().forEach((V)=>{let P=H.edge(V);if(P.reversed){H.removeEdge(V);let W=P.forwardName;delete P.reversed,delete P.forwardName,H.setEdge(V.w,V.v,P,W)}})}},{"./greedy-fas":7,"./util":27}],3:[function(Q,Z,z){let B=Q("./util");Z.exports=U;function U(G){function F(H){let V=G.children(H),P=G.node(H);if(V.length)V.forEach(F);if(Object.hasOwn(P,"minRank")){P.borderLeft=[],P.borderRight=[];for(let W=P.minRank,_=P.maxRank+1;W<_;++W)j(G,"borderLeft","_bl",H,P,W),j(G,"borderRight","_br",H,P,W)}}G.children().forEach(F)}function j(G,F,H,V,P,W){let _={width:0,height:0,rank:W,borderType:F},R=P[F][W-1],M=B.addDummyNode(G,"border",_,H);if(P[F][W]=M,G.setParent(M,V),R)G.setEdge(R,M,{weight:1})}},{"./util":27}],4:[function(Q,Z,z){Z.exports={adjust:B,undo:U};function B(W){let _=W.graph().rankdir.toLowerCase();if(_==="lr"||_==="rl")j(W)}function U(W){let _=W.graph().rankdir.toLowerCase();if(_==="bt"||_==="rl")F(W);if(_==="lr"||_==="rl")V(W),j(W)}function j(W){W.nodes().forEach((_)=>G(W.node(_))),W.edges().forEach((_)=>G(W.edge(_)))}function G(W){let _=W.width;W.width=W.height,W.height=_}function F(W){W.nodes().forEach((_)=>H(W.node(_))),W.edges().forEach((_)=>{let R=W.edge(_);if(R.points.forEach(H),Object.hasOwn(R,"y"))H(R)})}function H(W){W.y=-W.y}function V(W){W.nodes().forEach((_)=>P(W.node(_))),W.edges().forEach((_)=>{let R=W.edge(_);if(R.points.forEach(P),Object.hasOwn(R,"x"))P(R)})}function P(W){let _=W.x;W.x=W.y,W.y=_}},{}],5:[function(Q,Z,z){class B{constructor(){let G={};G._next=G._prev=G,this._sentinel=G}dequeue(){let G=this._sentinel,F=G._prev;if(F!==G)return U(F),F}enqueue(G){let F=this._sentinel;if(G._prev&&G._next)U(G);G._next=F._next,F._next._prev=G,F._next=G,G._prev=F}toString(){let G=[],F=this._sentinel,H=F._prev;while(H!==F)G.push(JSON.stringify(H,j)),H=H._prev;return"["+G.join(", ")+"]"}}function U(G){G._prev._next=G._next,G._next._prev=G._prev,delete G._next,delete G._prev}function j(G,F){if(G!=="_next"&&G!=="_prev")return F}Z.exports=B},{}],6:[function(Q,Z,z){let B=Q("./util"),U=Q("@dagrejs/graphlib").Graph;Z.exports={debugOrdering:j};function j(G){let F=B.buildLayerMatrix(G),H=new U({compound:!0,multigraph:!0}).setGraph({});return G.nodes().forEach((V)=>{H.setNode(V,{label:V}),H.setParent(V,"layer"+G.node(V).rank)}),G.edges().forEach((V)=>H.setEdge(V.v,V.w,{},V.name)),F.forEach((V,P)=>{let W="layer"+P;H.setNode(W,{rank:"same"}),V.reduce((_,R)=>{return H.setEdge(_,R,{style:"invis"}),R})}),H}},{"./util":27,"@dagrejs/graphlib":29}],7:[function(Q,Z,z){let B=Q("@dagrejs/graphlib").Graph,U=Q("./data/list");Z.exports=G;let j=()=>1;function G(_,R){if(_.nodeCount()<=1)return[];let M=V(_,R||j);return F(M.graph,M.buckets,M.zeroIdx).flatMap((D)=>_.outEdges(D.v,D.w))}function F(_,R,M){let Y=[],D=R[R.length-1],C=R[0],y;while(_.nodeCount()){while(y=C.dequeue())H(_,R,M,y);while(y=D.dequeue())H(_,R,M,y);if(_.nodeCount()){for(let A=R.length-2;A>0;--A)if(y=R[A].dequeue(),y){Y=Y.concat(H(_,R,M,y,!0));break}}}return Y}function H(_,R,M,Y,D){let C=D?[]:void 0;return _.inEdges(Y.v).forEach((y)=>{let A=_.edge(y),q=_.node(y.v);if(D)C.push({v:y.v,w:y.w});q.out-=A,P(R,M,q)}),_.outEdges(Y.v).forEach((y)=>{let A=_.edge(y),q=y.w,O=_.node(q);O.in-=A,P(R,M,O)}),_.removeNode(Y.v),C}function V(_,R){let M=new B,Y=0,D=0;_.nodes().forEach((A)=>{M.setNode(A,{v:A,in:0,out:0})}),_.edges().forEach((A)=>{let q=M.edge(A.v,A.w)||0,O=R(A),k=q+O;M.setEdge(A.v,A.w,k),D=Math.max(D,M.node(A.v).out+=O),Y=Math.max(Y,M.node(A.w).in+=O)});let C=W(D+Y+3).map(()=>new U),y=Y+1;return M.nodes().forEach((A)=>{P(C,y,M.node(A))}),{graph:M,buckets:C,zeroIdx:y}}function P(_,R,M){if(!M.out)_[0].enqueue(M);else if(!M.in)_[_.length-1].enqueue(M);else _[M.out-M.in+R].enqueue(M)}function W(_){let R=[];for(let M=0;M<_;M++)R.push(M);return R}},{"./data/list":5,"@dagrejs/graphlib":29}],8:[function(Q,Z,z){let B=Q("./acyclic"),U=Q("./normalize"),j=Q("./rank"),G=Q("./util").normalizeRanks,F=Q("./parent-dummy-chains"),H=Q("./util").removeEmptyRanks,V=Q("./nesting-graph"),P=Q("./add-border-segments"),W=Q("./coordinate-system"),_=Q("./order"),R=Q("./position"),M=Q("./util"),Y=Q("@dagrejs/graphlib").Graph;Z.exports=D;function D(L,N){let x=N&&N.debugTiming?M.time:M.notime;x("layout",()=>{let g=x("  buildLayoutGraph",()=>X(L));x("  runLayout",()=>C(g,x,N)),x("  updateInputGraph",()=>y(L,g))})}function C(L,N,x){N("    makeSpaceForEdgeLabels",()=>I(L)),N("    removeSelfEdges",()=>p(L)),N("    acyclic",()=>B.run(L)),N("    nestingGraph.run",()=>V.run(L)),N("    rank",()=>j(M.asNonCompoundGraph(L))),N("    injectEdgeLabelProxies",()=>w(L)),N("    removeEmptyRanks",()=>H(L)),N("    nestingGraph.cleanup",()=>V.cleanup(L)),N("    normalizeRanks",()=>G(L)),N("    assignRankMinMax",()=>S(L)),N("    removeEdgeLabelProxies",()=>T(L)),N("    normalize.run",()=>U.run(L)),N("    parentDummyChains",()=>F(L)),N("    addBorderSegments",()=>P(L)),N("    order",()=>_(L,x)),N("    insertSelfEdges",()=>h(L)),N("    adjustCoordinateSystem",()=>W.adjust(L)),N("    position",()=>R(L)),N("    positionSelfEdges",()=>m(L)),N("    removeBorderNodes",()=>l(L)),N("    normalize.undo",()=>U.undo(L)),N("    fixupEdgeLabelCoords",()=>E(L)),N("    undoCoordinateSystem",()=>W.undo(L)),N("    translateGraph",()=>c(L)),N("    assignNodeIntersects",()=>i(L)),N("    reversePoints",()=>d(L)),N("    acyclic.undo",()=>B.undo(L))}function y(L,N){L.nodes().forEach((x)=>{let g=L.node(x),t=N.node(x);if(g){if(g.x=t.x,g.y=t.y,g.rank=t.rank,N.children(x).length)g.width=t.width,g.height=t.height}}),L.edges().forEach((x)=>{let g=L.edge(x),t=N.edge(x);if(g.points=t.points,Object.hasOwn(t,"x"))g.x=t.x,g.y=t.y}),L.graph().width=N.graph().width,L.graph().height=N.graph().height}let A=["nodesep","edgesep","ranksep","marginx","marginy"],q={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},O=["acyclicer","ranker","rankdir","align"],k=["width","height","rank"],v={width:0,height:0},u=["minlen","weight","width","height","labeloffset"],b={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},f=["labelpos"];function X(L){let N=new Y({multigraph:!0,compound:!0}),x=o(L.graph());return N.setGraph(Object.assign({},q,n(x,A),M.pick(x,O))),L.nodes().forEach((g)=>{let t=o(L.node(g)),$4=n(t,k);Object.keys(v).forEach((r)=>{if($4[r]===void 0)$4[r]=v[r]}),N.setNode(g,$4),N.setParent(g,L.parent(g))}),L.edges().forEach((g)=>{let t=o(L.edge(g));N.setEdge(g,Object.assign({},b,n(t,u),M.pick(t,f)))}),N}function I(L){let N=L.graph();N.ranksep/=2,L.edges().forEach((x)=>{let g=L.edge(x);if(g.minlen*=2,g.labelpos.toLowerCase()!=="c")if(N.rankdir==="TB"||N.rankdir==="BT")g.width+=g.labeloffset;else g.height+=g.labeloffset})}function w(L){L.edges().forEach((N)=>{let x=L.edge(N);if(x.width&&x.height){let g=L.node(N.v),$4={rank:(L.node(N.w).rank-g.rank)/2+g.rank,e:N};M.addDummyNode(L,"edge-proxy",$4,"_ep")}})}function S(L){let N=0;L.nodes().forEach((x)=>{let g=L.node(x);if(g.borderTop)g.minRank=L.node(g.borderTop).rank,g.maxRank=L.node(g.borderBottom).rank,N=Math.max(N,g.maxRank)}),L.graph().maxRank=N}function T(L){L.nodes().forEach((N)=>{let x=L.node(N);if(x.dummy==="edge-proxy")L.edge(x.e).labelRank=x.rank,L.removeNode(N)})}function c(L){let N=Number.POSITIVE_INFINITY,x=0,g=Number.POSITIVE_INFINITY,t=0,$4=L.graph(),r=$4.marginx||0,B4=$4.marginy||0;function F4(H4){let{x:P4,y:h4,width:k6,height:S6}=H4;N=Math.min(N,P4-k6/2),x=Math.max(x,P4+k6/2),g=Math.min(g,h4-S6/2),t=Math.max(t,h4+S6/2)}L.nodes().forEach((H4)=>F4(L.node(H4))),L.edges().forEach((H4)=>{let P4=L.edge(H4);if(Object.hasOwn(P4,"x"))F4(P4)}),N-=r,g-=B4,L.nodes().forEach((H4)=>{let P4=L.node(H4);P4.x-=N,P4.y-=g}),L.edges().forEach((H4)=>{let P4=L.edge(H4);if(P4.points.forEach((h4)=>{h4.x-=N,h4.y-=g}),Object.hasOwn(P4,"x"))P4.x-=N;if(Object.hasOwn(P4,"y"))P4.y-=g}),$4.width=x-N+r,$4.height=t-g+B4}function i(L){L.edges().forEach((N)=>{let x=L.edge(N),g=L.node(N.v),t=L.node(N.w),$4,r;if(!x.points)x.points=[],$4=t,r=g;else $4=x.points[0],r=x.points[x.points.length-1];x.points.unshift(M.intersectRect(g,$4)),x.points.push(M.intersectRect(t,r))})}function E(L){L.edges().forEach((N)=>{let x=L.edge(N);if(Object.hasOwn(x,"x")){if(x.labelpos==="l"||x.labelpos==="r")x.width-=x.labeloffset;switch(x.labelpos){case"l":x.x-=x.width/2+x.labeloffset;break;case"r":x.x+=x.width/2+x.labeloffset;break}}})}function d(L){L.edges().forEach((N)=>{let x=L.edge(N);if(x.reversed)x.points.reverse()})}function l(L){L.nodes().forEach((N)=>{if(L.children(N).length){let x=L.node(N),g=L.node(x.borderTop),t=L.node(x.borderBottom),$4=L.node(x.borderLeft[x.borderLeft.length-1]),r=L.node(x.borderRight[x.borderRight.length-1]);x.width=Math.abs(r.x-$4.x),x.height=Math.abs(t.y-g.y),x.x=$4.x+x.width/2,x.y=g.y+x.height/2}}),L.nodes().forEach((N)=>{if(L.node(N).dummy==="border")L.removeNode(N)})}function p(L){L.edges().forEach((N)=>{if(N.v===N.w){var x=L.node(N.v);if(!x.selfEdges)x.selfEdges=[];x.selfEdges.push({e:N,label:L.edge(N)}),L.removeEdge(N)}})}function h(L){var N=M.buildLayerMatrix(L);N.forEach((x)=>{var g=0;x.forEach((t,$4)=>{var r=L.node(t);r.order=$4+g,(r.selfEdges||[]).forEach((B4)=>{M.addDummyNode(L,"selfedge",{width:B4.label.width,height:B4.label.height,rank:r.rank,order:$4+ ++g,e:B4.e,label:B4.label},"_se")}),delete r.selfEdges})})}function m(L){L.nodes().forEach((N)=>{var x=L.node(N);if(x.dummy==="selfedge"){var g=L.node(x.e.v),t=g.x+g.width/2,$4=g.y,r=x.x-t,B4=g.height/2;L.setEdge(x.e,x.label),L.removeNode(N),x.label.points=[{x:t+2*r/3,y:$4-B4},{x:t+5*r/6,y:$4-B4},{x:t+r,y:$4},{x:t+5*r/6,y:$4+B4},{x:t+2*r/3,y:$4+B4}],x.label.x=x.x,x.label.y=x.y}})}function n(L,N){return M.mapValues(M.pick(L,N),Number)}function o(L){var N={};if(L)Object.entries(L).forEach(([x,g])=>{if(typeof x==="string")x=x.toLowerCase();N[x]=g});return N}},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./nesting-graph":9,"./normalize":10,"./order":15,"./parent-dummy-chains":20,"./position":22,"./rank":24,"./util":27,"@dagrejs/graphlib":29}],9:[function(Q,Z,z){let B=Q("./util");Z.exports={run:U,cleanup:H};function U(V){let P=B.addDummyNode(V,"root",{},"_root"),W=G(V),_=Object.values(W),R=B.applyWithChunking(Math.max,_)-1,M=2*R+1;V.graph().nestingRoot=P,V.edges().forEach((D)=>V.edge(D).minlen*=M);let Y=F(V)+1;V.children().forEach((D)=>j(V,P,M,Y,R,W,D)),V.graph().nodeRankFactor=M}function j(V,P,W,_,R,M,Y){let D=V.children(Y);if(!D.length){if(Y!==P)V.setEdge(P,Y,{weight:0,minlen:W});return}let C=B.addBorderNode(V,"_bt"),y=B.addBorderNode(V,"_bb"),A=V.node(Y);if(V.setParent(C,Y),A.borderTop=C,V.setParent(y,Y),A.borderBottom=y,D.forEach((q)=>{j(V,P,W,_,R,M,q);let O=V.node(q),k=O.borderTop?O.borderTop:q,v=O.borderBottom?O.borderBottom:q,u=O.borderTop?_:2*_,b=k!==v?1:R-M[Y]+1;V.setEdge(C,k,{weight:u,minlen:b,nestingEdge:!0}),V.setEdge(v,y,{weight:u,minlen:b,nestingEdge:!0})}),!V.parent(Y))V.setEdge(P,C,{weight:0,minlen:R+M[Y]})}function G(V){var P={};function W(_,R){var M=V.children(_);if(M&&M.length)M.forEach((Y)=>W(Y,R+1));P[_]=R}return V.children().forEach((_)=>W(_,1)),P}function F(V){return V.edges().reduce((P,W)=>P+V.edge(W).weight,0)}function H(V){var P=V.graph();V.removeNode(P.nestingRoot),delete P.nestingRoot,V.edges().forEach((W)=>{var _=V.edge(W);if(_.nestingEdge)V.removeEdge(W)})}},{"./util":27}],10:[function(Q,Z,z){let B=Q("./util");Z.exports={run:U,undo:G};function U(F){F.graph().dummyChains=[],F.edges().forEach((H)=>j(F,H))}function j(F,H){let V=H.v,P=F.node(V).rank,W=H.w,_=F.node(W).rank,R=H.name,M=F.edge(H),Y=M.labelRank;if(_===P+1)return;F.removeEdge(H);let D,C,y;for(y=0,++P;P<_;++y,++P){if(M.points=[],C={width:0,height:0,edgeLabel:M,edgeObj:H,rank:P},D=B.addDummyNode(F,"edge",C,"_d"),P===Y)C.width=M.width,C.height=M.height,C.dummy="edge-label",C.labelpos=M.labelpos;if(F.setEdge(V,D,{weight:M.weight},R),y===0)F.graph().dummyChains.push(D);V=D}F.setEdge(V,W,{weight:M.weight},R)}function G(F){F.graph().dummyChains.forEach((H)=>{let V=F.node(H),P=V.edgeLabel,W;F.setEdge(V.edgeObj,P);while(V.dummy){if(W=F.successors(H)[0],F.removeNode(H),P.points.push({x:V.x,y:V.y}),V.dummy==="edge-label")P.x=V.x,P.y=V.y,P.width=V.width,P.height=V.height;H=W,V=F.node(H)}})}},{"./util":27}],11:[function(Q,Z,z){Z.exports=B;function B(U,j,G){let F={},H;G.forEach((V)=>{let P=U.parent(V),W,_;while(P){if(W=U.parent(P),W)_=F[W],F[W]=P;else _=H,H=P;if(_&&_!==P){j.setEdge(_,P);return}P=W}})}},{}],12:[function(Q,Z,z){Z.exports=B;function B(U,j=[]){return j.map((G)=>{let F=U.inEdges(G);if(!F.length)return{v:G};else{let H=F.reduce((V,P)=>{let W=U.edge(P),_=U.node(P.v);return{sum:V.sum+W.weight*_.order,weight:V.weight+W.weight}},{sum:0,weight:0});return{v:G,barycenter:H.sum/H.weight,weight:H.weight}}})}},{}],13:[function(Q,Z,z){let B=Q("@dagrejs/graphlib").Graph,U=Q("../util");Z.exports=j;function j(F,H,V,P){if(!P)P=F.nodes();let W=G(F),_=new B({compound:!0}).setGraph({root:W}).setDefaultNodeLabel((R)=>F.node(R));return P.forEach((R)=>{let M=F.node(R),Y=F.parent(R);if(M.rank===H||M.minRank<=H&&H<=M.maxRank){if(_.setNode(R),_.setParent(R,Y||W),F[V](R).forEach((D)=>{let C=D.v===R?D.w:D.v,y=_.edge(C,R),A=y!==void 0?y.weight:0;_.setEdge(C,R,{weight:F.edge(D).weight+A})}),Object.hasOwn(M,"minRank"))_.setNode(R,{borderLeft:M.borderLeft[H],borderRight:M.borderRight[H]})}}),_}function G(F){var H;while(F.hasNode(H=U.uniqueId("_root")));return H}},{"../util":27,"@dagrejs/graphlib":29}],14:[function(Q,Z,z){let B=Q("../util").zipObject;Z.exports=U;function U(G,F){let H=0;for(let V=1;V<F.length;++V)H+=j(G,F[V-1],F[V]);return H}function j(G,F,H){let V=B(H,H.map((Y,D)=>D)),P=F.flatMap((Y)=>{return G.outEdges(Y).map((D)=>{return{pos:V[D.w],weight:G.edge(D).weight}}).sort((D,C)=>D.pos-C.pos)}),W=1;while(W<H.length)W<<=1;let _=2*W-1;W-=1;let R=new Array(_).fill(0),M=0;return P.forEach((Y)=>{let D=Y.pos+W;R[D]+=Y.weight;let C=0;while(D>0){if(D%2)C+=R[D+1];D=D-1>>1,R[D]+=Y.weight}M+=Y.weight*C}),M}},{"../util":27}],15:[function(Q,Z,z){let B=Q("./init-order"),U=Q("./cross-count"),j=Q("./sort-subgraph"),G=Q("./build-layer-graph"),F=Q("./add-subgraph-constraints"),H=Q("@dagrejs/graphlib").Graph,V=Q("../util");Z.exports=P;function P(M,Y){if(Y&&typeof Y.customOrder==="function"){Y.customOrder(M,P);return}let D=V.maxRank(M),C=W(M,V.range(1,D+1),"inEdges"),y=W(M,V.range(D-1,-1,-1),"outEdges"),A=B(M);if(R(M,A),Y&&Y.disableOptimalOrderHeuristic)return;let q=Number.POSITIVE_INFINITY,O;for(let k=0,v=0;v<4;++k,++v){_(k%2?C:y,k%4>=2),A=V.buildLayerMatrix(M);let u=U(M,A);if(u<q)v=0,O=Object.assign({},A),q=u}R(M,O)}function W(M,Y,D){let C=new Map,y=(A,q)=>{if(!C.has(A))C.set(A,[]);C.get(A).push(q)};for(let A of M.nodes()){let q=M.node(A);if(typeof q.rank==="number")y(q.rank,A);if(typeof q.minRank==="number"&&typeof q.maxRank==="number"){for(let O=q.minRank;O<=q.maxRank;O++)if(O!==q.rank)y(O,A)}}return Y.map(function(A){return G(M,A,D,C.get(A)||[])})}function _(M,Y){let D=new H;M.forEach(function(C){let y=C.graph().root,A=j(C,y,D,Y);A.vs.forEach((q,O)=>C.node(q).order=O),F(C,D,A.vs)})}function R(M,Y){Object.values(Y).forEach((D)=>D.forEach((C,y)=>M.node(C).order=y))}},{"../util":27,"./add-subgraph-constraints":11,"./build-layer-graph":13,"./cross-count":14,"./init-order":16,"./sort-subgraph":18,"@dagrejs/graphlib":29}],16:[function(Q,Z,z){let B=Q("../util");Z.exports=U;function U(j){let G={},F=j.nodes().filter((R)=>!j.children(R).length),H=F.map((R)=>j.node(R).rank),V=B.applyWithChunking(Math.max,H),P=B.range(V+1).map(()=>[]);function W(R){if(G[R])return;G[R]=!0;let M=j.node(R);P[M.rank].push(R),j.successors(R).forEach(W)}return F.sort((R,M)=>j.node(R).rank-j.node(M).rank).forEach(W),P}},{"../util":27}],17:[function(Q,Z,z){let B=Q("../util");Z.exports=U;function U(F,H){let V={};F.forEach((W,_)=>{let R=V[W.v]={indegree:0,in:[],out:[],vs:[W.v],i:_};if(W.barycenter!==void 0)R.barycenter=W.barycenter,R.weight=W.weight}),H.edges().forEach((W)=>{let _=V[W.v],R=V[W.w];if(_!==void 0&&R!==void 0)R.indegree++,_.out.push(V[W.w])});let P=Object.values(V).filter((W)=>!W.indegree);return j(P)}function j(F){let H=[];function V(W){return(_)=>{if(_.merged)return;if(_.barycenter===void 0||W.barycenter===void 0||_.barycenter>=W.barycenter)G(W,_)}}function P(W){return(_)=>{if(_.in.push(W),--_.indegree===0)F.push(_)}}while(F.length){let W=F.pop();H.push(W),W.in.reverse().forEach(V(W)),W.out.forEach(P(W))}return H.filter((W)=>!W.merged).map((W)=>{return B.pick(W,["vs","i","barycenter","weight"])})}function G(F,H){let V=0,P=0;if(F.weight)V+=F.barycenter*F.weight,P+=F.weight;if(H.weight)V+=H.barycenter*H.weight,P+=H.weight;F.vs=H.vs.concat(F.vs),F.barycenter=V/P,F.weight=P,F.i=Math.min(H.i,F.i),H.merged=!0}},{"../util":27}],18:[function(Q,Z,z){let B=Q("./barycenter"),U=Q("./resolve-conflicts"),j=Q("./sort");Z.exports=G;function G(V,P,W,_){let R=V.children(P),M=V.node(P),Y=M?M.borderLeft:void 0,D=M?M.borderRight:void 0,C={};if(Y)R=R.filter((O)=>O!==Y&&O!==D);let y=B(V,R);y.forEach((O)=>{if(V.children(O.v).length){let k=G(V,O.v,W,_);if(C[O.v]=k,Object.hasOwn(k,"barycenter"))H(O,k)}});let A=U(y,W);F(A,C);let q=j(A,_);if(Y){if(q.vs=[Y,q.vs,D].flat(!0),V.predecessors(Y).length){let O=V.node(V.predecessors(Y)[0]),k=V.node(V.predecessors(D)[0]);if(!Object.hasOwn(q,"barycenter"))q.barycenter=0,q.weight=0;q.barycenter=(q.barycenter*q.weight+O.order+k.order)/(q.weight+2),q.weight+=2}}return q}function F(V,P){V.forEach((W)=>{W.vs=W.vs.flatMap((_)=>{if(P[_])return P[_].vs;return _})})}function H(V,P){if(V.barycenter!==void 0)V.barycenter=(V.barycenter*V.weight+P.barycenter*P.weight)/(V.weight+P.weight),V.weight+=P.weight;else V.barycenter=P.barycenter,V.weight=P.weight}},{"./barycenter":12,"./resolve-conflicts":17,"./sort":19}],19:[function(Q,Z,z){let B=Q("../util");Z.exports=U;function U(F,H){let V=B.partition(F,(C)=>{return Object.hasOwn(C,"barycenter")}),P=V.lhs,W=V.rhs.sort((C,y)=>y.i-C.i),_=[],R=0,M=0,Y=0;P.sort(G(!!H)),Y=j(_,W,Y),P.forEach((C)=>{Y+=C.vs.length,_.push(C.vs),R+=C.barycenter*C.weight,M+=C.weight,Y=j(_,W,Y)});let D={vs:_.flat(!0)};if(M)D.barycenter=R/M,D.weight=M;return D}function j(F,H,V){let P;while(H.length&&(P=H[H.length-1]).i<=V)H.pop(),F.push(P.vs),V++;return V}function G(F){return(H,V)=>{if(H.barycenter<V.barycenter)return-1;else if(H.barycenter>V.barycenter)return 1;return!F?H.i-V.i:V.i-H.i}}},{"../util":27}],20:[function(Q,Z,z){Z.exports=B;function B(G){let F=j(G);G.graph().dummyChains.forEach((H)=>{let V=G.node(H),P=V.edgeObj,W=U(G,F,P.v,P.w),_=W.path,R=W.lca,M=0,Y=_[M],D=!0;while(H!==P.w){if(V=G.node(H),D){while((Y=_[M])!==R&&G.node(Y).maxRank<V.rank)M++;if(Y===R)D=!1}if(!D){while(M<_.length-1&&G.node(Y=_[M+1]).minRank<=V.rank)M++;Y=_[M]}G.setParent(H,Y),H=G.successors(H)[0]}})}function U(G,F,H,V){let P=[],W=[],_=Math.min(F[H].low,F[V].low),R=Math.max(F[H].lim,F[V].lim),M,Y;M=H;do M=G.parent(M),P.push(M);while(M&&(F[M].low>_||R>F[M].lim));Y=M,M=V;while((M=G.parent(M))!==Y)W.push(M);return{path:P.concat(W.reverse()),lca:Y}}function j(G){let F={},H=0;function V(P){let W=H;G.children(P).forEach(V),F[P]={low:W,lim:H++}}return G.children().forEach(V),F}},{}],21:[function(Q,Z,z){let B=Q("@dagrejs/graphlib").Graph,U=Q("../util");Z.exports={positionX:D,findType1Conflicts:j,findType2Conflicts:G,addConflict:H,hasConflict:V,verticalAlignment:P,horizontalCompaction:W,alignCoordinates:M,findSmallestWidthAlignment:R,balance:Y};function j(A,q){let O={};function k(v,u){let b=0,f=0,X=v.length,I=u[u.length-1];return u.forEach((w,S)=>{let T=F(A,w),c=T?A.node(T).order:X;if(T||w===I)u.slice(f,S+1).forEach((i)=>{A.predecessors(i).forEach((E)=>{let d=A.node(E),l=d.order;if((l<b||c<l)&&!(d.dummy&&A.node(i).dummy))H(O,E,i)})}),f=S+1,b=c}),u}return q.length&&q.reduce(k),O}function G(A,q){let O={};function k(u,b,f,X,I){let w;U.range(b,f).forEach((S)=>{if(w=u[S],A.node(w).dummy)A.predecessors(w).forEach((T)=>{let c=A.node(T);if(c.dummy&&(c.order<X||c.order>I))H(O,T,w)})})}function v(u,b){let f=-1,X,I=0;return b.forEach((w,S)=>{if(A.node(w).dummy==="border"){let T=A.predecessors(w);if(T.length)X=A.node(T[0]).order,k(b,I,S,f,X),I=S,f=X}k(b,I,b.length,X,u.length)}),b}return q.length&&q.reduce(v),O}function F(A,q){if(A.node(q).dummy)return A.predecessors(q).find((O)=>A.node(O).dummy)}function H(A,q,O){if(q>O){let v=q;q=O,O=v}let k=A[q];if(!k)A[q]=k={};k[O]=!0}function V(A,q,O){if(q>O){let k=q;q=O,O=k}return!!A[q]&&Object.hasOwn(A[q],O)}function P(A,q,O,k){let v={},u={},b={};return q.forEach((f)=>{f.forEach((X,I)=>{v[X]=X,u[X]=X,b[X]=I})}),q.forEach((f)=>{let X=-1;f.forEach((I)=>{let w=k(I);if(w.length){w=w.sort((T,c)=>b[T]-b[c]);let S=(w.length-1)/2;for(let T=Math.floor(S),c=Math.ceil(S);T<=c;++T){let i=w[T];if(u[I]===I&&X<b[i]&&!V(O,I,i))u[i]=I,u[I]=v[I]=v[i],X=b[i]}}})}),{root:v,align:u}}function W(A,q,O,k,v){let u={},b=_(A,q,O,v),f=v?"borderLeft":"borderRight";function X(S,T){let c=b.nodes(),i=c.pop(),E={};while(i){if(E[i])S(i);else E[i]=!0,c.push(i),c=c.concat(T(i));i=c.pop()}}function I(S){u[S]=b.inEdges(S).reduce((T,c)=>{return Math.max(T,u[c.v]+b.edge(c))},0)}function w(S){let T=b.outEdges(S).reduce((i,E)=>{return Math.min(i,u[E.w]-b.edge(E))},Number.POSITIVE_INFINITY),c=A.node(S);if(T!==Number.POSITIVE_INFINITY&&c.borderType!==f)u[S]=Math.max(u[S],T)}return X(I,b.predecessors.bind(b)),X(w,b.successors.bind(b)),Object.keys(k).forEach((S)=>u[S]=u[O[S]]),u}function _(A,q,O,k){let v=new B,u=A.graph(),b=C(u.nodesep,u.edgesep,k);return q.forEach((f)=>{let X;f.forEach((I)=>{let w=O[I];if(v.setNode(w),X){var S=O[X],T=v.edge(S,w);v.setEdge(S,w,Math.max(b(A,I,X),T||0))}X=I})}),v}function R(A,q){return Object.values(q).reduce((O,k)=>{let{NEGATIVE_INFINITY:v,POSITIVE_INFINITY:u}=Number;Object.entries(k).forEach(([f,X])=>{let I=y(A,f)/2;v=Math.max(X+I,v),u=Math.min(X-I,u)});let b=v-u;if(b<O[0])O=[b,k];return O},[Number.POSITIVE_INFINITY,null])[1]}function M(A,q){let O=Object.values(q),k=U.applyWithChunking(Math.min,O),v=U.applyWithChunking(Math.max,O);["u","d"].forEach((u)=>{["l","r"].forEach((b)=>{let f=u+b,X=A[f];if(X===q)return;let I=Object.values(X),w=k-U.applyWithChunking(Math.min,I);if(b!=="l")w=v-U.applyWithChunking(Math.max,I);if(w)A[f]=U.mapValues(X,(S)=>S+w)})})}function Y(A,q){return U.mapValues(A.ul,(O,k)=>{if(q)return A[q.toLowerCase()][k];else{let v=Object.values(A).map((u)=>u[k]).sort((u,b)=>u-b);return(v[1]+v[2])/2}})}function D(A){let q=U.buildLayerMatrix(A),O=Object.assign(j(A,q),G(A,q)),k={},v;["u","d"].forEach((b)=>{v=b==="u"?q:Object.values(q).reverse(),["l","r"].forEach((f)=>{if(f==="r")v=v.map((S)=>{return Object.values(S).reverse()});let X=(b==="u"?A.predecessors:A.successors).bind(A),I=P(A,v,O,X),w=W(A,v,I.root,I.align,f==="r");if(f==="r")w=U.mapValues(w,(S)=>-S);k[b+f]=w})});let u=R(A,k);return M(k,u),Y(k,A.graph().align)}function C(A,q,O){return(k,v,u)=>{let b=k.node(v),f=k.node(u),X=0,I;if(X+=b.width/2,Object.hasOwn(b,"labelpos"))switch(b.labelpos.toLowerCase()){case"l":I=-b.width/2;break;case"r":I=b.width/2;break}if(I)X+=O?I:-I;if(I=0,X+=(b.dummy?q:A)/2,X+=(f.dummy?q:A)/2,X+=f.width/2,Object.hasOwn(f,"labelpos"))switch(f.labelpos.toLowerCase()){case"l":I=f.width/2;break;case"r":I=-f.width/2;break}if(I)X+=O?I:-I;return I=0,X}}function y(A,q){return A.node(q).width}},{"../util":27,"@dagrejs/graphlib":29}],22:[function(Q,Z,z){let B=Q("../util"),U=Q("./bk").positionX;Z.exports=j;function j(F){F=B.asNonCompoundGraph(F),G(F),Object.entries(U(F)).forEach(([H,V])=>F.node(H).x=V)}function G(F){let H=B.buildLayerMatrix(F),V=F.graph().ranksep,P=0;H.forEach((W)=>{let _=W.reduce((R,M)=>{let Y=F.node(M).height;if(R>Y)return R;else return Y},0);W.forEach((R)=>F.node(R).y=P+_/2),P+=_+V})}},{"../util":27,"./bk":21}],23:[function(Q,Z,z){var B=Q("@dagrejs/graphlib").Graph,U=Q("./util").slack;Z.exports=j;function j(V){var P=new B({directed:!1}),W=V.nodes()[0],_=V.nodeCount();P.setNode(W,{});var R,M;while(G(P,V)<_)R=F(P,V),M=P.hasNode(R.v)?U(V,R):-U(V,R),H(P,V,M);return P}function G(V,P){function W(_){P.nodeEdges(_).forEach((R)=>{var M=R.v,Y=_===M?R.w:M;if(!V.hasNode(Y)&&!U(P,R))V.setNode(Y,{}),V.setEdge(_,Y,{}),W(Y)})}return V.nodes().forEach(W),V.nodeCount()}function F(V,P){return P.edges().reduce((_,R)=>{let M=Number.POSITIVE_INFINITY;if(V.hasNode(R.v)!==V.hasNode(R.w))M=U(P,R);if(M<_[0])return[M,R];return _},[Number.POSITIVE_INFINITY,null])[1]}function H(V,P,W){V.nodes().forEach((_)=>P.node(_).rank+=W)}},{"./util":26,"@dagrejs/graphlib":29}],24:[function(Q,Z,z){var B=Q("./util"),U=B.longestPath,j=Q("./feasible-tree"),G=Q("./network-simplex");Z.exports=F;function F(W){var _=W.graph().ranker;if(_ instanceof Function)return _(W);switch(W.graph().ranker){case"network-simplex":P(W);break;case"tight-tree":V(W);break;case"longest-path":H(W);break;case"none":break;default:P(W)}}var H=U;function V(W){U(W),j(W)}function P(W){G(W)}},{"./feasible-tree":23,"./network-simplex":25,"./util":26}],25:[function(Q,Z,z){var B=Q("./feasible-tree"),U=Q("./util").slack,j=Q("./util").longestPath,G=Q("@dagrejs/graphlib").alg.preorder,F=Q("@dagrejs/graphlib").alg.postorder,H=Q("../util").simplify;Z.exports=V,V.initLowLimValues=R,V.initCutValues=P,V.calcCutValue=_,V.leaveEdge=Y,V.enterEdge=D,V.exchangeEdges=C;function V(O){O=H(O),j(O);var k=B(O);R(k),P(k,O);var v,u;while(v=Y(k))u=D(k,O,v),C(k,O,v,u)}function P(O,k){var v=F(O,O.nodes());v=v.slice(0,v.length-1),v.forEach((u)=>W(O,k,u))}function W(O,k,v){var u=O.node(v),b=u.parent;O.edge(v,b).cutvalue=_(O,k,v)}function _(O,k,v){var u=O.node(v),b=u.parent,f=!0,X=k.edge(v,b),I=0;if(!X)f=!1,X=k.edge(b,v);return I=X.weight,k.nodeEdges(v).forEach((w)=>{var S=w.v===v,T=S?w.w:w.v;if(T!==b){var c=S===f,i=k.edge(w).weight;if(I+=c?i:-i,A(O,v,T)){var E=O.edge(v,T).cutvalue;I+=c?-E:E}}}),I}function R(O,k){if(arguments.length<2)k=O.nodes()[0];M(O,{},1,k)}function M(O,k,v,u,b){var f=v,X=O.node(u);if(k[u]=!0,O.neighbors(u).forEach((I)=>{if(!Object.hasOwn(k,I))v=M(O,k,v,I,u)}),X.low=f,X.lim=v++,b)X.parent=b;else delete X.parent;return v}function Y(O){return O.edges().find((k)=>O.edge(k).cutvalue<0)}function D(O,k,v){var{v:u,w:b}=v;if(!k.hasEdge(u,b))u=v.w,b=v.v;var f=O.node(u),X=O.node(b),I=f,w=!1;if(f.lim>X.lim)I=X,w=!0;var S=k.edges().filter((T)=>{return w===q(O,O.node(T.v),I)&&w!==q(O,O.node(T.w),I)});return S.reduce((T,c)=>{if(U(k,c)<U(k,T))return c;return T})}function C(O,k,v,u){var{v:b,w:f}=v;O.removeEdge(b,f),O.setEdge(u.v,u.w,{}),R(O),P(O,k),y(O,k)}function y(O,k){var v=O.nodes().find((b)=>!k.node(b).parent),u=G(O,v);u=u.slice(1),u.forEach((b)=>{var f=O.node(b).parent,X=k.edge(b,f),I=!1;if(!X)X=k.edge(f,b),I=!0;k.node(b).rank=k.node(f).rank+(I?X.minlen:-X.minlen)})}function A(O,k,v){return O.hasEdge(k,v)}function q(O,k,v){return v.low<=k.lim&&k.lim<=v.lim}},{"../util":27,"./feasible-tree":23,"./util":26,"@dagrejs/graphlib":29}],26:[function(Q,Z,z){let{applyWithChunking:B}=Q("../util");Z.exports={longestPath:U,slack:j};function U(G){var F={};function H(V){var P=G.node(V);if(Object.hasOwn(F,V))return P.rank;F[V]=!0;let W=G.outEdges(V).map((R)=>{if(R==null)return Number.POSITIVE_INFINITY;return H(R.w)-G.edge(R).minlen});var _=B(Math.min,W);if(_===Number.POSITIVE_INFINITY)_=0;return P.rank=_}G.sources().forEach(H)}function j(G,F){return G.node(F.w).rank-G.node(F.v).rank-G.edge(F).minlen}},{"../util":27}],27:[function(Q,Z,z){let B=Q("@dagrejs/graphlib").Graph;Z.exports={addBorderNode:R,addDummyNode:U,applyWithChunking:D,asNonCompoundGraph:G,buildLayerMatrix:P,intersectRect:V,mapValues:b,maxRank:C,normalizeRanks:W,notime:q,partition:y,pick:u,predecessorWeights:H,range:v,removeEmptyRanks:_,simplify:j,successorWeights:F,time:A,uniqueId:k,zipObject:f};function U(X,I,w,S){var T=S;while(X.hasNode(T))T=k(S);return w.dummy=I,X.setNode(T,w),T}function j(X){let I=new B().setGraph(X.graph());return X.nodes().forEach((w)=>I.setNode(w,X.node(w))),X.edges().forEach((w)=>{let S=I.edge(w.v,w.w)||{weight:0,minlen:1},T=X.edge(w);I.setEdge(w.v,w.w,{weight:S.weight+T.weight,minlen:Math.max(S.minlen,T.minlen)})}),I}function G(X){let I=new B({multigraph:X.isMultigraph()}).setGraph(X.graph());return X.nodes().forEach((w)=>{if(!X.children(w).length)I.setNode(w,X.node(w))}),X.edges().forEach((w)=>{I.setEdge(w,X.edge(w))}),I}function F(X){let I=X.nodes().map((w)=>{let S={};return X.outEdges(w).forEach((T)=>{S[T.w]=(S[T.w]||0)+X.edge(T).weight}),S});return f(X.nodes(),I)}function H(X){let I=X.nodes().map((w)=>{let S={};return X.inEdges(w).forEach((T)=>{S[T.v]=(S[T.v]||0)+X.edge(T).weight}),S});return f(X.nodes(),I)}function V(X,I){let{x:w,y:S}=X,T=I.x-w,c=I.y-S,i=X.width/2,E=X.height/2;if(!T&&!c)throw new Error("Not possible to find intersection inside of the rectangle");let d,l;if(Math.abs(c)*i>Math.abs(T)*E){if(c<0)E=-E;d=E*T/c,l=E}else{if(T<0)i=-i;d=i,l=i*c/T}return{x:w+d,y:S+l}}function P(X){let I=v(C(X)+1).map(()=>[]);return X.nodes().forEach((w)=>{let S=X.node(w),T=S.rank;if(T!==void 0)I[T][S.order]=w}),I}function W(X){let I=X.nodes().map((S)=>{let T=X.node(S).rank;if(T===void 0)return Number.MAX_VALUE;return T}),w=D(Math.min,I);X.nodes().forEach((S)=>{let T=X.node(S);if(Object.hasOwn(T,"rank"))T.rank-=w})}function _(X){let I=X.nodes().map((i)=>X.node(i).rank),w=D(Math.min,I),S=[];X.nodes().forEach((i)=>{let E=X.node(i).rank-w;if(!S[E])S[E]=[];S[E].push(i)});let T=0,c=X.graph().nodeRankFactor;Array.from(S).forEach((i,E)=>{if(i===void 0&&E%c!==0)--T;else if(i!==void 0&&T)i.forEach((d)=>X.node(d).rank+=T)})}function R(X,I,w,S){let T={width:0,height:0};if(arguments.length>=4)T.rank=w,T.order=S;return U(X,"border",T,I)}function M(X,I=Y){let w=[];for(let S=0;S<X.length;S+=I){let T=X.slice(S,S+I);w.push(T)}return w}let Y=65535;function D(X,I){if(I.length>Y){let w=M(I);return X.apply(null,w.map((S)=>X.apply(null,S)))}else return X.apply(null,I)}function C(X){let w=X.nodes().map((S)=>{let T=X.node(S).rank;if(T===void 0)return Number.MIN_VALUE;return T});return D(Math.max,w)}function y(X,I){let w={lhs:[],rhs:[]};return X.forEach((S)=>{if(I(S))w.lhs.push(S);else w.rhs.push(S)}),w}function A(X,I){let w=Date.now();try{return I()}finally{console.log(X+" time: "+(Date.now()-w)+"ms")}}function q(X,I){return I()}let O=0;function k(X){var I=++O;return X+(""+I)}function v(X,I,w=1){if(I==null)I=X,X=0;let S=(c)=>c<I;if(w<0)S=(c)=>I<c;let T=[];for(let c=X;S(c);c+=w)T.push(c);return T}function u(X,I){let w={};for(let S of I)if(X[S]!==void 0)w[S]=X[S];return w}function b(X,I){let w=I;if(typeof I==="string")w=(S)=>S[I];return Object.entries(X).reduce((S,[T,c])=>{return S[T]=w(c,T),S},{})}function f(X,I){return X.reduce((w,S,T)=>{return w[S]=I[T],w},{})}},{"@dagrejs/graphlib":29}],28:[function(Q,Z,z){Z.exports="1.1.8"},{}],29:[function(Q,Z,z){var B=Q("./lib");Z.exports={Graph:B.Graph,json:Q("./lib/json"),alg:Q("./lib/alg"),version:B.version}},{"./lib":45,"./lib/alg":36,"./lib/json":46}],30:[function(Q,Z,z){Z.exports=B;function B(U){var j={},G=[],F;function H(V){if(Object.hasOwn(j,V))return;j[V]=!0,F.push(V),U.successors(V).forEach(H),U.predecessors(V).forEach(H)}return U.nodes().forEach(function(V){if(F=[],H(V),F.length)G.push(F)}),G}},{}],31:[function(Q,Z,z){Z.exports=B;function B(F,H,V){if(!Array.isArray(H))H=[H];var P=F.isDirected()?(M)=>F.successors(M):(M)=>F.neighbors(M),W=V==="post"?U:j,_=[],R={};return H.forEach((M)=>{if(!F.hasNode(M))throw new Error("Graph does not have node: "+M);W(M,P,R,_)}),_}function U(F,H,V,P){var W=[[F,!1]];while(W.length>0){var _=W.pop();if(_[1])P.push(_[0]);else if(!Object.hasOwn(V,_[0]))V[_[0]]=!0,W.push([_[0],!0]),G(H(_[0]),(R)=>W.push([R,!1]))}}function j(F,H,V,P){var W=[F];while(W.length>0){var _=W.pop();if(!Object.hasOwn(V,_))V[_]=!0,P.push(_),G(H(_),(R)=>W.push(R))}}function G(F,H){var V=F.length;while(V--)H(F[V],V,F);return F}},{}],32:[function(Q,Z,z){var B=Q("./dijkstra");Z.exports=U;function U(j,G,F){return j.nodes().reduce(function(H,V){return H[V]=B(j,V,G,F),H},{})}},{"./dijkstra":33}],33:[function(Q,Z,z){var B=Q("../data/priority-queue");Z.exports=j;var U=()=>1;function j(F,H,V,P){return G(F,String(H),V||U,P||function(W){return F.outEdges(W)})}function G(F,H,V,P){var W={},_=new B,R,M,Y=function(D){var C=D.v!==R?D.v:D.w,y=W[C],A=V(D),q=M.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+D+" Weight: "+A);if(q<y.distance)y.distance=q,y.predecessor=R,_.decrease(C,q)};F.nodes().forEach(function(D){var C=D===H?0:Number.POSITIVE_INFINITY;W[D]={distance:C},_.add(D,C)});while(_.size()>0){if(R=_.removeMin(),M=W[R],M.distance===Number.POSITIVE_INFINITY)break;P(R).forEach(Y)}return W}},{"../data/priority-queue":43}],34:[function(Q,Z,z){var B=Q("./tarjan");Z.exports=U;function U(j){return B(j).filter(function(G){return G.length>1||G.length===1&&j.hasEdge(G[0],G[0])})}},{"./tarjan":41}],35:[function(Q,Z,z){Z.exports=U;var B=()=>1;function U(G,F,H){return j(G,F||B,H||function(V){return G.outEdges(V)})}function j(G,F,H){var V={},P=G.nodes();return P.forEach(function(W){V[W]={},V[W][W]={distance:0},P.forEach(function(_){if(W!==_)V[W][_]={distance:Number.POSITIVE_INFINITY}}),H(W).forEach(function(_){var R=_.v===W?_.w:_.v,M=F(_);V[W][R]={distance:M,predecessor:W}})}),P.forEach(function(W){var _=V[W];P.forEach(function(R){var M=V[R];P.forEach(function(Y){var D=M[W],C=_[Y],y=M[Y],A=D.distance+C.distance;if(A<y.distance)y.distance=A,y.predecessor=C.predecessor})})}),V}},{}],36:[function(Q,Z,z){Z.exports={components:Q("./components"),dijkstra:Q("./dijkstra"),dijkstraAll:Q("./dijkstra-all"),findCycles:Q("./find-cycles"),floydWarshall:Q("./floyd-warshall"),isAcyclic:Q("./is-acyclic"),postorder:Q("./postorder"),preorder:Q("./preorder"),prim:Q("./prim"),tarjan:Q("./tarjan"),topsort:Q("./topsort")}},{"./components":30,"./dijkstra":33,"./dijkstra-all":32,"./find-cycles":34,"./floyd-warshall":35,"./is-acyclic":37,"./postorder":38,"./preorder":39,"./prim":40,"./tarjan":41,"./topsort":42}],37:[function(Q,Z,z){var B=Q("./topsort");Z.exports=U;function U(j){try{B(j)}catch(G){if(G instanceof B.CycleException)return!1;throw G}return!0}},{"./topsort":42}],38:[function(Q,Z,z){var B=Q("./dfs");Z.exports=U;function U(j,G){return B(j,G,"post")}},{"./dfs":31}],39:[function(Q,Z,z){var B=Q("./dfs");Z.exports=U;function U(j,G){return B(j,G,"pre")}},{"./dfs":31}],40:[function(Q,Z,z){var B=Q("../graph"),U=Q("../data/priority-queue");Z.exports=j;function j(G,F){var H=new B,V={},P=new U,W;function _(M){var Y=M.v===W?M.w:M.v,D=P.priority(Y);if(D!==void 0){var C=F(M);if(C<D)V[Y]=W,P.decrease(Y,C)}}if(G.nodeCount()===0)return H;G.nodes().forEach(function(M){P.add(M,Number.POSITIVE_INFINITY),H.setNode(M)}),P.decrease(G.nodes()[0],0);var R=!1;while(P.size()>0){if(W=P.removeMin(),Object.hasOwn(V,W))H.setEdge(W,V[W]);else if(R)throw new Error("Input graph is not connected: "+G);else R=!0;G.nodeEdges(W).forEach(_)}return H}},{"../data/priority-queue":43,"../graph":44}],41:[function(Q,Z,z){Z.exports=B;function B(U){var j=0,G=[],F={},H=[];function V(P){var W=F[P]={onStack:!0,lowlink:j,index:j++};if(G.push(P),U.successors(P).forEach(function(M){if(!Object.hasOwn(F,M))V(M),W.lowlink=Math.min(W.lowlink,F[M].lowlink);else if(F[M].onStack)W.lowlink=Math.min(W.lowlink,F[M].index)}),W.lowlink===W.index){var _=[],R;do R=G.pop(),F[R].onStack=!1,_.push(R);while(P!==R);H.push(_)}}return U.nodes().forEach(function(P){if(!Object.hasOwn(F,P))V(P)}),H}},{}],42:[function(Q,Z,z){function B(j){var G={},F={},H=[];function V(P){if(Object.hasOwn(F,P))throw new U;if(!Object.hasOwn(G,P))F[P]=!0,G[P]=!0,j.predecessors(P).forEach(V),delete F[P],H.push(P)}if(j.sinks().forEach(V),Object.keys(G).length!==j.nodeCount())throw new U;return H}class U extends Error{constructor(){super(...arguments)}}Z.exports=B,B.CycleException=U},{}],43:[function(Q,Z,z){class B{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(U){return U.key})}has(U){return Object.hasOwn(this._keyIndices,U)}priority(U){var j=this._keyIndices[U];if(j!==void 0)return this._arr[j].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(U,j){var G=this._keyIndices;if(U=String(U),!Object.hasOwn(G,U)){var F=this._arr,H=F.length;return G[U]=H,F.push({key:U,priority:j}),this._decrease(H),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var U=this._arr.pop();return delete this._keyIndices[U.key],this._heapify(0),U.key}decrease(U,j){var G=this._keyIndices[U];if(j>this._arr[G].priority)throw new Error("New priority is greater than current priority. Key: "+U+" Old: "+this._arr[G].priority+" New: "+j);this._arr[G].priority=j,this._decrease(G)}_heapify(U){var j=this._arr,G=2*U,F=G+1,H=U;if(G<j.length){if(H=j[G].priority<j[H].priority?G:H,F<j.length)H=j[F].priority<j[H].priority?F:H;if(H!==U)this._swap(U,H),this._heapify(H)}}_decrease(U){var j=this._arr,G=j[U].priority,F;while(U!==0){if(F=U>>1,j[F].priority<G)break;this._swap(U,F),U=F}}_swap(U,j){var G=this._arr,F=this._keyIndices,H=G[U],V=G[j];G[U]=V,G[j]=H,F[V.key]=U,F[H.key]=j}}Z.exports=B},{}],44:[function(Q,Z,z){var B="\x00",U="\x00",j="\x01";class G{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{return};_defaultEdgeLabelFn=()=>{return};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(_){if(_)this._isDirected=Object.hasOwn(_,"directed")?_.directed:!0,this._isMultigraph=Object.hasOwn(_,"multigraph")?_.multigraph:!1,this._isCompound=Object.hasOwn(_,"compound")?_.compound:!1;if(this._isCompound)this._parent={},this._children={},this._children[U]={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(_){return this._label=_,this}graph(){return this._label}setDefaultNodeLabel(_){if(this._defaultNodeLabelFn=_,typeof _!=="function")this._defaultNodeLabelFn=()=>_;return this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var _=this;return this.nodes().filter((R)=>Object.keys(_._in[R]).length===0)}sinks(){var _=this;return this.nodes().filter((R)=>Object.keys(_._out[R]).length===0)}setNodes(_,R){var M=arguments,Y=this;return _.forEach(function(D){if(M.length>1)Y.setNode(D,R);else Y.setNode(D)}),this}setNode(_,R){if(Object.hasOwn(this._nodes,_)){if(arguments.length>1)this._nodes[_]=R;return this}if(this._nodes[_]=arguments.length>1?R:this._defaultNodeLabelFn(_),this._isCompound)this._parent[_]=U,this._children[_]={},this._children[U][_]=!0;return this._in[_]={},this._preds[_]={},this._out[_]={},this._sucs[_]={},++this._nodeCount,this}node(_){return this._nodes[_]}hasNode(_){return Object.hasOwn(this._nodes,_)}removeNode(_){var R=this;if(Object.hasOwn(this._nodes,_)){var M=(Y)=>R.removeEdge(R._edgeObjs[Y]);if(delete this._nodes[_],this._isCompound)this._removeFromParentsChildList(_),delete this._parent[_],this.children(_).forEach(function(Y){R.setParent(Y)}),delete this._children[_];Object.keys(this._in[_]).forEach(M),delete this._in[_],delete this._preds[_],Object.keys(this._out[_]).forEach(M),delete this._out[_],delete this._sucs[_],--this._nodeCount}return this}setParent(_,R){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(R===void 0)R=U;else{R+="";for(var M=R;M!==void 0;M=this.parent(M))if(M===_)throw new Error("Setting "+R+" as parent of "+_+" would create a cycle");this.setNode(R)}return this.setNode(_),this._removeFromParentsChildList(_),this._parent[_]=R,this._children[R][_]=!0,this}_removeFromParentsChildList(_){delete this._children[this._parent[_]][_]}parent(_){if(this._isCompound){var R=this._parent[_];if(R!==U)return R}}children(_=U){if(this._isCompound){var R=this._children[_];if(R)return Object.keys(R)}else if(_===U)return this.nodes();else if(this.hasNode(_))return[]}predecessors(_){var R=this._preds[_];if(R)return Object.keys(R)}successors(_){var R=this._sucs[_];if(R)return Object.keys(R)}neighbors(_){var R=this.predecessors(_);if(R){let Y=new Set(R);for(var M of this.successors(_))Y.add(M);return Array.from(Y.values())}}isLeaf(_){var R;if(this.isDirected())R=this.successors(_);else R=this.neighbors(_);return R.length===0}filterNodes(_){var R=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});R.setGraph(this.graph());var M=this;Object.entries(this._nodes).forEach(function([C,y]){if(_(C))R.setNode(C,y)}),Object.values(this._edgeObjs).forEach(function(C){if(R.hasNode(C.v)&&R.hasNode(C.w))R.setEdge(C,M.edge(C))});var Y={};function D(C){var y=M.parent(C);if(y===void 0||R.hasNode(y))return Y[C]=y,y;else if(y in Y)return Y[y];else return D(y)}if(this._isCompound)R.nodes().forEach((C)=>R.setParent(C,D(C)));return R}setDefaultEdgeLabel(_){if(this._defaultEdgeLabelFn=_,typeof _!=="function")this._defaultEdgeLabelFn=()=>_;return this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(_,R){var M=this,Y=arguments;return _.reduce(function(D,C){if(Y.length>1)M.setEdge(D,C,R);else M.setEdge(D,C);return C}),this}setEdge(){var _,R,M,Y,D=!1,C=arguments[0];if(typeof C==="object"&&C!==null&&"v"in C){if(_=C.v,R=C.w,M=C.name,arguments.length===2)Y=arguments[1],D=!0}else if(_=C,R=arguments[1],M=arguments[3],arguments.length>2)Y=arguments[2],D=!0;if(_=""+_,R=""+R,M!==void 0)M=""+M;var y=V(this._isDirected,_,R,M);if(Object.hasOwn(this._edgeLabels,y)){if(D)this._edgeLabels[y]=Y;return this}if(M!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(R),this._edgeLabels[y]=D?Y:this._defaultEdgeLabelFn(_,R,M);var A=P(this._isDirected,_,R,M);return _=A.v,R=A.w,Object.freeze(A),this._edgeObjs[y]=A,F(this._preds[R],_),F(this._sucs[_],R),this._in[R][y]=A,this._out[_][y]=A,this._edgeCount++,this}edge(_,R,M){var Y=arguments.length===1?W(this._isDirected,arguments[0]):V(this._isDirected,_,R,M);return this._edgeLabels[Y]}edgeAsObj(){let _=this.edge(...arguments);if(typeof _!=="object")return{label:_};return _}hasEdge(_,R,M){var Y=arguments.length===1?W(this._isDirected,arguments[0]):V(this._isDirected,_,R,M);return Object.hasOwn(this._edgeLabels,Y)}removeEdge(_,R,M){var Y=arguments.length===1?W(this._isDirected,arguments[0]):V(this._isDirected,_,R,M),D=this._edgeObjs[Y];if(D)_=D.v,R=D.w,delete this._edgeLabels[Y],delete this._edgeObjs[Y],H(this._preds[R],_),H(this._sucs[_],R),delete this._in[R][Y],delete this._out[_][Y],this._edgeCount--;return this}inEdges(_,R){var M=this._in[_];if(M){var Y=Object.values(M);if(!R)return Y;return Y.filter((D)=>D.v===R)}}outEdges(_,R){var M=this._out[_];if(M){var Y=Object.values(M);if(!R)return Y;return Y.filter((D)=>D.w===R)}}nodeEdges(_,R){var M=this.inEdges(_,R);if(M)return M.concat(this.outEdges(_,R))}}function F(_,R){if(_[R])_[R]++;else _[R]=1}function H(_,R){if(!--_[R])delete _[R]}function V(_,R,M,Y){var D=""+R,C=""+M;if(!_&&D>C){var y=D;D=C,C=y}return D+j+C+j+(Y===void 0?B:Y)}function P(_,R,M,Y){var D=""+R,C=""+M;if(!_&&D>C){var y=D;D=C,C=y}var A={v:D,w:C};if(Y)A.name=Y;return A}function W(_,R){return V(_,R.v,R.w,R.name)}Z.exports=G},{}],45:[function(Q,Z,z){Z.exports={Graph:Q("./graph"),version:Q("./version")}},{"./graph":44,"./version":47}],46:[function(Q,Z,z){var B=Q("./graph");Z.exports={write:U,read:F};function U(H){var V={options:{directed:H.isDirected(),multigraph:H.isMultigraph(),compound:H.isCompound()},nodes:j(H),edges:G(H)};if(H.graph()!==void 0)V.value=structuredClone(H.graph());return V}function j(H){return H.nodes().map(function(V){var P=H.node(V),W=H.parent(V),_={v:V};if(P!==void 0)_.value=P;if(W!==void 0)_.parent=W;return _})}function G(H){return H.edges().map(function(V){var P=H.edge(V),W={v:V.v,w:V.w};if(V.name!==void 0)W.name=V.name;if(P!==void 0)W.value=P;return W})}function F(H){var V=new B(H.options).setGraph(H.value);return H.nodes.forEach(function(P){if(V.setNode(P.v,P.value),P.parent)V.setParent(P.v,P.parent)}),H.edges.forEach(function(P){V.setEdge({v:P.v,w:P.w,name:P.name},P.value)}),V}},{"./graph":44}],47:[function(Q,Z,z){Z.exports="2.2.4"},{}]},{},[1])(1)})});var a4={bg:"#FFFFFF",fg:"#27272A"},R4={text:100,textSec:60,textMuted:40,textFaint:25,line:30,arrow:50,nodeFill:3,nodeStroke:20,groupHeader:5,innerStroke:12,keyBadge:10},F6={"zinc-dark":{bg:"#18181B",fg:"#FAFAFA"},"tokyo-night":{bg:"#1a1b26",fg:"#a9b1d6",line:"#3d59a1",accent:"#7aa2f7",muted:"#565f89"},"tokyo-night-storm":{bg:"#24283b",fg:"#a9b1d6",line:"#3d59a1",accent:"#7aa2f7",muted:"#565f89"},"tokyo-night-light":{bg:"#d5d6db",fg:"#343b58",line:"#34548a",accent:"#34548a",muted:"#9699a3"},"catppuccin-mocha":{bg:"#1e1e2e",fg:"#cdd6f4",line:"#585b70",accent:"#cba6f7",muted:"#6c7086"},"catppuccin-latte":{bg:"#eff1f5",fg:"#4c4f69",line:"#9ca0b0",accent:"#8839ef",muted:"#9ca0b0"},nord:{bg:"#2e3440",fg:"#d8dee9",line:"#4c566a",accent:"#88c0d0",muted:"#616e88"},"nord-light":{bg:"#eceff4",fg:"#2e3440",line:"#aab1c0",accent:"#5e81ac",muted:"#7b88a1"},dracula:{bg:"#282a36",fg:"#f8f8f2",line:"#6272a4",accent:"#bd93f9",muted:"#6272a4"},"github-light":{bg:"#ffffff",fg:"#1f2328",line:"#d1d9e0",accent:"#0969da",muted:"#59636e"},"github-dark":{bg:"#0d1117",fg:"#e6edf3",line:"#3d444d",accent:"#4493f8",muted:"#9198a1"},"solarized-light":{bg:"#fdf6e3",fg:"#657b83",line:"#93a1a1",accent:"#268bd2",muted:"#93a1a1"},"solarized-dark":{bg:"#002b36",fg:"#839496",line:"#586e75",accent:"#268bd2",muted:"#586e75"},"one-dark":{bg:"#282c34",fg:"#abb2bf",line:"#4b5263",accent:"#c678dd",muted:"#5c6370"}};function C4($,J){let K=[`@import url('https://fonts.googleapis.com/css2?family=${encodeURIComponent($)}:wght@400;500;600;700&amp;display=swap');`,...J?["@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&amp;display=swap');"]:[]],Q=`
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) ${R4.textSec}%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) ${R4.textMuted}%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) ${R4.textFaint}%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) ${R4.line}%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) ${R4.arrow}%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) ${R4.nodeFill}%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) ${R4.nodeStroke}%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) ${R4.groupHeader}%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) ${R4.innerStroke}%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) ${R4.keyBadge}%, var(--bg));`;return["<style>",`  ${K.join(`
  `)}`,`  text { font-family: '${$}', system-ui, sans-serif; }`,...J?["  .mono { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', ui-monospace, monospace; }"]:[],`  svg {${Q}`,"  }","</style>"].join(`
`)}function T4($,J,K,Q){let Z=[`--bg:${K.bg}`,`--fg:${K.fg}`,K.line?`--line:${K.line}`:"",K.accent?`--accent:${K.accent}`:"",K.muted?`--muted:${K.muted}`:"",K.surface?`--surface:${K.surface}`:"",K.border?`--border:${K.border}`:""].filter(Boolean).join(";");return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${$} ${J}" width="${$}" height="${J}" style="${Z}${Q?"":";background:var(--bg)"}">`}function p4($){let J=$.split(`
`).map((Q)=>Q.trim()).filter((Q)=>Q.length>0&&!Q.startsWith("%%"));if(J.length===0)throw new Error("Empty mermaid diagram");let K=J[0];if(/^stateDiagram(-v2)?\s*$/i.test(K))return v7(J);return y7(J)}function y7($){let J=$[0].match(/^(?:graph|flowchart)\s+(TD|TB|LR|BT|RL)\s*$/i);if(!J)throw new Error(`Invalid mermaid header: "${$[0]}". Expected "graph TD", "flowchart LR", "stateDiagram-v2", etc.`);let Q={direction:J[1].toUpperCase(),nodes:new Map,edges:[],subgraphs:[],classDefs:new Map,classAssignments:new Map,nodeStyles:new Map},Z=[];for(let z=1;z<$.length;z++){let B=$[z],U=B.match(/^classDef\s+(\w+)\s+(.+)$/);if(U){let V=U[1],P=U[2],W=b6(P);Q.classDefs.set(V,W);continue}let j=B.match(/^class\s+([\w,-]+)\s+(\w+)$/);if(j){let V=j[1].split(",").map((W)=>W.trim()),P=j[2];for(let W of V)Q.classAssignments.set(W,P);continue}let G=B.match(/^style\s+([\w,-]+)\s+(.+)$/);if(G){let V=G[1].split(",").map((W)=>W.trim()),P=b6(G[2]);for(let W of V)Q.nodeStyles.set(W,{...Q.nodeStyles.get(W),...P});continue}let F=B.match(/^direction\s+(TD|TB|LR|BT|RL)\s*$/i);if(F&&Z.length>0){Z[Z.length-1].direction=F[1].toUpperCase();continue}let H=B.match(/^subgraph\s+(.+)$/);if(H){let V=H[1].trim(),P=V.match(/^([\w-]+)\s*\[(.+)\]$/),W,_;if(P)W=P[1],_=P[2];else _=V,W=V.replace(/\s+/g,"_").replace(/[^\w]/g,"");let R={id:W,label:_,nodeIds:[],children:[]};Z.push(R);continue}if(B==="end"){let V=Z.pop();if(V)if(Z.length>0)Z[Z.length-1].children.push(V);else Q.subgraphs.push(V);continue}p7(B,Q,Z)}return Q}function v7($){let J={direction:"TD",nodes:new Map,edges:[],subgraphs:[],classDefs:new Map,classAssignments:new Map,nodeStyles:new Map},K=[],Q=0,Z=0;for(let z=1;z<$.length;z++){let B=$[z],U=B.match(/^direction\s+(TD|TB|LR|BT|RL)\s*$/i);if(U){if(K.length>0)K[K.length-1].direction=U[1].toUpperCase();else J.direction=U[1].toUpperCase();continue}let j=B.match(/^state\s+(?:"([^"]+)"\s+as\s+)?(\w+)\s*\{$/);if(j){let V=j[1]??j[2],W={id:j[2],label:V,nodeIds:[],children:[]};K.push(W);continue}if(B==="}"){let V=K.pop();if(V)if(K.length>0)K[K.length-1].children.push(V);else J.subgraphs.push(V);continue}let G=B.match(/^state\s+"([^"]+)"\s+as\s+(\w+)\s*$/);if(G){let V=G[1],P=G[2];c4(J,K,{id:P,label:V,shape:"rounded"});continue}let F=B.match(/^(\[\*\]|[\w-]+)\s*(-->)\s*(\[\*\]|[\w-]+)(?:\s*:\s*(.+))?$/);if(F){let V=F[1],P=F[3],W=F[4]?.trim()||void 0;if(V==="[*]")Q++,V=`_start${Q>1?Q:""}`,c4(J,K,{id:V,label:"",shape:"state-start"});else f6(J,K,V);if(P==="[*]")Z++,P=`_end${Z>1?Z:""}`,c4(J,K,{id:P,label:"",shape:"state-end"});else f6(J,K,P);J.edges.push({source:V,target:P,label:W,style:"solid",hasArrowStart:!1,hasArrowEnd:!0});continue}let H=B.match(/^([\w-]+)\s*:\s*(.+)$/);if(H){let V=H[1],P=H[2].trim();c4(J,K,{id:V,label:P,shape:"rounded"});continue}}return J}function c4($,J,K){if(!$.nodes.has(K.id))$.nodes.set(K.id,K);if(J.length>0){let Z=J[J.length-1];if(!Z.nodeIds.includes(K.id))Z.nodeIds.push(K.id)}}function f6($,J,K){if(!$.nodes.has(K))c4($,J,{id:K,label:K,shape:"rounded"});else if(J.length>0){let Q=J[J.length-1];if(!Q.nodeIds.includes(K))Q.nodeIds.push(K)}}function b6($){let J={};for(let K of $.split(",")){let Q=K.indexOf(":");if(Q>0){let Z=K.slice(0,Q).trim(),z=K.slice(Q+1).trim();if(Z&&z)J[Z]=z}}return J}var u7=/^(<)?(-->|-.->|==>|---|-\.-|===)(?:\|([^|]*)\|)?/,m7=[{regex:/^([\w-]+)\(\(\((.+?)\)\)\)/,shape:"doublecircle"},{regex:/^([\w-]+)\(\[(.+?)\]\)/,shape:"stadium"},{regex:/^([\w-]+)\(\((.+?)\)\)/,shape:"circle"},{regex:/^([\w-]+)\[\[(.+?)\]\]/,shape:"subroutine"},{regex:/^([\w-]+)\[\((.+?)\)\]/,shape:"cylinder"},{regex:/^([\w-]+)\[\/(.+?)\\\]/,shape:"trapezoid"},{regex:/^([\w-]+)\[\\(.+?)\/\]/,shape:"trapezoid-alt"},{regex:/^([\w-]+)>(.+?)\]/,shape:"asymmetric"},{regex:/^([\w-]+)\{\{(.+?)\}\}/,shape:"hexagon"},{regex:/^([\w-]+)\[(.+?)\]/,shape:"rectangle"},{regex:/^([\w-]+)\((.+?)\)/,shape:"rounded"},{regex:/^([\w-]+)\{(.+?)\}/,shape:"diamond"}],h7=/^([\w-]+)/,c7=/^:::([\w][\w-]*)/;function p7($,J,K){let Q=$.trim(),Z=x6(Q,J,K);if(!Z||Z.ids.length===0)return;Q=Z.remaining.trim();let z=Z.ids;while(Q.length>0){let B=Q.match(u7);if(!B)break;let U=Boolean(B[1]),j=B[2],G=B[3]?.trim()||void 0;Q=Q.slice(B[0].length).trim();let F=l7(j),H=j.endsWith(">"),V=x6(Q,J,K);if(!V||V.ids.length===0)break;Q=V.remaining.trim();for(let P of z)for(let W of V.ids)J.edges.push({source:P,target:W,label:G,style:F,hasArrowStart:U,hasArrowEnd:H});z=V.ids}}function x6($,J,K){let Q=y6($,J,K);if(!Q)return null;let Z=[Q.id],z=Q.remaining.trim();while(z.startsWith("&")){z=z.slice(1).trim();let B=y6(z,J,K);if(!B)break;Z.push(B.id),z=B.remaining.trim()}return{ids:Z,remaining:z}}function y6($,J,K){let Q=null,Z=$;for(let{regex:B,shape:U}of m7){let j=$.match(B);if(j){Q=j[1];let G=j[2];v6(J,K,{id:Q,label:G,shape:U}),Z=$.slice(j[0].length);break}}if(Q===null){let B=$.match(h7);if(B){if(Q=B[1],!J.nodes.has(Q))v6(J,K,{id:Q,label:Q,shape:"rectangle"});else u6(K,Q);Z=$.slice(B[0].length)}}if(Q===null)return null;let z=Z.match(c7);if(z)J.classAssignments.set(Q,z[1]),Z=Z.slice(z[0].length);return{id:Q,remaining:Z}}function v6($,J,K){if(!$.nodes.has(K.id))$.nodes.set(K.id,K);u6(J,K.id)}function u6($,J){if($.length>0){let K=$[$.length-1];if(!K.nodeIds.includes(J))K.nodeIds.push(J)}}function l7($){if($==="-.->")return"dotted";if($==="-.-")return"dotted";if($==="==>")return"thick";if($==="===")return"thick";return"solid"}var U4={x:1,y:0},Q4={x:1,y:2},V4={x:0,y:1},K4={x:2,y:1},Y4={x:2,y:0},M4={x:0,y:0},O4={x:2,y:2},A4={x:0,y:2},t4={x:1,y:1};function P6($,J){return $.x===J.x&&$.y===J.y}function m6($,J){return $.x===J.x&&$.y===J.y}function l4($,J){return{x:$.x+J.x,y:$.y+J.y}}function q4($){return`${$.x},${$.y}`}var h6={name:"",styles:{}};function _4($,J){let K=[];for(let Q=0;Q<=$;Q++){let Z=[];for(let z=0;z<=J;z++)Z.push(" ");K.push(Z)}return K}function w4($){let[J,K]=d4($);return _4(J,K)}function d4($){return[$.length-1,($[0]?.length??1)-1]}function L4($,J,K){let[Q,Z]=d4($),z=Math.max(J,Q),B=Math.max(K,Z),U=_4(z,B);for(let j=0;j<U.length;j++)for(let G=0;G<U[0].length;G++)if(j<$.length&&G<$[0].length)U[j][G]=$[j][G];return $.length=0,$.push(...U),$}var d7=new Set(["─","│","┌","┐","└","┘","├","┤","┬","┴","┼","╴","╵","╶","╷"]);function c6($){return d7.has($)}var n7={"─":{"│":"┼","┌":"┬","┐":"┬","└":"┴","┘":"┴","├":"┼","┤":"┼","┬":"┬","┴":"┴"},"│":{"─":"┼","┌":"├","┐":"┤","└":"├","┘":"┤","├":"├","┤":"┤","┬":"┼","┴":"┼"},"┌":{"─":"┬","│":"├","┐":"┬","└":"├","┘":"┼","├":"├","┤":"┼","┬":"┬","┴":"┼"},"┐":{"─":"┬","│":"┤","┌":"┬","└":"┼","┘":"┤","├":"┼","┤":"┤","┬":"┬","┴":"┼"},"└":{"─":"┴","│":"├","┌":"├","┐":"┼","┘":"┴","├":"├","┤":"┼","┬":"┼","┴":"┴"},"┘":{"─":"┴","│":"┤","┌":"┼","┐":"┤","└":"┴","├":"┼","┤":"┤","┬":"┼","┴":"┴"},"├":{"─":"┼","│":"├","┌":"├","┐":"┼","└":"├","┘":"┼","┤":"┼","┬":"┼","┴":"┼"},"┤":{"─":"┼","│":"┤","┌":"┼","┐":"┤","└":"┼","┘":"┤","├":"┼","┬":"┼","┴":"┼"},"┬":{"─":"┬","│":"┼","┌":"┬","┐":"┬","└":"┼","┘":"┼","├":"┼","┤":"┼","┴":"┼"},"┴":{"─":"┴","│":"┼","┌":"┼","┐":"┼","└":"┴","┘":"┴","├":"┼","┤":"┼","┬":"┼"}};function g7($,J){return n7[$]?.[J]??$}function X4($,J,K,...Q){let[Z,z]=d4($);for(let U of Q){let[j,G]=d4(U);Z=Math.max(Z,j+J.x),z=Math.max(z,G+J.y)}let B=_4(Z,z);for(let U=0;U<=Z;U++)for(let j=0;j<=z;j++)if(U<$.length&&j<$[0].length)B[U][j]=$[U][j];for(let U of Q)for(let j=0;j<U.length;j++)for(let G=0;G<U[0].length;G++){let F=U[j][G];if(F!==" "){let H=j+J.x,V=G+J.y,P=B[H][V];if(!K&&c6(F)&&c6(P))B[H][V]=g7(P,F);else B[H][V]=F}}return B}function E4($){let[J,K]=d4($),Q=[];for(let Z=0;Z<=K;Z++){let z="";for(let B=0;B<=J;B++)z+=$[B][Z];Q.push(z)}return Q.join(`
`)}var o7={"▲":"▼","▼":"▲","◤":"◣","◣":"◤","◥":"◢","◢":"◥","^":"v",v:"^","┌":"└","└":"┌","┐":"┘","┘":"┐","┬":"┴","┴":"┬","╵":"╷","╷":"╵"};function p6($){for(let J of $)J.reverse();for(let J of $)for(let K=0;K<J.length;K++){let Q=o7[J[K]];if(Q)J[K]=Q}return $}function l6($,J,K){L4($,J.x+K.length,J.y);for(let Q=0;Q<K.length;Q++)$[J.x+Q][J.y]=K[Q]}function d6($,J,K){let Q=0,Z=0;for(let z of J.values())Q+=z;for(let z of K.values())Z+=z;L4($,Q-1,Z-1)}function n6($,J){let K=new Map,Q=0;for(let[U,j]of $.nodes){let G={name:U,displayLabel:j.label,index:Q,gridCoord:null,drawingCoord:null,drawing:null,drawn:!1,styleClassName:"",styleClass:h6};K.set(U,G),Q++}let Z=[...K.values()],z=[];for(let U of $.edges){let j=K.get(U.source),G=K.get(U.target);if(!j||!G)continue;z.push({from:j,to:G,text:U.label??"",path:[],labelLine:[],startDir:{x:0,y:0},endDir:{x:0,y:0}})}let B=[];for(let U of $.subgraphs)g6(U,null,K,B);s7($.subgraphs,B,K,$);for(let[U,j]of $.classAssignments){let G=K.get(U),F=$.classDefs.get(j);if(G&&F)G.styleClassName=j,G.styleClass={name:j,styles:F}}return{nodes:Z,edges:z,canvas:_4(0,0),grid:new Map,columnWidth:new Map,rowHeight:new Map,subgraphs:B,config:J,offsetX:0,offsetY:0}}function g6($,J,K,Q){let Z={name:$.label,nodes:[],parent:J,children:[],minX:0,minY:0,maxX:0,maxY:0};for(let z of $.nodeIds){let B=K.get(z);if(B)Z.nodes.push(B)}Q.push(Z);for(let z of $.children){let B=g6(z,Z,K,Q);Z.children.push(B);for(let U of B.nodes)if(!Z.nodes.includes(U))Z.nodes.push(U)}return Z}function s7($,J,K,Q){let Z=new Map;a7($,J,Z);let z=new Map;function B(U){let j=Z.get(U);if(!j)return;for(let G of U.children)B(G);for(let G of U.nodeIds)if(!z.has(G))z.set(G,j)}for(let U of $)B(U);for(let U of J)U.nodes=U.nodes.filter((j)=>{let G;for(let[H,V]of K)if(V===j){G=H;break}if(!G)return!1;let F=z.get(G);if(!F)return!0;return i7(U,F)})}function i7($,J){let K=J;while(K!==null){if(K===$)return!0;K=K.parent}return!1}function a7($,J,K){let Q=[];function Z(z){for(let B of z)Q.push(B),Z(B.children)}Z($);for(let z=0;z<Q.length&&z<J.length;z++)K.set(Q[z],J[z])}class o6{items=[];get length(){return this.items.length}push($){this.items.push($),this.bubbleUp(this.items.length-1)}pop(){if(this.items.length===0)return;let $=this.items[0],J=this.items.pop();if(this.items.length>0)this.items[0]=J,this.sinkDown(0);return $}bubbleUp($){while($>0){let J=$-1>>1;if(this.items[$].priority<this.items[J].priority)[this.items[$],this.items[J]]=[this.items[J],this.items[$]],$=J;else break}}sinkDown($){let J=this.items.length;while(!0){let K=$,Q=2*$+1,Z=2*$+2;if(Q<J&&this.items[Q].priority<this.items[K].priority)K=Q;if(Z<J&&this.items[Z].priority<this.items[K].priority)K=Z;if(K!==$)[this.items[$],this.items[K]]=[this.items[K],this.items[$]],$=K;else break}}}function t7($,J){let K=Math.abs($.x-J.x),Q=Math.abs($.y-J.y);if(K===0||Q===0)return K+Q;return K+Q+1}var r7=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];function e7($,J){if(J.x<0||J.y<0)return!1;return!$.has(q4(J))}function H6($,J,K){let Q=new o6;Q.push({coord:J,priority:0});let Z=new Map;Z.set(q4(J),0);let z=new Map;z.set(q4(J),null);while(Q.length>0){let B=Q.pop().coord;if(P6(B,K)){let j=[],G=B;while(G!==null)j.unshift(G),G=z.get(q4(G))??null;return j}let U=Z.get(q4(B));for(let j of r7){let G={x:B.x+j.x,y:B.y+j.y};if(!e7($,G)&&!P6(G,K))continue;let F=U+1,H=q4(G),V=Z.get(H);if(V===void 0||F<V){Z.set(H,F);let P=F+t7(G,K);Q.push({coord:G,priority:P}),z.set(H,B)}}}return null}function W6($){if($.length<=2)return $;let J=new Set,K=$[0],Q=$[1];for(let Z=2;Z<$.length;Z++){let z=$[Z],B=Q.x-K.x,U=Q.y-K.y,j=z.x-Q.x,G=z.y-Q.y;if(B===j&&U===G)J.add(Z-1);K=Q,Q=z}return $.filter((Z,z)=>!J.has(z))}function r4($){if($===U4)return Q4;if($===Q4)return U4;if($===V4)return K4;if($===K4)return V4;if($===Y4)return A4;if($===M4)return O4;if($===O4)return M4;if($===A4)return Y4;return t4}function s($,J){return $.x===J.x&&$.y===J.y}function N4($,J){if($.x===J.x)return $.y<J.y?Q4:U4;else if($.y===J.y)return $.x<J.x?K4:V4;else if($.x<J.x)return $.y<J.y?O4:Y4;else return $.y<J.y?A4:M4}function $9($){if($==="LR")return[K4,Q4,Q4,K4];return[Q4,K4,K4,Q4]}function J9($,J){if($.from===$.to)return $9(J);let K=N4($.from.gridCoord,$.to.gridCoord),Q,Z,z,B,U=J==="LR"?s(K,V4)||s(K,M4)||s(K,A4):s(K,U4)||s(K,M4)||s(K,Y4);if(s(K,O4))if(J==="LR")Q=Q4,Z=V4,z=K4,B=U4;else Q=K4,Z=U4,z=Q4,B=V4;else if(s(K,Y4))if(J==="LR")Q=U4,Z=V4,z=K4,B=Q4;else Q=K4,Z=Q4,z=U4,B=V4;else if(s(K,A4))if(J==="LR")Q=Q4,Z=Q4,z=V4,B=U4;else Q=V4,Z=U4,z=Q4,B=K4;else if(s(K,M4))if(J==="LR")Q=Q4,Z=Q4,z=V4,B=Q4;else Q=K4,Z=K4,z=U4,B=K4;else if(U)if(J==="LR"&&s(K,V4))Q=Q4,Z=Q4,z=V4,B=K4;else if(J==="TD"&&s(K,U4))Q=K4,Z=K4,z=U4,B=Q4;else Q=K,Z=r4(K),z=K,B=r4(K);else Q=K,Z=r4(K),z=K,B=r4(K);return[Q,Z,z,B]}function s6($,J){let[K,Q,Z,z]=J9(J,$.config.graphDirection),B=l4(J.from.gridCoord,K),U=l4(J.to.gridCoord,Q),j=H6($.grid,B,U);if(j===null){J.startDir=Z,J.endDir=z,J.path=[];return}j=W6(j);let G=l4(J.from.gridCoord,Z),F=l4(J.to.gridCoord,z),H=H6($.grid,G,F);if(H===null){J.startDir=K,J.endDir=Q,J.path=j;return}if(H=W6(H),j.length<=H.length)J.startDir=K,J.endDir=Q,J.path=j;else J.startDir=Z,J.endDir=z,J.path=H}function i6($,J){if(J.text.length===0)return;let K=J.text.length,Q=J.path[0],Z=[Q,J.path[1]],z=0;for(let F=1;F<J.path.length;F++){let H=J.path[F],V=[Q,H],P=Q9($,V);if(P>=K){Z=V;break}else if(P>z)z=P,Z=V;Q=H}let B=Math.min(Z[0].x,Z[1].x),U=Math.max(Z[0].x,Z[1].x),j=B+Math.floor((U-B)/2),G=$.columnWidth.get(j)??0;$.columnWidth.set(j,Math.max(G,K+2)),J.labelLine=[Z[0],Z[1]]}function Q9($,J){let K=0,Q=Math.min(J[0].x,J[1].x),Z=Math.max(J[0].x,J[1].x);for(let z=Q;z<=Z;z++)K+=$.columnWidth.get(z)??0;return K}function a6($,J){let K=$.gridCoord,Q=J.config.useAscii,Z=0;for(let V=0;V<2;V++)Z+=J.columnWidth.get(K.x+V)??0;let z=0;for(let V=0;V<2;V++)z+=J.rowHeight.get(K.y+V)??0;let B={x:0,y:0},U={x:Z,y:z},j=_4(Math.max(B.x,U.x),Math.max(B.y,U.y));if(!Q){for(let V=B.x+1;V<U.x;V++)j[V][B.y]="─";for(let V=B.x+1;V<U.x;V++)j[V][U.y]="─";for(let V=B.y+1;V<U.y;V++)j[B.x][V]="│";for(let V=B.y+1;V<U.y;V++)j[U.x][V]="│";j[B.x][B.y]="┌",j[U.x][B.y]="┐",j[B.x][U.y]="└",j[U.x][U.y]="┘"}else{for(let V=B.x+1;V<U.x;V++)j[V][B.y]="-";for(let V=B.x+1;V<U.x;V++)j[V][U.y]="-";for(let V=B.y+1;V<U.y;V++)j[B.x][V]="|";for(let V=B.y+1;V<U.y;V++)j[U.x][V]="|";j[B.x][B.y]="+",j[U.x][B.y]="+",j[B.x][U.y]="+",j[U.x][U.y]="+"}let G=$.displayLabel,F=B.y+Math.floor(z/2),H=B.x+Math.floor(Z/2)-Math.ceil(G.length/2)+1;for(let V=0;V<G.length;V++)j[H+V][F]=G[V];return j}function e4($,J,K=1){let Q=0;for(let D of $)for(let C of D)Q=Math.max(Q,C.length);let z=Q+2*K+2,B=0;for(let D of $)B+=Math.max(D.length,1);let U=$.length-1,j=B+U+2,G=J?"-":"─",F=J?"|":"│",H=J?"+":"┌",V=J?"+":"┐",P=J?"+":"└",W=J?"+":"┘",_=J?"+":"├",R=J?"+":"┤",M=_4(z-1,j-1);M[0][0]=H;for(let D=1;D<z-1;D++)M[D][0]=G;M[z-1][0]=V,M[0][j-1]=P;for(let D=1;D<z-1;D++)M[D][j-1]=G;M[z-1][j-1]=W;for(let D=1;D<j-1;D++)M[0][D]=F,M[z-1][D]=F;let Y=1;for(let D=0;D<$.length;D++){let C=$[D],y=C.length>0?C:[""];for(let A of y){let q=1+K;for(let O=0;O<A.length;O++)M[q+O][Y]=A[O];Y++}if(D<$.length-1){M[0][Y]=_;for(let A=1;A<z-1;A++)M[A][Y]=G;M[z-1][Y]=R,Y++}}return M}function K9($,J,K,Q,Z,z){let B=N4(J,K),U=[],j=z?"-":"─",G=z?"|":"│",F=z?"\\":"╲",H=z?"/":"╱";if(s(B,U4))for(let V=J.y-Q;V>=K.y-Z;V--)U.push({x:J.x,y:V}),$[J.x][V]=G;else if(s(B,Q4))for(let V=J.y+Q;V<=K.y+Z;V++)U.push({x:J.x,y:V}),$[J.x][V]=G;else if(s(B,V4))for(let V=J.x-Q;V>=K.x-Z;V--)U.push({x:V,y:J.y}),$[V][J.y]=j;else if(s(B,K4))for(let V=J.x+Q;V<=K.x+Z;V++)U.push({x:V,y:J.y}),$[V][J.y]=j;else if(s(B,M4))for(let V=J.x,P=J.y-Q;V>=K.x-Z&&P>=K.y-Z;V--,P--)U.push({x:V,y:P}),$[V][P]=F;else if(s(B,Y4))for(let V=J.x,P=J.y-Q;V<=K.x+Z&&P>=K.y-Z;V++,P--)U.push({x:V,y:P}),$[V][P]=H;else if(s(B,A4))for(let V=J.x,P=J.y+Q;V>=K.x-Z&&P<=K.y+Z;V--,P++)U.push({x:V,y:P}),$[V][P]=H;else if(s(B,O4))for(let V=J.x,P=J.y+Q;V<=K.x+Z&&P<=K.y+Z;V++,P++)U.push({x:V,y:P}),$[V][P]=F;return U}function Z9($,J){if(J.path.length===0){let G=w4($.canvas);return[G,G,G,G,G]}let K=j9($,J),[Q,Z,z]=U9($,J.path),B=V9($,J.path,Z[0]),U=z9($,Z[Z.length-1],z[z.length-1]),j=B9($,J.path);return[Q,B,U,j,K]}function U9($,J){let K=w4($.canvas),Q=J[0],Z=[],z=[];for(let B=1;B<J.length;B++){let U=J[B],j=y4($,Q),G=y4($,U);if(m6(j,G)){Q=U;continue}let F=N4(Q,U),H=K9(K,j,G,1,-1,$.config.useAscii);if(H.length===0)H.push(j);Z.push(H),z.push(F),Q=U}return[K,Z,z]}function V9($,J,K){let Q=w4($.canvas);if($.config.useAscii)return Q;let Z=K[0],z=N4(J[0],J[1]);if(s(z,U4))Q[Z.x][Z.y+1]="┴";else if(s(z,Q4))Q[Z.x][Z.y-1]="┬";else if(s(z,V4))Q[Z.x+1][Z.y]="┤";else if(s(z,K4))Q[Z.x-1][Z.y]="├";return Q}function z9($,J,K){let Q=w4($.canvas);if(J.length===0)return Q;let Z=J[0],z=J[J.length-1],B=N4(Z,z);if(J.length===1||s(B,t4))B=K;let U;if(!$.config.useAscii)if(s(B,U4))U="▲";else if(s(B,Q4))U="▼";else if(s(B,V4))U="◄";else if(s(B,K4))U="►";else if(s(B,Y4))U="◥";else if(s(B,M4))U="◤";else if(s(B,O4))U="◢";else if(s(B,A4))U="◣";else if(s(K,U4))U="▲";else if(s(K,Q4))U="▼";else if(s(K,V4))U="◄";else if(s(K,K4))U="►";else if(s(K,Y4))U="◥";else if(s(K,M4))U="◤";else if(s(K,O4))U="◢";else if(s(K,A4))U="◣";else U="●";else if(s(B,U4))U="^";else if(s(B,Q4))U="v";else if(s(B,V4))U="<";else if(s(B,K4))U=">";else if(s(K,U4))U="^";else if(s(K,Q4))U="v";else if(s(K,V4))U="<";else if(s(K,K4))U=">";else U="*";return Q[z.x][z.y]=U,Q}function B9($,J){let K=w4($.canvas);for(let Q=1;Q<J.length-1;Q++){let Z=J[Q],z=y4($,Z),B=N4(J[Q-1],Z),U=N4(Z,J[Q+1]),j;if(!$.config.useAscii)if(s(B,K4)&&s(U,Q4)||s(B,U4)&&s(U,V4))j="┐";else if(s(B,K4)&&s(U,U4)||s(B,Q4)&&s(U,V4))j="┘";else if(s(B,V4)&&s(U,Q4)||s(B,U4)&&s(U,K4))j="┌";else if(s(B,V4)&&s(U,U4)||s(B,Q4)&&s(U,K4))j="└";else j="+";else j="+";K[z.x][z.y]=j}return K}function j9($,J){let K=w4($.canvas);if(J.text.length===0)return K;let Q=r6($,J.labelLine);return G9(K,Q,J.text),K}function G9($,J,K){if(J.length<2)return;let Q=Math.min(J[0].x,J[1].x),Z=Math.max(J[0].x,J[1].x),z=Math.min(J[0].y,J[1].y),B=Math.max(J[0].y,J[1].y),U=Q+Math.floor((Z-Q)/2),j=z+Math.floor((B-z)/2),G=U-Math.floor(K.length/2);l6($,{x:G,y:j},K)}function _9($,J){let K=$.maxX-$.minX,Q=$.maxY-$.minY;if(K<=0||Q<=0)return _4(0,0);let Z={x:0,y:0},z={x:K,y:Q},B=_4(K,Q);if(!J.config.useAscii){for(let U=Z.x+1;U<z.x;U++)B[U][Z.y]="─";for(let U=Z.x+1;U<z.x;U++)B[U][z.y]="─";for(let U=Z.y+1;U<z.y;U++)B[Z.x][U]="│";for(let U=Z.y+1;U<z.y;U++)B[z.x][U]="│";B[Z.x][Z.y]="┌",B[z.x][Z.y]="┐",B[Z.x][z.y]="└",B[z.x][z.y]="┘"}else{for(let U=Z.x+1;U<z.x;U++)B[U][Z.y]="-";for(let U=Z.x+1;U<z.x;U++)B[U][z.y]="-";for(let U=Z.y+1;U<z.y;U++)B[Z.x][U]="|";for(let U=Z.y+1;U<z.y;U++)B[z.x][U]="|";B[Z.x][Z.y]="+",B[z.x][Z.y]="+",B[Z.x][z.y]="+",B[z.x][z.y]="+"}return B}function F9($,J){let K=$.maxX-$.minX,Q=$.maxY-$.minY;if(K<=0||Q<=0)return[_4(0,0),{x:0,y:0}];let Z=_4(K,Q),z=1,B=Math.floor(K/2)-Math.floor($.name.length/2);if(B<1)B=1;for(let U=0;U<$.name.length;U++)if(B+U<K)Z[B+U][z]=$.name[U];return[Z,{x:$.minX,y:$.minY}]}function P9($){function J(Q){return Q.parent===null?0:1+J(Q.parent)}let K=[...$];return K.sort((Q,Z)=>J(Q)-J(Z)),K}function t6($){let J=$.config.useAscii,K=P9($.subgraphs);for(let G of K){let F=_9(G,$),H={x:G.minX,y:G.minY};$.canvas=X4($.canvas,H,J,F)}for(let G of $.nodes)if(!G.drawn&&G.drawingCoord&&G.drawing)$.canvas=X4($.canvas,G.drawingCoord,J,G.drawing),G.drawn=!0;let Q=[],Z=[],z=[],B=[],U=[];for(let G of $.edges){let[F,H,V,P,W]=Z9($,G);Q.push(F),Z.push(P),z.push(V),B.push(H),U.push(W)}let j={x:0,y:0};$.canvas=X4($.canvas,j,J,...Q),$.canvas=X4($.canvas,j,J,...Z),$.canvas=X4($.canvas,j,J,...z),$.canvas=X4($.canvas,j,J,...B),$.canvas=X4($.canvas,j,J,...U);for(let G of $.subgraphs){if(G.nodes.length===0)continue;let[F,H]=F9(G,$);$.canvas=X4($.canvas,H,J,F)}return $.canvas}function y4($,J,K){let Q=K?{x:J.x+K.x,y:J.y+K.y}:J,Z=0;for(let j=0;j<Q.x;j++)Z+=$.columnWidth.get(j)??0;let z=0;for(let j=0;j<Q.y;j++)z+=$.rowHeight.get(j)??0;let B=$.columnWidth.get(Q.x)??0,U=$.rowHeight.get(Q.y)??0;return{x:Z+Math.floor(B/2)+$.offsetX,y:z+Math.floor(U/2)+$.offsetY}}function r6($,J){return J.map((K)=>y4($,K))}function n4($,J,K){if($.grid.has(q4(K)))if($.config.graphDirection==="LR")return n4($,J,{x:K.x,y:K.y+4});else return n4($,J,{x:K.x+4,y:K.y});for(let Q=0;Q<3;Q++)for(let Z=0;Z<3;Z++){let z={x:K.x+Q,y:K.y+Z};$.grid.set(q4(z),J)}return J.gridCoord=K,K}function H9($,J){let K=J.gridCoord,Q=$.config.boxBorderPadding,Z=[1,2*Q+J.displayLabel.length,1],z=[1,1+2*Q,1];for(let B=0;B<Z.length;B++){let U=K.x+B,j=$.columnWidth.get(U)??0;$.columnWidth.set(U,Math.max(j,Z[B]))}for(let B=0;B<z.length;B++){let U=K.y+B,j=$.rowHeight.get(U)??0;$.rowHeight.set(U,Math.max(j,z[B]))}if(K.x>0){let B=$.columnWidth.get(K.x-1)??0;$.columnWidth.set(K.x-1,Math.max(B,$.config.paddingX))}if(K.y>0){let B=$.config.paddingY;if(M9($,J))B+=4;let U=$.rowHeight.get(K.y-1)??0;$.rowHeight.set(K.y-1,Math.max(U,B))}}function W9($,J){for(let K of J){if(!$.columnWidth.has(K.x))$.columnWidth.set(K.x,Math.floor($.config.paddingX/2));if(!$.rowHeight.has(K.y))$.rowHeight.set(K.y,Math.floor($.config.paddingY/2))}}function M6($,J){return $.subgraphs.some((K)=>K.nodes.includes(J))}function R6($,J){for(let K of $.subgraphs)if(K.nodes.includes(J))return K;return null}function M9($,J){let K=R6($,J);if(!K)return!1;let Q=!1;for(let Z of $.edges)if(Z.to===J){if(R6($,Z.from)!==K){Q=!0;break}}if(!Q)return!1;for(let Z of K.nodes){if(Z===J||!Z.gridCoord)continue;let z=!1;for(let B of $.edges)if(B.to===Z){if(R6($,B.from)!==K){z=!0;break}}if(z&&Z.gridCoord.y<J.gridCoord.y)return!1}return!0}function e6($,J){if(J.nodes.length===0)return;let K=1e6,Q=1e6,Z=-1e6,z=-1e6;for(let j of J.children)if(e6($,j),j.nodes.length>0)K=Math.min(K,j.minX),Q=Math.min(Q,j.minY),Z=Math.max(Z,j.maxX),z=Math.max(z,j.maxY);for(let j of J.nodes){if(!j.drawingCoord||!j.drawing)continue;let G=j.drawingCoord.x,F=j.drawingCoord.y,H=G+j.drawing.length-1,V=F+j.drawing[0].length-1;K=Math.min(K,G),Q=Math.min(Q,F),Z=Math.max(Z,H),z=Math.max(z,V)}let B=2,U=2;J.minX=K-B,J.minY=Q-B-U,J.maxX=Z+B,J.maxY=z+B}function R9($){let K=$.subgraphs.filter((Q)=>Q.parent===null&&Q.nodes.length>0);for(let Q=0;Q<K.length;Q++)for(let Z=Q+1;Z<K.length;Z++){let z=K[Q],B=K[Z];if(z.minX<B.maxX&&z.maxX>B.minX){if(z.maxY>=B.minY-1&&z.minY<B.minY)B.minY=z.maxY+1+1;else if(B.maxY>=z.minY-1&&B.minY<z.minY)z.minY=B.maxY+1+1}if(z.minY<B.maxY&&z.maxY>B.minY){if(z.maxX>=B.minX-1&&z.minX<B.minX)B.minX=z.maxX+1+1;else if(B.maxX>=z.minX-1&&B.minX<z.minX)z.minX=B.maxX+1+1}}}function Y9($){for(let J of $.subgraphs)e6($,J);R9($)}function A9($){if($.subgraphs.length===0)return;let J=0,K=0;for(let z of $.subgraphs)J=Math.min(J,z.minX),K=Math.min(K,z.minY);let Q=-J,Z=-K;if(Q===0&&Z===0)return;$.offsetX=Q,$.offsetY=Z;for(let z of $.subgraphs)z.minX+=Q,z.minY+=Z,z.maxX+=Q,z.maxY+=Z;for(let z of $.nodes)if(z.drawingCoord)z.drawingCoord.x+=Q,z.drawingCoord.y+=Z}function $7($){let J=$.config.graphDirection,K=new Array(100).fill(0),Q=new Set,Z=[];for(let F of $.nodes){if(!Q.has(F.name))Z.push(F);Q.add(F.name);for(let H of Y6($,F))Q.add(H.name)}let z=!1,B=!1;for(let F of Z)if(M6($,F)){if(Y6($,F).length>0)B=!0}else z=!0;let U=J==="LR"&&z&&B,j,G=[];if(U)j=Z.filter((F)=>!M6($,F)),G=Z.filter((F)=>M6($,F));else j=Z;for(let F of j){let H=J==="LR"?{x:0,y:K[0]}:{x:K[0],y:0};n4($,$.nodes[F.index],H),K[0]=K[0]+4}if(U&&G.length>0)for(let H of G){let V=J==="LR"?{x:4,y:K[4]}:{x:K[4],y:4};n4($,$.nodes[H.index],V),K[4]=K[4]+4}for(let F of $.nodes){let H=F.gridCoord,V=J==="LR"?H.x+4:H.y+4,P=K[V];for(let W of Y6($,F)){if(W.gridCoord!==null)continue;let _=J==="LR"?{x:V,y:P}:{x:P,y:V};n4($,$.nodes[W.index],_),K[V]=P+4,P=K[V]}}for(let F of $.nodes)H9($,F);for(let F of $.edges)s6($,F),W9($,F.path),i6($,F);for(let F of $.nodes)F.drawingCoord=y4($,F.gridCoord),F.drawing=a6(F,$);d6($.canvas,$.columnWidth,$.rowHeight),Y9($),A9($)}function q9($,J){return $.edges.filter((K)=>K.from.name===J.name)}function Y6($,J){return q9($,J).map((K)=>K.to)}function $6($){let J={actors:[],messages:[],blocks:[],notes:[]},K=new Set,Q=[];for(let Z=1;Z<$.length;Z++){let z=$[Z],B=z.match(/^(participant|actor)\s+(\S+?)(?:\s+as\s+(.+))?$/);if(B){let V=B[1],P=B[2],W=B[3]?.trim()??P;if(!K.has(P))K.add(P),J.actors.push({id:P,label:W,type:V});continue}let U=z.match(/^Note\s+(left of|right of|over)\s+([^:]+):\s*(.+)$/i);if(U){let V=U[1].toLowerCase(),P=U[2].trim(),W=U[3].trim(),_=P.split(",").map((M)=>M.trim());for(let M of _)g4(J,K,M);let R="over";if(V==="left of")R="left";else if(V==="right of")R="right";J.notes.push({actorIds:_,text:W,position:R,afterIndex:J.messages.length-1});continue}let j=z.match(/^(loop|alt|opt|par|critical|break|rect)\s*(.*)$/);if(j){let V=j[1],P=j[2]?.trim()??"";Q.push({type:V,label:P,startIndex:J.messages.length,dividers:[]});continue}let G=z.match(/^(else|and)\s*(.*)$/);if(G&&Q.length>0){let V=G[2]?.trim()??"";Q[Q.length-1].dividers.push({index:J.messages.length,label:V});continue}if(z==="end"&&Q.length>0){let V=Q.pop();J.blocks.push({type:V.type,label:V.label,startIndex:V.startIndex,endIndex:Math.max(J.messages.length-1,V.startIndex),dividers:V.dividers});continue}let F=z.match(/^(\S+?)\s*(--?>?>|--?[)x]|--?>>|--?>)\s*([+-]?)(\S+?)\s*:\s*(.+)$/);if(F){let V=F[1],P=F[2],W=F[3],_=F[4],R=F[5].trim();g4(J,K,V),g4(J,K,_);let M=P.startsWith("--")?"dashed":"solid",Y=P.includes(">>")||P.includes("x")?"filled":"open",D={from:V,to:_,label:R,lineStyle:M,arrowHead:Y};if(W==="+")D.activate=!0;if(W==="-")D.deactivate=!0;J.messages.push(D);continue}let H=z.match(/^(\S+?)\s*(->>|-->>|-\)|--\)|-x|--x|->|-->)\s*([+-]?)(\S+?)\s*:\s*(.+)$/);if(H){let V=H[1],P=H[2],W=H[3],_=H[4],R=H[5].trim();g4(J,K,V),g4(J,K,_);let M=P.startsWith("--")?"dashed":"solid",Y=P.includes(">>")||P.includes("x")?"filled":"open",D={from:V,to:_,label:R,lineStyle:M,arrowHead:Y};if(W==="+")D.activate=!0;if(W==="-")D.deactivate=!0;J.messages.push(D);continue}}return J}function g4($,J,K){if(!J.has(K))J.add(K),$.actors.push({id:K,label:K,type:"participant"})}function J7($,J){let K=$.split(`
`).map((E)=>E.trim()).filter((E)=>E.length>0&&!E.startsWith("%%")),Q=$6(K);if(Q.actors.length===0)return"";let Z=J.useAscii,z=Z?"-":"─",B=Z?"|":"│",U=Z?"+":"┌",j=Z?"+":"┐",G=Z?"+":"└",F=Z?"+":"┘",H=Z?"+":"┬",V=Z?"+":"┴",P=Z?"+":"├",W=Z?"+":"┤",_=new Map;Q.actors.forEach((E,d)=>_.set(E.id,d));let R=1,Y=Q.actors.map((E)=>E.label.length+2*R+2).map((E)=>Math.ceil(E/2)),D=3,C=new Array(Math.max(Q.actors.length-1,0)).fill(0);for(let E of Q.messages){let d=_.get(E.from),l=_.get(E.to);if(d===l)continue;let p=Math.min(d,l),h=Math.max(d,l),m=E.label.length+4,n=h-p,o=Math.ceil(m/n);for(let L=p;L<h;L++)C[L]=Math.max(C[L],o)}let y=[Y[0]];for(let E=1;E<Q.actors.length;E++){let d=Math.max(Y[E-1]+Y[E]+2,C[E-1]+2,10);y[E]=y[E-1]+d}let A=[],q=[],O=new Map,k=new Map,v=new Map,u=[],b=D;for(let E=0;E<Q.messages.length;E++){for(let p=0;p<Q.blocks.length;p++)if(Q.blocks[p].startIndex===E)b+=2,O.set(p,b-1);for(let p=0;p<Q.blocks.length;p++)for(let h=0;h<Q.blocks[p].dividers.length;h++)if(Q.blocks[p].dividers[h].index===E)b+=1,v.set(`${p}:${h}`,b),b+=1;b+=1;let d=Q.messages[E];if(d.from===d.to)q[E]=b+1,A[E]=b,b+=3;else q[E]=b,A[E]=b+1,b+=2;for(let p=0;p<Q.notes.length;p++)if(Q.notes[p].afterIndex===E){b+=1;let h=Q.notes[p],m=h.text.split("\\n"),n=Math.max(...m.map((x)=>x.length))+4,o=m.length+2,L=_.get(h.actorIds[0])??0,N;if(h.position==="left")N=y[L]-n-1;else if(h.position==="right")N=y[L]+2;else if(h.actorIds.length>=2){let x=_.get(h.actorIds[1])??L;N=Math.floor((y[L]+y[x])/2)-Math.floor(n/2)}else N=y[L]-Math.floor(n/2);N=Math.max(0,N),u.push({x:N,y:b,width:n,height:o,lines:m}),b+=o}for(let p=0;p<Q.blocks.length;p++)if(Q.blocks[p].endIndex===E)b+=1,k.set(p,b),b+=1}b+=1;let f=b,X=f+D,I=y[y.length-1]??0,w=Y[Y.length-1]??0,S=I+w+2;for(let E=0;E<Q.messages.length;E++){let d=Q.messages[E];if(d.from===d.to){let l=_.get(d.from),p=y[l]+6+2+d.label.length;S=Math.max(S,p+1)}}for(let E of u)S=Math.max(S,E.x+E.width+1);let T=_4(S,X-1);function c(E,d,l){let p=l.length+2*R+2,h=E-Math.floor(p/2);T[h][d]=U;for(let n=1;n<p-1;n++)T[h+n][d]=z;T[h+p-1][d]=j,T[h][d+1]=B,T[h+p-1][d+1]=B;let m=h+1+R;for(let n=0;n<l.length;n++)T[m+n][d+1]=l[n];T[h][d+2]=G;for(let n=1;n<p-1;n++)T[h+n][d+2]=z;T[h+p-1][d+2]=F}for(let E=0;E<Q.actors.length;E++){let d=y[E];for(let l=D;l<=f;l++)T[d][l]=B}for(let E=0;E<Q.actors.length;E++){let d=Q.actors[E];if(c(y[E],0,d.label),c(y[E],f,d.label),!Z)T[y[E]][D-1]=H,T[y[E]][f]=V}for(let E=0;E<Q.messages.length;E++){let d=Q.messages[E],l=_.get(d.from),p=_.get(d.to),h=y[l],m=y[p],n=l===p,o=d.lineStyle==="dashed",L=d.arrowHead==="filled",N=o?Z?".":"╌":z;if(n){let x=A[E],g=Math.max(4,4);T[h][x]=P;for(let r=h+1;r<h+g;r++)T[r][x]=N;T[h+g][x]=Z?"+":"┐",T[h+g][x+1]=B;let t=h+g+2;for(let r=0;r<d.label.length;r++)if(t+r<S)T[t+r][x+1]=d.label[r];let $4=L?Z?"<":"◀":Z?"<":"◁";T[h][x+2]=$4;for(let r=h+1;r<h+g;r++)T[r][x+2]=N;T[h+g][x+2]=Z?"+":"┘"}else{let x=q[E],g=A[E],t=h<m,r=Math.floor((h+m)/2)-Math.floor(d.label.length/2);for(let B4=0;B4<d.label.length;B4++){let F4=r+B4;if(F4>=0&&F4<S)T[F4][x]=d.label[B4]}if(t){for(let F4=h+1;F4<m;F4++)T[F4][g]=N;let B4=L?Z?">":"▶":Z?">":"▷";T[m][g]=B4}else{for(let F4=m+1;F4<h;F4++)T[F4][g]=N;let B4=L?Z?"<":"◀":Z?"<":"◁";T[m][g]=B4}}}for(let E=0;E<Q.blocks.length;E++){let d=Q.blocks[E],l=O.get(E),p=k.get(E);if(l===void 0||p===void 0)continue;let h=S,m=0;for(let N=d.startIndex;N<=d.endIndex;N++){if(N>=Q.messages.length)break;let x=Q.messages[N],g=_.get(x.from)??0,t=_.get(x.to)??0;h=Math.min(h,y[Math.min(g,t)]),m=Math.max(m,y[Math.max(g,t)])}let n=Math.max(0,h-4),o=Math.min(S-1,m+4);T[n][l]=U;for(let N=n+1;N<o;N++)T[N][l]=z;T[o][l]=j;let L=d.label?`${d.type} [${d.label}]`:d.type;for(let N=0;N<L.length&&n+1+N<o;N++)T[n+1+N][l]=L[N];T[n][p]=G;for(let N=n+1;N<o;N++)T[N][p]=z;T[o][p]=F;for(let N=l+1;N<p;N++)T[n][N]=B,T[o][N]=B;for(let N=0;N<d.dividers.length;N++){let x=v.get(`${E}:${N}`);if(x===void 0)continue;let g=i();T[n][x]=P;for(let $4=n+1;$4<o;$4++)T[$4][x]=g;T[o][x]=W;let t=d.dividers[N].label;if(t){let $4=`[${t}]`;for(let r=0;r<$4.length&&n+1+r<o;r++)T[n+1+r][x]=$4[r]}}}for(let E of u){L4(T,E.x+E.width,E.y+E.height),T[E.x][E.y]=U;for(let l=1;l<E.width-1;l++)T[E.x+l][E.y]=z;T[E.x+E.width-1][E.y]=j;for(let l=0;l<E.lines.length;l++){let p=E.y+1+l;T[E.x][p]=B,T[E.x+E.width-1][p]=B;for(let h=0;h<E.lines[l].length;h++)T[E.x+2+h][p]=E.lines[l][h]}let d=E.y+E.height-1;T[E.x][d]=G;for(let l=1;l<E.width-1;l++)T[E.x+l][d]=z;T[E.x+E.width-1][d]=F}return E4(T);function i(){return Z?"-":"╌"}}function J6($){let J={classes:[],relationships:[],namespaces:[]},K=new Map,Q=null,Z=null,z=0;for(let B=1;B<$.length;B++){let U=$[B];if(Z&&z>0){if(U==="}"){if(z--,z===0)Z=null;continue}let W=U.match(/^<<(\w+)>>$/);if(W){Z.annotation=W[1];continue}let _=Q7(U);if(_)if(_.isMethod)Z.methods.push(_.member);else Z.attributes.push(_.member);continue}let j=U.match(/^namespace\s+(\S+)\s*\{$/);if(j){Q={name:j[1],classIds:[]};continue}if(U==="}"&&Q){J.namespaces.push(Q),Q=null;continue}let G=U.match(/^class\s+(\S+?)(?:\s*~(\w+)~)?\s*\{$/);if(G){let W=G[1],_=G[2],R=v4(K,W);if(_)R.label=`${W}<${_}>`;if(Z=R,z=1,Q)Q.classIds.push(W);continue}let F=U.match(/^class\s+(\S+?)(?:\s*~(\w+)~)?\s*$/);if(F){let W=F[1],_=F[2],R=v4(K,W);if(_)R.label=`${W}<${_}>`;if(Q)Q.classIds.push(W);continue}let H=U.match(/^class\s+(\S+?)\s*\{\s*<<(\w+)>>\s*\}$/);if(H){let W=v4(K,H[1]);W.annotation=H[2];continue}let V=U.match(/^(\S+?)\s*:\s*(.+)$/);if(V){let W=V[2];if(!W.match(/<\|--|--|\*--|o--|-->|\.\.>|\.\.\|>/)){let _=v4(K,V[1]),R=Q7(W);if(R)if(R.isMethod)_.methods.push(R.member);else _.attributes.push(R.member);continue}}let P=O9(U);if(P){v4(K,P.from),v4(K,P.to),J.relationships.push(P);continue}}return J.classes=[...K.values()],J}function v4($,J){let K=$.get(J);if(!K)K={id:J,label:J,attributes:[],methods:[]},$.set(J,K);return K}function Q7($){let J=$.trim().replace(/;$/,"");if(!J)return null;let K="",Q=J;if(/^[+\-#~]/.test(Q))K=Q[0],Q=Q.slice(1).trim();let Z=Q.match(/^(.+?)\(([^)]*)\)(?:\s*(.+))?$/);if(Z){let F=Z[1].trim(),H=Z[3]?.trim(),V=F.endsWith("$")||Q.includes("$"),P=F.endsWith("*")||Q.includes("*");return{member:{visibility:K,name:F.replace(/[$*]$/,""),type:H||void 0,isStatic:V,isAbstract:P},isMethod:!0}}let z=Q.split(/\s+/),B,U;if(z.length>=2)U=z[0],B=z.slice(1).join(" ");else B=z[0]??Q;let j=B.endsWith("$"),G=B.endsWith("*");return{member:{visibility:K,name:B.replace(/[$*]$/,""),type:U||void 0,isStatic:j,isAbstract:G},isMethod:!1}}function O9($){let J=$.match(/^(\S+?)\s+(?:"([^"]*?)"\s+)?(<\|--|<\|\.\.|\*--|o--|-->|--\*|--o|--|>\s*|\.\.>|\.\.\|>|--)\s+(?:"([^"]*?)"\s+)?(\S+?)(?:\s*:\s*(.+))?$/);if(!J)return null;let K=J[1],Q=J[2]||void 0,Z=J[3].trim(),z=J[4]||void 0,B=J[5],U=J[6]?.trim()||void 0,j=X9(Z);if(!j)return null;return{from:K,to:B,type:j.type,markerAt:j.markerAt,label:U,fromCardinality:Q,toCardinality:z}}function X9($){switch($){case"<|--":return{type:"inheritance",markerAt:"from"};case"<|..":return{type:"realization",markerAt:"from"};case"*--":return{type:"composition",markerAt:"from"};case"--*":return{type:"composition",markerAt:"to"};case"o--":return{type:"aggregation",markerAt:"from"};case"--o":return{type:"aggregation",markerAt:"to"};case"-->":return{type:"association",markerAt:"to"};case"..>":return{type:"dependency",markerAt:"to"};case"..|>":return{type:"realization",markerAt:"to"};case"--":return{type:"association",markerAt:"to"};default:return null}}function K7($){let J=$.visibility||"",K=$.type?`: ${$.type}`:"";return`${J}${$.name}${K}`}function D9($){let J=[];if($.annotation)J.push(`<<${$.annotation}>>`);J.push($.label);let K=$.attributes.map(K7),Q=$.methods.map(K7);if(K.length===0&&Q.length===0)return[J];if(Q.length===0)return[J,K];return[J,K,Q]}function I9($,J){return{type:$,markerAt:J,dashed:$==="dependency"||$==="realization"}}function u4($,J,K){switch($){case"inheritance":case"realization":if(K==="down")return J?"^":"△";else if(K==="up")return J?"v":"▽";else if(K==="left")return J?">":"◁";else return J?"<":"▷";case"composition":return J?"*":"◆";case"aggregation":return J?"o":"◇";case"association":case"dependency":if(K==="down")return J?"v":"▼";else if(K==="up")return J?"^":"▲";else if(K==="left")return J?"<":"◀";else return J?">":"▶"}}function Z7($,J){let K=$.split(`
`).map((f)=>f.trim()).filter((f)=>f.length>0&&!f.startsWith("%%")),Q=J6(K);if(Q.classes.length===0)return"";let Z=J.useAscii,z=4,B=3,U=new Map,j=new Map,G=new Map;for(let f of Q.classes){let X=D9(f);U.set(f.id,X);let I=0;for(let c of X)for(let i of c)I=Math.max(I,i.length);let w=I+4,S=0;for(let c of X)S+=Math.max(c.length,1);let T=S+(X.length-1)+2;j.set(f.id,w),G.set(f.id,T)}let F=new Map;for(let f of Q.classes)F.set(f.id,f);let H=new Map,V=new Map;for(let f of Q.relationships){let X=f.type==="inheritance"||f.type==="realization",I=X&&f.markerAt==="to"?f.to:f.from,w=X&&f.markerAt==="to"?f.from:f.to;if(!H.has(w))H.set(w,new Set);if(H.get(w).add(I),!V.has(I))V.set(I,new Set);V.get(I).add(w)}let P=new Map,_=Q.classes.filter((f)=>!H.has(f.id)||H.get(f.id).size===0).map((f)=>f.id);for(let f of _)P.set(f,0);let R=Q.classes.length-1,M=0;while(M<_.length){let f=_[M++],X=V.get(f);if(!X)continue;for(let I of X){let w=(P.get(f)??0)+1;if(w>R)continue;if(!P.has(I)||P.get(I)<w)P.set(I,w),_.push(I)}}for(let f of Q.classes)if(!P.has(f.id))P.set(f.id,0);let Y=Math.max(...[...P.values()],0),D=Array.from({length:Y+1},()=>[]);for(let f of Q.classes)D[P.get(f.id)].push(f.id);let C=new Map,y=0;for(let f=0;f<=Y;f++){let X=D[f];if(X.length===0)continue;let I=0,w=0;for(let S of X){let T=F.get(S),c=j.get(S),i=G.get(S);C.set(S,{cls:T,sections:U.get(S),x:I,y,width:c,height:i}),I+=c+z,w=Math.max(w,i)}y+=w+B}let A=0,q=0;for(let f of C.values())A=Math.max(A,f.x+f.width),q=Math.max(q,f.y+f.height);A+=4,q+=2;let O=_4(A-1,q-1);for(let f of C.values()){let X=e4(f.sections,Z);for(let I=0;I<X.length;I++)for(let w=0;w<X[0].length;w++){let S=X[I][w];if(S!==" "){let T=f.x+I,c=f.y+w;if(T<A&&c<q)O[T][c]=S}}}let k=Z?"-":"─",v=Z?"|":"│",u=Z?".":"╌",b=Z?":":"┊";for(let f of Q.relationships){let X=C.get(f.from),I=C.get(f.to);if(!X||!I)continue;let w=I9(f.type,f.markerAt),S=w.dashed?u:k,T=w.dashed?b:v,c=X.x+Math.floor(X.width/2),i=X.y+X.height-1,E=I.x+Math.floor(I.width/2),d=I.y;if(i<d){let l=i+Math.floor((d-i)/2);for(let p=i+1;p<=l;p++)if(p<q)O[c][p]=T;if(c!==E){let p=Math.min(c,E),h=Math.max(c,E);for(let m=p;m<=h;m++)if(m<A&&l<q)O[m][l]=S;if(!Z&&l<q)if(c<E)O[c][l]="└",O[E][l]="┐";else O[c][l]="┘",O[E][l]="┌"}for(let p=l+1;p<d;p++)if(p<q)O[E][p]=T;if(w.markerAt==="to"){let p=u4(w.type,Z,"down"),h=d-1;if(h>=0&&h<q)for(let m=0;m<p.length;m++){let n=E-Math.floor(p.length/2)+m;if(n>=0&&n<A)O[n][h]=p[m]}}if(w.markerAt==="from"){let p=u4(w.type,Z,"down"),h=i+1;if(h<q)for(let m=0;m<p.length;m++){let n=c-Math.floor(p.length/2)+m;if(n>=0&&n<A)O[n][h]=p[m]}}}else if(I.y+I.height-1<X.y){let l=X.y,p=I.y+I.height-1,h=p+Math.floor((l-p)/2);for(let m=l-1;m>=h;m--)if(m>=0&&m<q)O[c][m]=T;if(c!==E){let m=Math.min(c,E),n=Math.max(c,E);for(let o=m;o<=n;o++)if(o<A&&h>=0&&h<q)O[o][h]=S;if(!Z&&h>=0&&h<q)if(c<E)O[c][h]="┌",O[E][h]="┘";else O[c][h]="┐",O[E][h]="└"}for(let m=h-1;m>p;m--)if(m>=0&&m<q)O[E][m]=T;if(w.markerAt==="from"){let m=u4(w.type,Z,"up"),n=l-1;if(n>=0&&n<q)for(let o=0;o<m.length;o++){let L=c-Math.floor(m.length/2)+o;if(L>=0&&L<A)O[L][n]=m[o]}}if(w.markerAt==="to"){let n=w.type==="inheritance"||w.type==="realization"?"down":"up",o=u4(w.type,Z,n),L=p+1;if(L<q)for(let N=0;N<o.length;N++){let x=E-Math.floor(o.length/2)+N;if(x>=0&&x<A)O[x][L]=o[N]}}}else{let l=Math.max(i,I.y+I.height-1)+2;L4(O,A,l+1);for(let m=i+1;m<=l;m++)O[c][m]=T;let p=Math.min(c,E),h=Math.max(c,E);for(let m=p;m<=h;m++)O[m][l]=S;for(let m=l-1;m>=I.y+I.height;m--)O[E][m]=T;if(w.markerAt==="from"){let m=u4(w.type,Z,"down"),n=i+1;if(n<q)for(let o=0;o<m.length;o++){let L=c-Math.floor(m.length/2)+o;if(L>=0&&L<A)O[L][n]=m[o]}}if(w.markerAt==="to"){let m=u4(w.type,Z,"up"),n=I.y+I.height;if(n<q)for(let o=0;o<m.length;o++){let L=E-Math.floor(m.length/2)+o;if(L>=0&&L<A)O[L][n]=m[o]}}}if(f.label){let l=` ${f.label} `,p=Math.floor((c+E)/2),h;if(i<d)h=Math.floor((i+1+d-1)/2);else if(I.y+I.height-1<X.y){let n=I.y+I.height-1;h=Math.floor((n+1+X.y-1)/2)}else h=Math.max(i,I.y+I.height-1)+2;let m=p-Math.floor(l.length/2);for(let n=0;n<l.length;n++){let o=m+n;if(o>=0&&o<A&&h>=0&&h<q)O[o][h]=l[n]}}}return E4(O)}function Q6($){let J={entities:[],relationships:[]},K=new Map,Q=null;for(let Z=1;Z<$.length;Z++){let z=$[Z];if(Q){if(z==="}"){Q=null;continue}let j=C9(z);if(j)Q.attributes.push(j);continue}let B=z.match(/^(\S+)\s*\{$/);if(B){let j=B[1];Q=A6(K,j);continue}let U=T9(z);if(U){A6(K,U.entity1),A6(K,U.entity2),J.relationships.push(U);continue}}return J.entities=[...K.values()],J}function A6($,J){let K=$.get(J);if(!K)K={id:J,label:J,attributes:[]},$.set(J,K);return K}function C9($){let J=$.match(/^(\S+)\s+(\S+)(?:\s+(.+))?$/);if(!J)return null;let K=J[1],Q=J[2],Z=J[3]?.trim()??"",z=[],B,U=Z.match(/"([^"]*)"/);if(U)B=U[1];let j=Z.replace(/"[^"]*"/,"").trim();for(let G of j.split(/\s+/)){let F=G.toUpperCase();if(F==="PK"||F==="FK"||F==="UK")z.push(F)}return{type:K,name:Q,keys:z,comment:B}}function T9($){let J=$.match(/^(\S+)\s+([|o}{]+(?:--|\.\.)[|o}{]+)\s+(\S+)\s*:\s*(.+)$/);if(!J)return null;let K=J[1],Q=J[2],Z=J[3],z=J[4].trim(),B=Q.match(/^([|o}{]+)(--|\.\.?)([|o}{]+)$/);if(!B)return null;let U=B[1],j=B[2],G=B[3],F=U7(U),H=U7(G),V=j==="--";if(!F||!H)return null;return{entity1:K,entity2:Z,cardinality1:F,cardinality2:H,label:z,identifying:V}}function U7($){let J=$.split("").sort().join("");if(J==="||")return"one";if(J==="o|")return"zero-one";if(J==="|}"||J==="{|")return"many";if(J==="{o"||J==="o{")return"zero-many";return null}function L9($){return`${$.keys.length>0?$.keys.join(",")+" ":"   "}${$.type} ${$.name}`}function E9($){let J=[$.label],K=$.attributes.map(L9);if(K.length===0)return[J];return[J,K]}function K6($,J){if(J)switch($){case"one":return"||";case"zero-one":return"o|";case"many":return"}|";case"zero-many":return"o{"}else switch($){case"one":return"║";case"zero-one":return"o║";case"many":return"╟";case"zero-many":return"o╟"}}function V7($,J){let K=$.split(`
`).map((q)=>q.trim()).filter((q)=>q.length>0&&!q.startsWith("%%")),Q=Q6(K);if(Q.entities.length===0)return"";let Z=J.useAscii,z=6,B=4,U=new Map,j=new Map,G=new Map;for(let q of Q.entities){let O=E9(q);U.set(q.id,O);let k=0;for(let f of O)for(let X of f)k=Math.max(k,X.length);let v=k+4,u=0;for(let f of O)u+=Math.max(f.length,1);let b=u+(O.length-1)+2;j.set(q.id,v),G.set(q.id,b)}let F=Math.max(2,Math.ceil(Math.sqrt(Q.entities.length))),H=new Map,V=0,P=0,W=0,_=0;for(let q of Q.entities){let O=j.get(q.id),k=G.get(q.id);if(_>=F)P+=W+B,V=0,W=0,_=0;H.set(q.id,{entity:q,sections:U.get(q.id),x:V,y:P,width:O,height:k}),V+=O+z,W=Math.max(W,k),_++}let R=0,M=0;for(let q of H.values())R=Math.max(R,q.x+q.width),M=Math.max(M,q.y+q.height);R+=4,M+=2;let Y=_4(R-1,M-1);for(let q of H.values()){let O=e4(q.sections,Z);for(let k=0;k<O.length;k++)for(let v=0;v<O[0].length;v++){let u=O[k][v];if(u!==" "){let b=q.x+k,f=q.y+v;if(b<R&&f<M)Y[b][f]=u}}}let D=Z?"-":"─",C=Z?"|":"│",y=Z?".":"╌",A=Z?":":"┊";for(let q of Q.relationships){let O=H.get(q.entity1),k=H.get(q.entity2);if(!O||!k)continue;let v=q.identifying?D:y,u=q.identifying?C:A,b=O.x+Math.floor(O.width/2),f=O.y+Math.floor(O.height/2),X=k.x+Math.floor(k.width/2),I=k.y+Math.floor(k.height/2);if(Math.abs(f-I)<Math.max(O.height,k.height)){let[S,T]=b<X?[O,k]:[k,O],[c,i]=b<X?[q.cardinality1,q.cardinality2]:[q.cardinality2,q.cardinality1],E=S.x+S.width,d=T.x-1,l=S.y+Math.floor(S.height/2);for(let m=E;m<=d;m++)if(m<R)Y[m][l]=v;let p=K6(c,Z);for(let m=0;m<p.length;m++){let n=E+m;if(n<R)Y[n][l]=p[m]}let h=K6(i,Z);for(let m=0;m<h.length;m++){let n=d-h.length+1+m;if(n>=0&&n<R)Y[n][l]=h[m]}if(q.label){let m=Math.floor((E+d)/2),n=Math.max(E,m-Math.floor(q.label.length/2)),o=l-1;if(o>=0)for(let L=0;L<q.label.length;L++){let N=n+L;if(N>=E&&N<=d&&N<R)Y[N][o]=q.label[L]}}}else{let[S,T]=f<I?[O,k]:[k,O],[c,i]=f<I?[q.cardinality1,q.cardinality2]:[q.cardinality2,q.cardinality1],E=S.y+S.height,d=T.y-1,l=S.x+Math.floor(S.width/2);for(let o=E;o<=d;o++)if(o<M)Y[l][o]=u;let p=T.x+Math.floor(T.width/2);if(l!==p){let o=Math.floor((E+d)/2),L=Math.min(l,p),N=Math.max(l,p);for(let x=L;x<=N;x++)if(x<R&&o<M)Y[x][o]=v;for(let x=o+1;x<=d;x++)if(x<M)Y[p][x]=u}let h=K6(c,Z);if(E<M)for(let o=0;o<h.length;o++){let L=l-Math.floor(h.length/2)+o;if(L>=0&&L<R)Y[L][E]=h[o]}let m=l!==p?p:l,n=K6(i,Z);if(d>=0&&d<M)for(let o=0;o<n.length;o++){let L=m-Math.floor(n.length/2)+o;if(L>=0&&L<R)Y[L][d]=n[o]}if(q.label){let o=Math.floor((E+d)/2),L=l+2;if(o>=0)for(let N=0;N<q.label.length;N++){let x=L+N;if(x>=0)L4(Y,x+1,o+1),Y[x][o]=q.label[N]}}}}return E4(Y)}function N9($){let J=$.trim().split(`
`)[0]?.trim().toLowerCase()??"";if(/^sequencediagram\s*$/.test(J))return"sequence";if(/^classdiagram\s*$/.test(J))return"class";if(/^erdiagram\s*$/.test(J))return"er";return"flowchart"}function q6($,J={}){let K={useAscii:J.useAscii??!1,paddingX:J.paddingX??5,paddingY:J.paddingY??5,boxBorderPadding:J.boxBorderPadding??1,graphDirection:"TD"};switch(N9($)){case"sequence":return J7($,K);case"class":return Z7($,K);case"er":return V7($,K);case"flowchart":default:{let Z=p4($);if(Z.direction==="LR"||Z.direction==="RL")K.graphDirection="LR";else K.graphDirection="TD";let z=n6(Z,K);if($7(z),t6(z),Z.direction==="BT")p6(z.canvas);return E4(z.canvas)}}}var i4=G6(Z6(),1);function z4($,J,K){let Q=K>=600?0.58:K>=500?0.55:0.52;return $.length*J*Q}function U6($,J){return $.length*J*0.6}var k9="'JetBrains Mono'",O0=`${k9}, 'SF Mono', 'Fira Code', ui-monospace, monospace`,a={nodeLabel:13,edgeLabel:11,groupHeader:12},e={nodeLabel:500,edgeLabel:400,groupHeader:600},B7=8,f4={horizontal:16,vertical:10,diamondExtra:24},Z4={outerBox:1,innerBox:0.75,connector:0.75},G4="0.35em",m4={width:8,height:4.8};function D4($,J,K,Q){return{x:$-K/2,y:J-Q/2}}function o4($,J,K,Q,Z){let z=$.x-J,B=$.y-K;if(Math.abs(z)<0.5&&Math.abs(B)<0.5)return $;let U=1/(Math.abs(z)/Q+Math.abs(B)/Z);return{x:J+U*z,y:K+U*B}}function s4($,J,K,Q){let Z=$.x-J,z=$.y-K,B=Math.sqrt(Z*Z+z*z);if(B<0.5)return $;let U=Q/B;return{x:J+U*Z,y:K+U*z}}function k4($,J=!0){if($.length<2)return $;let K=[$[0]];for(let Q=1;Q<$.length;Q++){let Z=K[K.length-1],z=$[Q],B=Math.abs(z.x-Z.x),U=Math.abs(z.y-Z.y);if(B<1||U<1){K.push(z);continue}if(J)K.push({x:Z.x,y:z.y});else K.push({x:z.x,y:Z.y});K.push(z)}return S9(K)}function S9($){if($.length<3)return $;let J=[$[0]];for(let K=1;K<$.length-1;K++){let Q=J[J.length-1],Z=$[K],z=$[K+1],B=Math.abs(Q.x-Z.x)<1&&Math.abs(Z.x-z.x)<1,U=Math.abs(Q.y-Z.y)<1&&Math.abs(Z.y-z.y)<1;if(B||U)continue;J.push(Z)}return J.push($[$.length-1]),J}function b4($,J,K){if($.length<2)return $;let Q=$.map((Z)=>({...Z}));if(K){let Z=Q.length-1;if($.length===2){let z=Q[0],B=Q[Z],U=Math.abs(B.x-z.x);if(Math.abs(B.y-z.y)>=U){let F=B.y>z.y?K.cy-K.hh:K.cy+K.hh;Q[Z]={x:B.x,y:F}}else{let F=B.x>z.x?K.cx-K.hw:K.cx+K.hw;Q[Z]={x:F,y:B.y}}}else{let z=Q[Z-1],B=Q[Z],U=Math.abs(B.x-z.x),j=Math.abs(B.y-z.y),G=j<1&&U>=1,F=U<1&&j>=1,H=!G&&!F&&j<U,V=!G&&!F&&U<j;if(G){let W=B.x>z.x?K.cx-K.hw:K.cx+K.hw;Q[Z]={x:W,y:K.cy},Q[Z-1]={...z,y:K.cy}}else if(F){let W=B.y>z.y?K.cy-K.hh:K.cy+K.hh;Q[Z]={x:K.cx,y:W},Q[Z-1]={...z,x:K.cx}}else if(H){let W=B.x>z.x?K.cx-K.hw:K.cx+K.hw;if(z.y>=K.cy-K.hh&&z.y<=K.cy+K.hh)Q[Z]={x:W,y:z.y};else Q[Z]={x:W,y:K.cy},Q[Z-1]={...z,y:K.cy}}else if(V){let W=B.y>z.y?K.cy-K.hh:K.cy+K.hh;if(z.x>=K.cx-K.hw&&z.x<=K.cx+K.hw)Q[Z]={x:z.x,y:W};else Q[Z]={x:K.cx,y:W},Q[Z-1]={...z,x:K.cx}}}}if(J&&$.length>=3){let Z=Q[0],z=Q[1],B=Math.abs(z.x-Z.x),U=Math.abs(z.y-Z.y),j=U<1&&B>=1,G=B<1&&U>=1,F=!j&&!G&&U<B,H=!j&&!G&&B<U;if(j){let P=z.x>Z.x?J.cx+J.hw:J.cx-J.hw;Q[0]={x:P,y:J.cy},Q[1]={...Q[1],y:J.cy}}else if(G){let P=z.y>Z.y?J.cy+J.hh:J.cy-J.hh;Q[0]={x:J.cx,y:P},Q[1]={...Q[1],x:J.cx}}else if(F){let P=z.x>Z.x?J.cx+J.hw:J.cx-J.hw;if(z.y>=J.cy-J.hh&&z.y<=J.cy+J.hh)Q[0]={x:P,y:z.y};else Q[0]={x:P,y:J.cy},Q[1]={...Q[1],y:J.cy}}else if(H){let P=z.y>Z.y?J.cy+J.hh:J.cy-J.hh;if(z.x>=J.cx-J.hw&&z.x<=J.cx+J.hw)Q[0]={x:z.x,y:P};else Q[0]={x:J.cx,y:P},Q[1]={...Q[1],x:J.cx}}}return Q}var V6=new Set(["circle","doublecircle","state-start","state-end"]),z6=new Set(["diamond","circle","doublecircle","state-start","state-end"]),w9={font:"Inter",padding:40,nodeSpacing:24,layerSpacing:40};function f9($,J,K){let Q=new i4.default.graphlib.Graph({directed:!0,compound:!0});Q.setGraph({rankdir:G7($.direction),acyclicer:"greedy",nodesep:K.nodeSpacing,ranksep:K.layerSpacing,marginx:16,marginy:12}),Q.setDefaultEdgeLabel(()=>({}));let Z=new Set;Z.add($.id),I6($,Z);for(let V of $.nodeIds){let P=J.nodes.get(V);if(P){let W=X6(V,P.label,P.shape);Q.setNode(V,{label:P.label,width:W.width,height:W.height})}}for(let V of $.children)D6(Q,V,J);let z=new Set;for(let V=0;V<J.edges.length;V++){let P=J.edges[V];if(Z.has(P.source)&&Z.has(P.target)){z.add(V);let W={_index:V};if(P.label)W.label=P.label,W.width=z4(P.label,a.edgeLabel,e.edgeLabel)+8,W.height=a.edgeLabel+6,W.labelpos="c";Q.setEdge(P.source,P.target,W)}}i4.default.layout(Q);let B=$.direction==="TD"||$.direction==="TB"||$.direction==="BT",U=new Set;for(let V of $.children)T6(V,U);let j=[];for(let V of Q.nodes()){if(U.has(V))continue;let P=J.nodes.get(V);if(!P)continue;let W=Q.node(V);if(!W)continue;let _=D4(W.x,W.y,W.width,W.height);j.push({id:V,label:P.label,shape:P.shape,x:_.x,y:_.y,width:W.width,height:W.height,inlineStyle:F7(J,V)})}let G=Q.edges().map((V)=>{let P=Q.edge(V),W=J.edges[P._index],_=P.points??[];if(_.length>0){let q=J.nodes.get(V.v)?.shape;if(q==="diamond"){let k=Q.node(V.v);_[0]=o4(_[0],k.x,k.y,k.width/2,k.height/2)}else if(q&&V6.has(q)){let k=Q.node(V.v);_[0]=s4(_[0],k.x,k.y,Math.min(k.width,k.height)/2)}let O=J.nodes.get(V.w)?.shape;if(O==="diamond"){let k=Q.node(V.w),v=_.length-1;_[v]=o4(_[v],k.x,k.y,k.width/2,k.height/2)}else if(O&&V6.has(O)){let k=Q.node(V.w),v=_.length-1;_[v]=s4(_[v],k.x,k.y,Math.min(k.width,k.height)/2)}}let R=k4(_,B),M=J.nodes.get(V.v)?.shape,Y=J.nodes.get(V.w)?.shape,D=M&&!z6.has(M)||!M?(()=>{let q=Q.node(V.v);return q?{cx:q.x,cy:q.y,hw:q.width/2,hh:q.height/2}:null})():null,C=Y&&!z6.has(Y)||!Y?(()=>{let q=Q.node(V.w);return q?{cx:q.x,cy:q.y,hw:q.width/2,hh:q.height/2}:null})():null,y=b4(R,D,C),A;if(W.label&&P.x!=null&&P.y!=null)A={x:P.x,y:P.y};return{source:W.source,target:W.target,label:W.label,style:W.style,hasArrowStart:W.hasArrowStart,hasArrowEnd:W.hasArrowEnd,points:y,labelPosition:A}}),F=$.children.map((V)=>C6(Q,V)),H=Q.graph();return{id:$.id,label:$.label,width:H.width??200,height:H.height??100,nodes:j,edges:G,groups:F,nodeIds:Z,internalEdgeIndices:z}}async function j7($,J={}){let K={...w9,...J},Q=new Map;for(let F of $.subgraphs)if(F.direction&&F.direction!==$.direction)Q.set(F.id,f9(F,$,K));let Z=new i4.default.graphlib.Graph({directed:!0,compound:!0});Z.setGraph({rankdir:G7($.direction),acyclicer:"greedy",nodesep:K.nodeSpacing,ranksep:K.layerSpacing,marginx:K.padding,marginy:K.padding}),Z.setDefaultEdgeLabel(()=>({}));let z=new Set;for(let F of $.subgraphs)z.add(F.id),I6(F,z);for(let[F,H]of $.nodes)if(!z.has(F)){let V=X6(F,H.label,H.shape);Z.setNode(F,{label:H.label,width:V.width,height:V.height})}for(let F of $.subgraphs)if(Q.has(F.id)){let H=Q.get(F.id);Z.setNode(F.id,{width:H.width,height:H.height})}else D6(Z,F,$);let B=new Map,U=new Map;for(let F of $.subgraphs)if(!Q.has(F.id))_7(F,B,U);for(let[F,H]of Q)for(let V of H.nodeIds)B.set(V,F),U.set(V,F);let j=new Set;for(let F of Q.values())for(let H of F.internalEdgeIndices)j.add(H);let G=new Set;for(let F=0;F<$.edges.length;F++){if(j.has(F))continue;let H=$.edges[F],V=U.get(H.source)??H.source,P=B.get(H.target)??H.target,W={_index:F};if(H.label)W.label=H.label,W.width=z4(H.label,a.edgeLabel,e.edgeLabel)+8,W.height=a.edgeLabel+6,W.labelpos="c";if(!G.has(P))W.weight=2,G.add(P);Z.setEdge(V,P,W)}try{i4.default.layout(Z)}catch(F){let H=F instanceof Error?F.message:String(F);throw new Error(`Dagre layout failed: ${H}`)}return b9(Z,$,K.padding,Q)}function G7($){switch($){case"LR":return"LR";case"RL":return"RL";case"BT":return"BT";case"TD":case"TB":default:return"TB"}}function X6($,J,K){let Z=z4(J,a.nodeLabel,e.nodeLabel)+f4.horizontal*2,z=a.nodeLabel+f4.vertical*2;if(K==="diamond"){let B=Math.max(Z,z)+f4.diamondExtra;Z=B,z=B}if(K==="circle"||K==="doublecircle"){let B=Math.ceil(Math.sqrt(Z*Z+z*z))+8;Z=K==="doublecircle"?B+12:B,z=Z}if(K==="hexagon")Z+=f4.horizontal;if(K==="trapezoid"||K==="trapezoid-alt")Z+=f4.horizontal;if(K==="asymmetric")Z+=12;if(K==="cylinder")z+=14;if(K==="state-start"||K==="state-end")Z=28,z=28;return Z=Math.max(Z,60),z=Math.max(z,36),{width:Z,height:z}}function D6($,J,K,Q){if($.setNode(J.id,{label:J.label}),Q)$.setParent(J.id,Q);for(let Z of J.nodeIds){let z=K.nodes.get(Z);if(z){let B=X6(Z,z.label,z.shape);$.setNode(Z,{label:z.label,width:B.width,height:B.height}),$.setParent(Z,J.id)}}for(let Z of J.children)D6($,Z,K,J.id)}function _7($,J,K){for(let B of $.children)_7(B,J,K);let Q=[...$.nodeIds,...$.children.map((B)=>B.id)];if(Q.length===0){J.set($.id,$.id),K.set($.id,$.id);return}let Z=Q[0],z=Q[Q.length-1];J.set($.id,J.get(Z)??Z),K.set($.id,K.get(z)??z)}function F7($,J){let K=$.classAssignments.get(J),Q=K?$.classDefs.get(K):void 0,Z=$.nodeStyles.get(J);if(!Q&&!Z)return;return{...Q,...Z}}function I6($,J){for(let K of $.nodeIds)J.add(K);for(let K of $.children)I6(K,J)}function b9($,J,K,Q){let Z=[],z=[],B=new Set;for(let M of J.subgraphs)T6(M,B);let U=new Set;if(Q)for(let M of Q.values())for(let Y of M.nodeIds)U.add(Y);for(let M of $.nodes()){if(B.has(M))continue;let Y=J.nodes.get(M);if(!Y)continue;let D=$.node(M);if(!D)continue;let C=D4(D.x,D.y,D.width,D.height);Z.push({id:M,label:Y.label,shape:Y.shape,x:C.x,y:C.y,width:D.width,height:D.height,inlineStyle:F7(J,M)})}for(let M of J.subgraphs)z.push(C6($,M));let j=J.direction==="TD"||J.direction==="TB"||J.direction==="BT",G=$.edges().map((M)=>{let Y=$.edge(M),D=J.edges[Y._index],C=Y.points??[];if(C.length>0){let b=J.nodes.get(M.v)?.shape;if(b==="diamond"){let X=$.node(M.v);C[0]=o4(C[0],X.x,X.y,X.width/2,X.height/2)}else if(b&&V6.has(b)){let X=$.node(M.v);C[0]=s4(C[0],X.x,X.y,Math.min(X.width,X.height)/2)}let f=J.nodes.get(M.w)?.shape;if(f==="diamond"){let X=$.node(M.w),I=C.length-1;C[I]=o4(C[I],X.x,X.y,X.width/2,X.height/2)}else if(f&&V6.has(f)){let X=$.node(M.w),I=C.length-1;C[I]=s4(C[I],X.x,X.y,Math.min(X.width,X.height)/2)}}let y=k4(C,j),A=J.nodes.get(M.v)?.shape,q=J.nodes.get(M.w)?.shape,O=A&&!z6.has(A)||!A?(()=>{let b=$.node(M.v);return b?{cx:b.x,cy:b.y,hw:b.width/2,hh:b.height/2}:null})():null,k=q&&!z6.has(q)||!q?(()=>{let b=$.node(M.w);return b?{cx:b.x,cy:b.y,hw:b.width/2,hh:b.height/2}:null})():null,v=b4(y,O,k),u;if(D.label&&Y.x!=null&&Y.y!=null)u={x:Y.x,y:Y.y};return{source:D.source,target:D.target,label:D.label,style:D.style,hasArrowStart:D.hasArrowStart,hasArrowEnd:D.hasArrowEnd,points:v,labelPosition:u}});if(Q&&Q.size>0){let M=new Map;for(let Y of Z)M.set(Y.id,{cx:Y.x+Y.width/2,cy:Y.y+Y.height/2});for(let[Y,D]of Q){let C=$.node(Y);if(!C)continue;let y=D4(C.x,C.y,C.width,C.height);for(let q of D.nodes){let O={...q,x:q.x+y.x,y:q.y+y.y};Z.push(O),M.set(O.id,{cx:O.x+O.width/2,cy:O.y+O.height/2})}for(let q of D.edges)G.push({...q,points:q.points.map((O)=>({x:O.x+y.x,y:O.y+y.y})),labelPosition:q.labelPosition?{x:q.labelPosition.x+y.x,y:q.labelPosition.y+y.y}:void 0});let A=W7(z,Y);if(A&&D.groups.length>0)A.children=D.groups.map((q)=>M7(q,y.x,y.y))}for(let Y of G){if(U.has(Y.source)&&U.has(Y.target))continue;let D=!1;if(U.has(Y.source)){let C=M.get(Y.source);if(C&&Y.points.length>0)Y.points[0]={x:C.cx,y:C.cy},D=!0}if(U.has(Y.target)){let C=M.get(Y.target);if(C&&Y.points.length>0)Y.points[Y.points.length-1]={x:C.cx,y:C.cy},D=!0}if(D)Y.points=k4(Y.points,j)}}let F=a.groupHeader+16;x9(z,F);let H=H7(z),V=[...Z.map((M)=>M.y),...H.map((M)=>M.y)],P=V.length>0?Math.min(...V):K,W=$.graph().width??800,_=$.graph().height??600;if(P<K){let M=K-P;for(let Y of Z)Y.y+=M;for(let Y of G){for(let D of Y.points)D.y+=M;if(Y.labelPosition)Y.labelPosition.y+=M}for(let Y of H)Y.y+=M;_+=M}let R=Math.max(...Z.map((M)=>M.y+M.height),...H.map((M)=>M.y+M.height),...G.flatMap((M)=>M.points.map((Y)=>Y.y)));if(R+K>_)_=R+K;return{width:W,height:_,nodes:Z,edges:G,groups:z}}function C6($,J){let K=$.node(J.id),Q=K?D4(K.x,K.y,K.width,K.height):{x:0,y:0};return{id:J.id,label:J.label,x:Q.x,y:Q.y,width:K?.width??0,height:K?.height??0,children:J.children.map((Z)=>C6($,Z))}}function x9($,J){for(let K of $)P7(K,J)}function P7($,J){for(let K of $.children)P7(K,J);if($.children.length>0){let K=$.y,Q=$.y+$.height;for(let Z of $.children)K=Math.min(K,Z.y),Q=Math.max(Q,Z.y+Z.height);$.height=Q-K,$.y=K}if($.label){let K=J+B7;$.y-=K,$.height+=K}}function H7($){let J=[];for(let K of $)J.push(K),J.push(...H7(K.children));return J}function W7($,J){for(let K of $){if(K.id===J)return K;let Q=W7(K.children,J);if(Q)return Q}return}function M7($,J,K){return{...$,x:$.x+J,y:$.y+K,children:$.children.map((Q)=>M7(Q,J,K))}}function T6($,J){J.add($.id);for(let K of $.children)T6(K,J)}function Y7($,J,K="Inter",Q=!1){let Z=[];Z.push(T4($.width,$.height,J,Q)),Z.push(C4(K,!1)),Z.push("<defs>"),Z.push(y9()),Z.push("</defs>");for(let z of $.groups)Z.push(A7(z,K));for(let z of $.edges)Z.push(v9(z));for(let z of $.edges)if(z.label)Z.push(m9(z,K));for(let z of $.nodes)Z.push(c9(z));for(let z of $.nodes)Z.push(Q$(z,K));return Z.push("</svg>"),Z.join(`
`)}function y9(){let $=m4.width,J=m4.height;return`  <marker id="arrowhead" markerWidth="${$}" markerHeight="${J}" refX="${$}" refY="${J/2}" orient="auto">
    <polygon points="0 0, ${$} ${J/2}, 0 ${J}" fill="var(--_arrow)" />
  </marker>
  <marker id="arrowhead-start" markerWidth="${$}" markerHeight="${J}" refX="0" refY="${J/2}" orient="auto-start-reverse">
    <polygon points="${$} 0, 0 ${J/2}, ${$} ${J}" fill="var(--_arrow)" />
  </marker>`}function A7($,J){let K=a.groupHeader+16,Q=[];Q.push(`<rect x="${$.x}" y="${$.y}" width="${$.width}" height="${$.height}" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`),Q.push(`<rect x="${$.x}" y="${$.y}" width="${$.width}" height="${K}" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`),Q.push(`<text x="${$.x+12}" y="${$.y+K/2}" dy="${G4}" font-size="${a.groupHeader}" font-weight="${e.groupHeader}" fill="var(--_text-sec)">${L6($.label)}</text>`);for(let Z of $.children)Q.push(A7(Z,J));return Q.join(`
`)}function v9($){if($.points.length<2)return"";let J=u9($.points),K=$.style==="dotted"?' stroke-dasharray="4 4"':"",Q=$.style==="thick"?Z4.connector*2:Z4.connector,Z="";if($.hasArrowEnd)Z+=' marker-end="url(#arrowhead)"';if($.hasArrowStart)Z+=' marker-start="url(#arrowhead-start)"';return`<polyline points="${J}" fill="none" stroke="var(--_line)" stroke-width="${Q}"${K}${Z} />`}function u9($){return $.map((J)=>`${J.x},${J.y}`).join(" ")}function m9($,J){let K=$.labelPosition??h9($.points),Q=$.label,Z=z4(Q,a.edgeLabel,e.edgeLabel),z=8,B=Z+16,U=a.edgeLabel+16;return`<rect x="${K.x-B/2}" y="${K.y-U/2}" width="${B}" height="${U}" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="${K.x}" y="${K.y}" text-anchor="middle" dy="${G4}" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${L6(Q)}</text>`}function h9($){if($.length===0)return{x:0,y:0};if($.length===1)return $[0];let J=0;for(let Q=1;Q<$.length;Q++)J+=R7($[Q-1],$[Q]);let K=J/2;for(let Q=1;Q<$.length;Q++){let Z=R7($[Q-1],$[Q]);if(K<=Z){let z=K/Z;return{x:$[Q-1].x+z*($[Q].x-$[Q-1].x),y:$[Q-1].y+z*($[Q].y-$[Q-1].y)}}K-=Z}return $[$.length-1]}function R7($,J){return Math.sqrt((J.x-$.x)**2+(J.y-$.y)**2)}function c9($){let{x:J,y:K,width:Q,height:Z,shape:z,inlineStyle:B}=$,U=B?.fill??"var(--_node-fill)",j=B?.stroke??"var(--_node-stroke)",G=B?.["stroke-width"]??String(Z4.innerBox);switch(z){case"diamond":return g9(J,K,Q,Z,U,j,G);case"rounded":return l9(J,K,Q,Z,U,j,G);case"stadium":return d9(J,K,Q,Z,U,j,G);case"circle":return n9(J,K,Q,Z,U,j,G);case"subroutine":return o9(J,K,Q,Z,U,j,G);case"doublecircle":return s9(J,K,Q,Z,U,j,G);case"hexagon":return i9(J,K,Q,Z,U,j,G);case"cylinder":return a9(J,K,Q,Z,U,j,G);case"asymmetric":return t9(J,K,Q,Z,U,j,G);case"trapezoid":return r9(J,K,Q,Z,U,j,G);case"trapezoid-alt":return e9(J,K,Q,Z,U,j,G);case"state-start":return $$(J,K,Q,Z);case"state-end":return J$(J,K,Q,Z);case"rectangle":default:return p9(J,K,Q,Z,U,j,G)}}function p9($,J,K,Q,Z,z,B){return`<rect x="${$}" y="${J}" width="${K}" height="${Q}" rx="0" ry="0" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function l9($,J,K,Q,Z,z,B){return`<rect x="${$}" y="${J}" width="${K}" height="${Q}" rx="6" ry="6" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function d9($,J,K,Q,Z,z,B){let U=Q/2;return`<rect x="${$}" y="${J}" width="${K}" height="${Q}" rx="${U}" ry="${U}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function n9($,J,K,Q,Z,z,B){let U=$+K/2,j=J+Q/2,G=Math.min(K,Q)/2;return`<circle cx="${U}" cy="${j}" r="${G}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function g9($,J,K,Q,Z,z,B){let U=$+K/2,j=J+Q/2,G=K/2,F=Q/2;return`<polygon points="${[`${U},${j-F}`,`${U+G},${j}`,`${U},${j+F}`,`${U-G},${j}`].join(" ")}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function o9($,J,K,Q,Z,z,B){return`<rect x="${$}" y="${J}" width="${K}" height="${Q}" rx="0" ry="0" fill="${Z}" stroke="${z}" stroke-width="${B}" />
<line x1="${$+8}" y1="${J}" x2="${$+8}" y2="${J+Q}" stroke="${z}" stroke-width="${B}" />
<line x1="${$+K-8}" y1="${J}" x2="${$+K-8}" y2="${J+Q}" stroke="${z}" stroke-width="${B}" />`}function s9($,J,K,Q,Z,z,B){let U=$+K/2,j=J+Q/2,G=Math.min(K,Q)/2,F=G-5;return`<circle cx="${U}" cy="${j}" r="${G}" fill="${Z}" stroke="${z}" stroke-width="${B}" />
<circle cx="${U}" cy="${j}" r="${F}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function i9($,J,K,Q,Z,z,B){let U=Q/4;return`<polygon points="${[`${$+U},${J}`,`${$+K-U},${J}`,`${$+K},${J+Q/2}`,`${$+K-U},${J+Q}`,`${$+U},${J+Q}`,`${$},${J+Q/2}`].join(" ")}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function a9($,J,K,Q,Z,z,B){let j=$+K/2,G=J+7,F=Q-14;return`<rect x="${$}" y="${G}" width="${K}" height="${F}" fill="${Z}" stroke="none" />
<line x1="${$}" y1="${G}" x2="${$}" y2="${G+F}" stroke="${z}" stroke-width="${B}" />
<line x1="${$+K}" y1="${G}" x2="${$+K}" y2="${G+F}" stroke="${z}" stroke-width="${B}" />
<ellipse cx="${j}" cy="${J+Q-7}" rx="${K/2}" ry="7" fill="${Z}" stroke="${z}" stroke-width="${B}" />
<ellipse cx="${j}" cy="${G}" rx="${K/2}" ry="7" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function t9($,J,K,Q,Z,z,B){return`<polygon points="${[`${$+12},${J}`,`${$+K},${J}`,`${$+K},${J+Q}`,`${$+12},${J+Q}`,`${$},${J+Q/2}`].join(" ")}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function r9($,J,K,Q,Z,z,B){let U=K*0.15;return`<polygon points="${[`${$+U},${J}`,`${$+K-U},${J}`,`${$+K},${J+Q}`,`${$},${J+Q}`].join(" ")}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function e9($,J,K,Q,Z,z,B){let U=K*0.15;return`<polygon points="${[`${$},${J}`,`${$+K},${J}`,`${$+K-U},${J+Q}`,`${$+U},${J+Q}`].join(" ")}" fill="${Z}" stroke="${z}" stroke-width="${B}" />`}function $$($,J,K,Q){let Z=$+K/2,z=J+Q/2,B=Math.min(K,Q)/2-2;return`<circle cx="${Z}" cy="${z}" r="${B}" fill="var(--_text)" stroke="none" />`}function J$($,J,K,Q){let Z=$+K/2,z=J+Q/2,B=Math.min(K,Q)/2-2,U=B-4;return`<circle cx="${Z}" cy="${z}" r="${B}" fill="none" stroke="var(--_text)" stroke-width="${Z4.innerBox*2}" />
<circle cx="${Z}" cy="${z}" r="${U}" fill="var(--_text)" stroke="none" />`}function Q$($,J){if($.shape==="state-start"||$.shape==="state-end"){if(!$.label)return""}let K=$.x+$.width/2,Q=$.y+$.height/2,Z=$.inlineStyle?.color??"var(--_text)";return`<text x="${K}" y="${Q}" text-anchor="middle" dy="${G4}" font-size="${a.nodeLabel}" font-weight="${e.nodeLabel}" fill="${Z}">${L6($.label)}</text>`}function L6($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var J4={padding:30,actorGap:140,actorHeight:40,actorPadX:16,headerGap:20,messageRowHeight:40,selfMessageHeight:30,activationWidth:10,blockPadX:10,blockPadTop:40,blockPadBottom:8,blockHeaderExtra:28,dividerExtra:24,noteWidth:120,notePadding:8,noteGap:10};function q7($,J={}){if($.actors.length===0)return{width:0,height:0,actors:[],lifelines:[],messages:[],activations:[],blocks:[],notes:[]};let K=$.actors.map((A)=>{let q=z4(A.label,a.nodeLabel,e.nodeLabel);return Math.max(q+J4.actorPadX*2,80)}),Q=[],Z=J4.padding+K[0]/2;for(let A=0;A<$.actors.length;A++){if(A>0){let q=Math.max(J4.actorGap,(K[A-1]+K[A])/2+40);Z+=q}Q.push(Z)}let z=new Map;for(let A=0;A<$.actors.length;A++)z.set($.actors[A].id,A);let B=J4.padding,U=$.actors.map((A,q)=>({id:A.id,label:A.label,type:A.type,x:Q[q],y:B,width:K[q],height:J4.actorHeight})),j=B+J4.actorHeight+J4.headerGap,G=[],F=new Map;for(let A of $.blocks){let q=F.get(A.startIndex)??0;F.set(A.startIndex,Math.max(q,J4.blockHeaderExtra));for(let O of A.dividers){let k=F.get(O.index)??0;F.set(O.index,Math.max(k,J4.dividerExtra))}}let H=new Map,V=[];for(let A=0;A<$.messages.length;A++){let q=$.messages[A],O=z.get(q.from)??0,k=z.get(q.to)??0,v=q.from===q.to,u=F.get(A)??0;if(u>0)j+=u;let b=Q[O],f=Q[k];if(G.push({from:q.from,to:q.to,label:q.label,lineStyle:q.lineStyle,arrowHead:q.arrowHead,x1:b,x2:f,y:j,isSelf:v}),q.activate){if(!H.has(q.to))H.set(q.to,[]);H.get(q.to).push(j)}if(q.deactivate){let X=H.get(q.from);if(X&&X.length>0){let I=X.pop(),w=z.get(q.from)??0;V.push({actorId:q.from,x:Q[w]-J4.activationWidth/2,topY:I,bottomY:j,width:J4.activationWidth})}}j+=v?J4.selfMessageHeight+J4.messageRowHeight:J4.messageRowHeight}for(let[A,q]of H)for(let O of q){let k=z.get(A)??0;V.push({actorId:A,x:Q[k]-J4.activationWidth/2,topY:O,bottomY:j-J4.messageRowHeight/2,width:J4.activationWidth})}let P=$.blocks.map((A)=>{let q=G[A.startIndex],O=G[A.endIndex],k=(q?.y??j)-J4.blockPadTop,v=(O?.y??j)+J4.blockPadBottom+12,u=new Set;for(let S=A.startIndex;S<=A.endIndex;S++){let T=$.messages[S];if(T)u.add(z.get(T.from)??0),u.add(z.get(T.to)??0)}if(u.size===0)for(let S=0;S<$.actors.length;S++)u.add(S);let b=Math.min(...u),f=Math.max(...u),X=Q[b]-K[b]/2-J4.blockPadX,I=Q[f]+K[f]/2+J4.blockPadX,w=A.dividers.map((S)=>{let T=G[S.index],c=T?.y??j,i=28;if(S.label&&T?.label){let E=`[${S.label}]`,d=z4(E,a.edgeLabel,e.edgeLabel),l=X+8,p=l+d,h=z4(T.label,a.edgeLabel,e.edgeLabel),m=T.isSelf?T.x1+36:(T.x1+T.x2)/2-h/2,n=m+h;if(p>m&&l<n)i=36}return{y:c-i,label:S.label}});return{type:A.type,label:A.label,x:X,y:k,width:I-X,height:v-k,dividers:w}}),W=$.notes.map((A)=>{let q=Math.max(J4.noteWidth,z4(A.text,a.edgeLabel,e.edgeLabel)+J4.notePadding*2),O=a.edgeLabel+J4.notePadding*2,v=(G[A.afterIndex]?.y??B+J4.actorHeight)+4,u=z.get(A.actorIds[0]??"")??0,b;if(A.position==="left")b=Q[u]-K[u]/2-q-J4.noteGap;else if(A.position==="right")b=Q[u]+K[u]/2+J4.noteGap;else if(A.actorIds.length>1){let f=z.get(A.actorIds[A.actorIds.length-1]??"")??u;b=(Q[u]+Q[f])/2-q/2}else b=Q[u]-q/2;return{text:A.text,x:b,y:v,width:q,height:O}}),_=j+J4.padding,R=J4.padding,M=0;for(let A of U)R=Math.min(R,A.x-A.width/2),M=Math.max(M,A.x+A.width/2);for(let A of P)R=Math.min(R,A.x),M=Math.max(M,A.x+A.width);for(let A of W)R=Math.min(R,A.x),M=Math.max(M,A.x+A.width);let Y=R<J4.padding?J4.padding-R:0;if(Y>0){for(let A of U)A.x+=Y;for(let A of G)A.x1+=Y,A.x2+=Y;for(let A of V)A.x+=Y;for(let A of P)A.x+=Y;for(let A of W)A.x+=Y;for(let A=0;A<Q.length;A++)Q[A]+=Y}let D=$.actors.map((A,q)=>({actorId:A.id,x:Q[q],topY:B+J4.actorHeight,bottomY:_-J4.padding})),C=M+Y+J4.padding,y=_;return{width:Math.max(C,200),height:Math.max(y,100),actors:U,lifelines:D,messages:G,activations:V,blocks:P,notes:W}}function O7($,J,K="Inter",Q=!1){let Z=[];Z.push(T4($.width,$.height,J,Q)),Z.push(C4(K,!1)),Z.push("<defs>"),Z.push(K$()),Z.push("</defs>");for(let z of $.blocks)Z.push(B$(z));for(let z of $.lifelines)Z.push(U$(z));for(let z of $.activations)Z.push(V$(z));for(let z of $.messages)Z.push(z$(z));for(let z of $.notes)Z.push(j$(z));for(let z of $.actors)Z.push(Z$(z));return Z.push("</svg>"),Z.join(`
`)}function K$(){let $=m4.width,J=m4.height;return`  <marker id="seq-arrow" markerWidth="${$}" markerHeight="${J}" refX="${$}" refY="${J/2}" orient="auto-start-reverse">
    <polygon points="0 0, ${$} ${J/2}, 0 ${J}" fill="var(--_arrow)" />
  </marker>
  <marker id="seq-arrow-open" markerWidth="${$}" markerHeight="${J}" refX="${$}" refY="${J/2}" orient="auto-start-reverse">
    <polyline points="0 0, ${$} ${J/2}, 0 ${J}" fill="none" stroke="var(--_arrow)" stroke-width="1" />
  </marker>`}function Z$($){let{x:J,y:K,width:Q,height:Z,label:z,type:B}=$;if(B==="actor"){let j=Z/24*0.9,G=J-12*j,F=K+(Z-24*j)/2,H=Z4.outerBox/j,V="var(--_line)";return`<g transform="translate(${G},${F}) scale(${j})">
  <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" fill="none" stroke="var(--_line)" stroke-width="${H}" />
  <path d="M15 10C15 11.6569 13.6569 13 12 13C10.3431 13 9 11.6569 9 10C9 8.34315 10.3431 7 12 7C13.6569 7 15 8.34315 15 10Z" fill="none" stroke="var(--_line)" stroke-width="${H}" />
  <path d="M5.62842 18.3563C7.08963 17.0398 9.39997 16 12 16C14.6 16 16.9104 17.0398 18.3716 18.3563" fill="none" stroke="var(--_line)" stroke-width="${H}" />
</g>
<text x="${J}" y="${K+Z+14}" text-anchor="middle" font-size="${a.nodeLabel}" font-weight="${e.nodeLabel}" fill="var(--_text)">${x4(z)}</text>`}return`<rect x="${J-Q/2}" y="${K}" width="${Q}" height="${Z}" rx="4" ry="4" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />
<text x="${J}" y="${K+Z/2}" text-anchor="middle" dy="${G4}" font-size="${a.nodeLabel}" font-weight="${e.nodeLabel}" fill="var(--_text)">${x4(z)}</text>`}function U$($){return`<line x1="${$.x}" y1="${$.topY}" x2="${$.x}" y2="${$.bottomY}" stroke="var(--_line)" stroke-width="0.75" stroke-dasharray="6 4" />`}function V$($){return`<rect x="${$.x}" y="${$.topY}" width="${$.width}" height="${$.bottomY-$.topY}" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="${Z4.innerBox}" />`}function z$($){let J=[],K=$.lineStyle==="dashed"?' stroke-dasharray="6 4"':"",Q=$.arrowHead==="filled"?"seq-arrow":"seq-arrow-open";if($.isSelf)J.push(`<polyline points="${$.x1},${$.y} ${$.x1+30},${$.y} ${$.x1+30},${$.y+20} ${$.x2},${$.y+20}" fill="none" stroke="var(--_line)" stroke-width="${Z4.connector}"${K} marker-end="url(#${Q})" />`),J.push(`<text x="${$.x1+30+6}" y="${$.y+10}" dy="${G4}" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${x4($.label)}</text>`);else{J.push(`<line x1="${$.x1}" y1="${$.y}" x2="${$.x2}" y2="${$.y}" stroke="var(--_line)" stroke-width="${Z4.connector}"${K} marker-end="url(#${Q})" />`);let Z=($.x1+$.x2)/2;J.push(`<text x="${Z}" y="${$.y-6}" text-anchor="middle" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${x4($.label)}</text>`)}return J.join(`
`)}function B$($){let J=[];J.push(`<rect x="${$.x}" y="${$.y}" width="${$.width}" height="${$.height}" rx="0" ry="0" fill="none" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`);let K=`${$.type}${$.label?` [${$.label}]`:""}`,Q=z4(K,a.edgeLabel,e.groupHeader)+16,Z=18;J.push(`<rect x="${$.x}" y="${$.y}" width="${Q}" height="${Z}" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`),J.push(`<text x="${$.x+6}" y="${$.y+Z/2}" dy="${G4}" font-size="${a.edgeLabel}" font-weight="${e.groupHeader}" fill="var(--_text-sec)">${x4(K)}</text>`);for(let z of $.dividers)if(J.push(`<line x1="${$.x}" y1="${z.y}" x2="${$.x+$.width}" y2="${z.y}" stroke="var(--_line)" stroke-width="0.75" stroke-dasharray="6 4" />`),z.label)J.push(`<text x="${$.x+8}" y="${z.y+14}" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">[${x4(z.label)}]</text>`);return J.join(`
`)}function j$($){return`<rect x="${$.x}" y="${$.y}" width="${$.width}" height="${$.height}" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="${Z4.innerBox}" />
<polygon points="${$.x+$.width-6},${$.y} ${$.x+$.width},${$.y+6} ${$.x+$.width-6},${$.y+6}" fill="var(--_inner-stroke)" />
<text x="${$.x+$.width/2}" y="${$.y+$.height/2}" text-anchor="middle" dy="${G4}" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${x4($.text)}</text>`}function x4($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var E6=G6(Z6(),1);var j4={padding:40,boxPadX:8,headerBaseHeight:32,annotationHeight:16,memberRowHeight:20,sectionPadY:8,emptySectionHeight:8,minWidth:120,memberFontSize:11,memberFontWeight:400,nodeSpacing:40,layerSpacing:60};async function D7($,J={}){if($.classes.length===0)return{width:0,height:0,classes:[],relationships:[]};let K=new Map;for(let U of $.classes){let j=U.annotation?j4.headerBaseHeight+j4.annotationHeight:j4.headerBaseHeight,G=U.attributes.length>0?U.attributes.length*j4.memberRowHeight+j4.sectionPadY:j4.emptySectionHeight,F=U.methods.length>0?U.methods.length*j4.memberRowHeight+j4.sectionPadY:j4.emptySectionHeight,H=z4(U.label,a.nodeLabel,e.nodeLabel),V=X7(U.attributes),P=X7(U.methods),W=Math.max(j4.minWidth,H+j4.boxPadX*2,V+j4.boxPadX*2,P+j4.boxPadX*2),_=j+G+F;K.set(U.id,{width:W,height:_,headerHeight:j,attrHeight:G,methodHeight:F})}let Q=new E6.default.graphlib.Graph({directed:!0});Q.setGraph({rankdir:"TB",acyclicer:"greedy",nodesep:j4.nodeSpacing,ranksep:j4.layerSpacing,marginx:j4.padding,marginy:j4.padding}),Q.setDefaultEdgeLabel(()=>({}));for(let U of $.classes){let j=K.get(U.id);Q.setNode(U.id,{width:j.width,height:j.height})}for(let U=0;U<$.relationships.length;U++){let j=$.relationships[U],G={_index:U};if(j.label)G.label=j.label,G.width=z4(j.label,a.edgeLabel,e.edgeLabel)+8,G.height=a.edgeLabel+6,G.labelpos="c";Q.setEdge(j.from,j.to,G)}try{E6.default.layout(Q)}catch(U){let j=U instanceof Error?U.message:String(U);throw new Error(`Dagre layout failed (class diagram): ${j}`)}let Z=new Map;for(let U of $.classes)Z.set(U.id,U);let z=$.classes.map((U)=>{let j=Q.node(U.id),G=K.get(U.id),F=D4(j.x,j.y,j.width,j.height);return{id:U.id,label:U.label,annotation:U.annotation,attributes:U.attributes,methods:U.methods,x:F.x,y:F.y,width:j.width??G.width,height:j.height??G.height,headerHeight:G.headerHeight,attrHeight:G.attrHeight,methodHeight:G.methodHeight}}),B=Q.edges().map((U)=>{let j=Q.edge(U),G=$.relationships[j._index],F=j.points??[],H=k4(F,!0),V=Q.node(U.v),P=Q.node(U.w),W=b4(H,V?{cx:V.x,cy:V.y,hw:V.width/2,hh:V.height/2}:null,P?{cx:P.x,cy:P.y,hw:P.width/2,hh:P.height/2}:null),_;if(G.label&&j.x!=null&&j.y!=null)_={x:j.x,y:j.y};return{from:G.from,to:G.to,type:G.type,markerAt:G.markerAt,label:G.label,fromCardinality:G.fromCardinality,toCardinality:G.toCardinality,points:W,labelPosition:_}});return{width:Q.graph().width??600,height:Q.graph().height??400,classes:z,relationships:B}}function X7($){if($.length===0)return 0;let J=0;for(let K of $){let Q=G$(K),Z=U6(Q,j4.memberFontSize);if(Z>J)J=Z}return J}function G$($){let J=$.visibility?`${$.visibility} `:"",K=$.type?`: ${$.type}`:"";return`${J}${$.name}${K}`}var B6={memberSize:11,memberWeight:400,annotationSize:10,annotationWeight:500};function T7($,J,K="Inter",Q=!1){let Z=[];Z.push(T4($.width,$.height,J,Q)),Z.push(C4(K,!0)),Z.push("<defs>"),Z.push(_$()),Z.push("</defs>");for(let z of $.relationships)Z.push(P$(z));for(let z of $.classes)Z.push(F$(z));for(let z of $.relationships)Z.push(M$(z));return Z.push("</svg>"),Z.join(`
`)}function _$(){return`  <marker id="cls-inherit" markerWidth="12" markerHeight="10" refX="12" refY="5" orient="auto-start-reverse">
    <polygon points="0 0, 12 5, 0 10" fill="var(--bg)" stroke="var(--_arrow)" stroke-width="1.5" />
  </marker>
  <marker id="cls-composition" markerWidth="12" markerHeight="10" refX="0" refY="5" orient="auto-start-reverse">
    <polygon points="6 0, 12 5, 6 10, 0 5" fill="var(--_arrow)" stroke="var(--_arrow)" stroke-width="1" />
  </marker>
  <marker id="cls-aggregation" markerWidth="12" markerHeight="10" refX="0" refY="5" orient="auto-start-reverse">
    <polygon points="6 0, 12 5, 6 10, 0 5" fill="var(--bg)" stroke="var(--_arrow)" stroke-width="1.5" />
  </marker>
  <marker id="cls-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto-start-reverse">
    <polyline points="0 0, 8 3, 0 6" fill="none" stroke="var(--_arrow)" stroke-width="1.5" />
  </marker>`}function F$($){let{x:J,y:K,width:Q,height:Z,headerHeight:z,attrHeight:B,methodHeight:U}=$,j=[];j.push(`<rect x="${J}" y="${K}" width="${Q}" height="${Z}" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`),j.push(`<rect x="${J}" y="${K}" width="${Q}" height="${z}" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`);let G=K+z/2;if($.annotation){let P=K+12;j.push(`<text x="${J+Q/2}" y="${P}" text-anchor="middle" dy="${G4}" font-size="${B6.annotationSize}" font-weight="${B6.annotationWeight}" font-style="italic" fill="var(--_text-muted)">&lt;&lt;${S4($.annotation)}&gt;&gt;</text>`),G=K+z/2+6}j.push(`<text x="${J+Q/2}" y="${G}" text-anchor="middle" dy="${G4}" font-size="${a.nodeLabel}" font-weight="700" fill="var(--_text)">${S4($.label)}</text>`);let F=K+z;j.push(`<line x1="${J}" y1="${F}" x2="${J+Q}" y2="${F}" stroke="var(--_node-stroke)" stroke-width="${Z4.innerBox}" />`);let H=20;for(let P=0;P<$.attributes.length;P++){let W=$.attributes[P],_=F+4+P*H+H/2;j.push(I7(W,J+j4.boxPadX,_))}let V=F+B;j.push(`<line x1="${J}" y1="${V}" x2="${J+Q}" y2="${V}" stroke="var(--_node-stroke)" stroke-width="${Z4.innerBox}" />`);for(let P=0;P<$.methods.length;P++){let W=$.methods[P],_=V+4+P*H+H/2;j.push(I7(W,J+j4.boxPadX,_))}return j.join(`
`)}function I7($,J,K){let Q=$.isAbstract?' font-style="italic"':"",Z=$.isStatic?' text-decoration="underline"':"",z=[];if($.visibility)z.push(`<tspan fill="var(--_text-faint)">${S4($.visibility)} </tspan>`);if(z.push(`<tspan fill="var(--_text-sec)">${S4($.name)}</tspan>`),$.type)z.push('<tspan fill="var(--_text-faint)">: </tspan>'),z.push(`<tspan fill="var(--_text-muted)">${S4($.type)}</tspan>`);return`<text x="${J}" y="${K}" class="mono" dy="${G4}" font-size="${B6.memberSize}" font-weight="${B6.memberWeight}"${Q}${Z}>${z.join("")}</text>`}function P$($){if($.points.length<2)return"";let J=$.points.map((z)=>`${z.x},${z.y}`).join(" "),Q=$.type==="dependency"||$.type==="realization"?' stroke-dasharray="6 4"':"",Z=H$($.type,$.markerAt);return`<polyline points="${J}" fill="none" stroke="var(--_line)" stroke-width="${Z4.connector}"${Q}${Z} />`}function H$($,J){let K=W$($);if(!K)return"";if(J==="from")return` marker-start="url(#${K})"`;else return` marker-end="url(#${K})"`}function W$($){switch($){case"inheritance":case"realization":return"cls-inherit";case"composition":return"cls-composition";case"aggregation":return"cls-aggregation";case"association":case"dependency":return"cls-arrow";default:return null}}function M$($){if(!$.label&&!$.fromCardinality&&!$.toCardinality)return"";if($.points.length<2)return"";let J=[];if($.label){let K=$.labelPosition??R$($.points);J.push(`<text x="${K.x}" y="${K.y-8}" text-anchor="middle" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${S4($.label)}</text>`)}if($.fromCardinality){let K=$.points[0],Q=$.points[1],Z=C7(K,Q);J.push(`<text x="${K.x+Z.x}" y="${K.y+Z.y}" text-anchor="middle" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${S4($.fromCardinality)}</text>`)}if($.toCardinality){let K=$.points[$.points.length-1],Q=$.points[$.points.length-2],Z=C7(K,Q);J.push(`<text x="${K.x+Z.x}" y="${K.y+Z.y}" text-anchor="middle" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${S4($.toCardinality)}</text>`)}return J.join(`
`)}function R$($){if($.length===0)return{x:0,y:0};let J=Math.floor($.length/2);return $[J]}function C7($,J){let K=J.x-$.x,Q=J.y-$.y;if(Math.abs(K)>Math.abs(Q))return{x:K>0?14:-14,y:-10};return{x:-14,y:Q>0?14:-14}}function S4($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var N6=G6(Z6(),1);var W4={padding:40,boxPadX:12,headerHeight:32,rowHeight:22,minWidth:140,attrFontSize:11,attrFontWeight:400,nodeSpacing:50,layerSpacing:70};async function L7($,J={}){if($.entities.length===0)return{width:0,height:0,entities:[],relationships:[]};let K=new Map;for(let U of $.entities){let j=z4(U.label,a.nodeLabel,e.nodeLabel),G=0;for(let V of U.attributes){let P=`${V.type}  ${V.name}${V.keys.length>0?"  "+V.keys.join(","):""}`,W=U6(P,W4.attrFontSize);if(W>G)G=W}let F=Math.max(W4.minWidth,j+W4.boxPadX*2,G+W4.boxPadX*2),H=W4.headerHeight+Math.max(U.attributes.length,1)*W4.rowHeight;K.set(U.id,{width:F,height:H})}let Q=new N6.default.graphlib.Graph({directed:!0});Q.setGraph({rankdir:"LR",acyclicer:"greedy",nodesep:W4.nodeSpacing,ranksep:W4.layerSpacing,marginx:W4.padding,marginy:W4.padding}),Q.setDefaultEdgeLabel(()=>({}));for(let U of $.entities){let j=K.get(U.id);Q.setNode(U.id,{width:j.width,height:j.height})}for(let U=0;U<$.relationships.length;U++){let j=$.relationships[U];Q.setEdge(j.entity1,j.entity2,{_index:U,label:j.label,width:z4(j.label,a.edgeLabel,e.edgeLabel)+8,height:a.edgeLabel+6,labelpos:"c"})}try{N6.default.layout(Q)}catch(U){let j=U instanceof Error?U.message:String(U);throw new Error(`Dagre layout failed (ER diagram): ${j}`)}let Z=new Map;for(let U of $.entities)Z.set(U.id,U);let z=$.entities.map((U)=>{let j=Q.node(U.id),G=D4(j.x,j.y,j.width,j.height);return{id:U.id,label:U.label,attributes:U.attributes,x:G.x,y:G.y,width:j.width??K.get(U.id).width,height:j.height??K.get(U.id).height,headerHeight:W4.headerHeight,rowHeight:W4.rowHeight}}),B=Q.edges().map((U)=>{let j=Q.edge(U),G=$.relationships[j._index],F=j.points??[],H=k4(F,!1),V=Q.node(U.v),P=Q.node(U.w),W=b4(H,V?{cx:V.x,cy:V.y,hw:V.width/2,hh:V.height/2}:null,P?{cx:P.x,cy:P.y,hw:P.width/2,hh:P.height/2}:null);return{entity1:G.entity1,entity2:G.entity2,cardinality1:G.cardinality1,cardinality2:G.cardinality2,label:G.label,identifying:G.identifying,points:W}});return{width:Q.graph().width??600,height:Q.graph().height??400,entities:z,relationships:B}}var I4={attrSize:11,attrWeight:400,keySize:9,keyWeight:600};function N7($,J,K="Inter",Q=!1){let Z=[];Z.push(T4($.width,$.height,J,Q)),Z.push(C4(K,!0)),Z.push("<defs>"),Z.push("</defs>");for(let z of $.relationships)Z.push(q$(z));for(let z of $.entities)Z.push(Y$(z));for(let z of $.relationships)Z.push(X$(z));for(let z of $.relationships)Z.push(O$(z));return Z.push("</svg>"),Z.join(`
`)}function Y$($){let{x:J,y:K,width:Q,height:Z,headerHeight:z,rowHeight:B,label:U,attributes:j}=$,G=[];G.push(`<rect x="${J}" y="${K}" width="${Q}" height="${Z}" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`),G.push(`<rect x="${J}" y="${K}" width="${Q}" height="${z}" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="${Z4.outerBox}" />`),G.push(`<text x="${J+Q/2}" y="${K+z/2}" text-anchor="middle" dy="${G4}" font-size="${a.nodeLabel}" font-weight="700" fill="var(--_text)">${j6(U)}</text>`);let F=K+z;G.push(`<line x1="${J}" y1="${F}" x2="${J+Q}" y2="${F}" stroke="var(--_node-stroke)" stroke-width="${Z4.innerBox}" />`);for(let H=0;H<j.length;H++){let V=j[H],P=F+H*B+B/2;G.push(A$(V,J,P,Q))}if(j.length===0)G.push(`<text x="${J+Q/2}" y="${F+B/2}" text-anchor="middle" dy="${G4}" font-size="${I4.attrSize}" fill="var(--_text-faint)" font-style="italic">(no attributes)</text>`);return G.join(`
`)}function A$($,J,K,Q){let Z=[],z=0;if($.keys.length>0){let j=$.keys.join(",");z=z4(j,I4.keySize,I4.keyWeight)+8,Z.push(`<rect x="${J+6}" y="${K-7}" width="${z}" height="14" rx="2" ry="2" fill="var(--_key-badge)" />`),Z.push(`<text x="${J+6+z/2}" y="${K}" text-anchor="middle" dy="${G4}" font-size="${I4.keySize}" font-weight="${I4.keyWeight}" fill="var(--_text-sec)">${$.keys.join(",")}</text>`)}let B=J+8+(z>0?z+6:0);Z.push(`<text x="${B}" y="${K}" class="mono" dy="${G4}" font-size="${I4.attrSize}" font-weight="${I4.attrWeight}"><tspan fill="var(--_text-muted)">${j6($.type)}</tspan></text>`);let U=J+Q-8;return Z.push(`<text x="${U}" y="${K}" class="mono" text-anchor="end" dy="${G4}" font-size="${I4.attrSize}" font-weight="${I4.attrWeight}"><tspan fill="var(--_text-sec)">${j6($.name)}</tspan></text>`),Z.join(`
`)}function q$($){if($.points.length<2)return"";let J=$.points.map((Q)=>`${Q.x},${Q.y}`).join(" "),K=!$.identifying?' stroke-dasharray="6 4"':"";return`<polyline points="${J}" fill="none" stroke="var(--_line)" stroke-width="${Z4.connector}"${K} />`}function O$($){if(!$.label||$.points.length<2)return"";let J=D$($.points),Q=z4($.label,a.edgeLabel,e.edgeLabel)+8,Z=a.edgeLabel+6;return`<rect x="${J.x-Q/2}" y="${J.y-Z/2}" width="${Q}" height="${Z}" rx="2" ry="2" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="${J.x}" y="${J.y}" text-anchor="middle" dy="${G4}" font-size="${a.edgeLabel}" font-weight="${e.edgeLabel}" fill="var(--_text-muted)">${j6($.label)}</text>`}function X$($){if($.points.length<2)return"";let J=[],K=$.points[0],Q=$.points[1];J.push(E7(K,Q,$.cardinality1));let Z=$.points[$.points.length-1],z=$.points[$.points.length-2];return J.push(E7(Z,z,$.cardinality2)),J.join(`
`)}function E7($,J,K){let Q=[],Z=Z4.connector+0.25,z=$.x-J.x,B=$.y-J.y,U=Math.sqrt(z*z+B*B);if(U===0)return"";let j=z/U,G=B/U,F=-G,H=j,V=$.x-j*4,P=$.y-G*4,W=$.x-j*16,_=$.y-G*16,R=K==="one"||K==="zero-one",M=K==="many"||K==="zero-many",Y=K==="zero-one"||K==="zero-many";if(R){Q.push(`<line x1="${V+F*6}" y1="${P+H*6}" x2="${V-F*6}" y2="${P-H*6}" stroke="var(--_line)" stroke-width="${Z}" />`);let C=V-j*4,y=P-G*4;Q.push(`<line x1="${C+F*6}" y1="${y+H*6}" x2="${C-F*6}" y2="${y-H*6}" stroke="var(--_line)" stroke-width="${Z}" />`)}if(M){let C=V,y=P;Q.push(`<line x1="${C+F*7}" y1="${y+H*7}" x2="${W}" y2="${_}" stroke="var(--_line)" stroke-width="${Z}" />`),Q.push(`<line x1="${C}" y1="${y}" x2="${W}" y2="${_}" stroke="var(--_line)" stroke-width="${Z}" />`),Q.push(`<line x1="${C-F*7}" y1="${y-H*7}" x2="${W}" y2="${_}" stroke="var(--_line)" stroke-width="${Z}" />`)}if(Y){let D=M?20:12,C=$.x-j*D,y=$.y-G*D;Q.push(`<circle cx="${C}" cy="${y}" r="4" fill="var(--bg)" stroke="var(--_line)" stroke-width="${Z}" />`)}return Q.join(`
`)}function D$($){if($.length===0)return{x:0,y:0};if($.length===1)return $[0];let J=0;for(let Z=1;Z<$.length;Z++){let z=$[Z].x-$[Z-1].x,B=$[Z].y-$[Z-1].y;J+=Math.sqrt(z*z+B*B)}if(J===0)return $[0];let K=J/2,Q=0;for(let Z=1;Z<$.length;Z++){let z=$[Z].x-$[Z-1].x,B=$[Z].y-$[Z-1].y,U=Math.sqrt(z*z+B*B);if(Q+U>=K){let j=U>0?(K-Q)/U:0;return{x:$[Z-1].x+z*j,y:$[Z-1].y+B*j}}Q+=U}return $[$.length-1]}function j6($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function I$($){let J=$.trim().split(`
`)[0]?.trim().toLowerCase()??"";if(/^sequencediagram\s*$/.test(J))return"sequence";if(/^classdiagram\s*$/.test(J))return"class";if(/^erdiagram\s*$/.test(J))return"er";return"flowchart"}function C$($){return{bg:$.bg??a4.bg,fg:$.fg??a4.fg,line:$.line,accent:$.accent,muted:$.muted,surface:$.surface,border:$.border}}async function k7($,J={}){let K=C$(J),Q=J.font??"Inter",Z=J.transparent??!1,z=I$($),B=$.split(`
`).map((U)=>U.trim()).filter((U)=>U.length>0&&!U.startsWith("%%"));switch(z){case"sequence":{let U=$6(B),j=q7(U,J);return O7(j,K,Q,Z)}case"class":{let U=J6(B),j=await D7(U,J);return T7(j,K,Q,Z)}case"er":{let U=Q6(B),j=await L7(U,J);return N7(j,K,Q,Z)}case"flowchart":default:{let U=p4($),j=await j7(U,J);return Y7(j,K,Q,Z)}}}window.__mermaid={renderMermaid:k7,renderMermaidAscii:q6,THEMES:F6};


  // ============================================================================
  // Client-side rendering + theme switching
  // ============================================================================

  var samples = [{"title":"Beautiful Mermaid","description":"Mermaid rendering, made beautiful.","source":"stateDiagram-v2\n    direction LR\n    [*] --> Input\n    Input --> Parse: DSL\n    Parse --> Layout: AST\n    Layout --> SVG: Vector\n    Layout --> ASCII: Text\n    SVG --> Theme\n    ASCII --> Theme\n    Theme --> Output\n    Output --> [*]","category":"Hero","options":{"transparent":true}},{"title":"Simple Flow","description":"Basic linear flow with three nodes connected by solid arrows.","source":"graph TD\n  A[Start] --> B[Process] --> C[End]","category":"Flowchart","options":{}},{"title":"Original Node Shapes","description":"Rectangle, rounded, diamond, stadium, and circle.","source":"graph LR\n  A[Rectangle] --> B(Rounded)\n  B --> C{Diamond}\n  C --> D([Stadium])\n  D --> E((Circle))","category":"Flowchart","options":{}},{"title":"Batch 1 Shapes","description":"Subroutine `[[text]]`, double circle `(((text)))`, and hexagon `{{text}}`.","source":"graph LR\n  A[[Subroutine]] --> B(((Double Circle)))\n  B --> C{{Hexagon}}","category":"Flowchart","options":{}},{"title":"Batch 2 Shapes","description":"Cylinder `[(text)]`, asymmetric `>text]`, trapezoid `[/text\\]`, and inverse trapezoid `[\\text/]`.","source":"graph LR\n  A[(Database)] --> B>Flag Shape]\n  B --> C[/Wider Bottom\\]\n  C --> D[\\Wider Top/]","category":"Flowchart","options":{}},{"title":"All 12 Flowchart Shapes","description":"Every supported flowchart shape in a single diagram.","source":"graph LR\n  A[Rectangle] --> B(Rounded)\n  B --> C{Diamond}\n  C --> D([Stadium])\n  D --> E((Circle))\n  E --> F[[Subroutine]]\n  F --> G(((Double Circle)))\n  G --> H{{Hexagon}}\n  H --> I[(Database)]\n  I --> J>Flag]\n  J --> K[/Trapezoid\\]\n  K --> L[\\Inverse Trap/]","category":"Flowchart","options":{}},{"title":"All Edge Styles","description":"Solid, dotted, and thick arrows with labels.","source":"graph TD\n  A[Source] -->|solid| B[Target 1]\n  A -.->|dotted| C[Target 2]\n  A ==>|thick| D[Target 3]","category":"Flowchart","options":{}},{"title":"No-Arrow Edges","description":"Lines without arrowheads: solid `---`, dotted `-.-`, thick `===`.","source":"graph TD\n  A[Node 1] ---|related| B[Node 2]\n  B -.- C[Node 3]\n  C === D[Node 4]","category":"Flowchart","options":{}},{"title":"Bidirectional Arrows","description":"Arrows in both directions: `<-->`, `<-.->`, `<==>`.","source":"graph LR\n  A[Client] <-->|sync| B[Server]\n  B <-.->|heartbeat| C[Monitor]\n  C <==>|data| D[Storage]","category":"Flowchart","options":{}},{"title":"Parallel Links (&)","description":"Using `&` to create multiple edges from/to groups of nodes.","source":"graph TD\n  A[Input] & B[Config] --> C[Processor]\n  C --> D[Output] & E[Log]","category":"Flowchart","options":{}},{"title":"Chained Edges","description":"A long chain of nodes demonstrating edge chaining syntax.","source":"graph LR\n  A[Step 1] --> B[Step 2] --> C[Step 3] --> D[Step 4] --> E[Step 5]","category":"Flowchart","options":{}},{"title":"Direction: Left-Right (LR)","description":"Horizontal layout flowing left to right.","source":"graph LR\n  A[Input] --> B[Transform] --> C[Output]","category":"Flowchart","options":{}},{"title":"Direction: Bottom-Top (BT)","description":"Vertical layout flowing from bottom to top.","source":"graph BT\n  A[Foundation] --> B[Layer 2] --> C[Top]","category":"Flowchart","options":{}},{"title":"Subgraphs","description":"Grouped nodes inside labeled subgraph containers.","source":"graph TD\n  subgraph Frontend\n    A[React App] --> B[State Manager]\n  end\n  subgraph Backend\n    C[API Server] --> D[Database]\n  end\n  B --> C","category":"Flowchart","options":{}},{"title":"Nested Subgraphs","description":"Subgraphs inside subgraphs for hierarchical grouping.","source":"graph TD\n  subgraph Cloud\n    subgraph us-east [US East Region]\n      A[Web Server] --> B[App Server]\n    end\n    subgraph us-west [US West Region]\n      C[Web Server] --> D[App Server]\n    end\n  end\n  E[Load Balancer] --> A\n  E --> C","category":"Flowchart","options":{}},{"title":"Subgraph Direction Override","description":"Using `direction LR` inside a subgraph while the outer graph flows TD.","source":"graph TD\n  subgraph pipeline [Processing Pipeline]\n    direction LR\n    A[Input] --> B[Parse] --> C[Transform] --> D[Output]\n  end\n  E[Source] --> A\n  D --> F[Sink]","category":"Flowchart","options":{}},{"title":"::: Class Shorthand","description":"Assigning classes with `:::` syntax directly on node definitions.","source":"graph TD\n  A[Normal]:::default --> B[Highlighted]:::highlight --> C[Error]:::error\n  classDef default fill:#f4f4f5,stroke:#a1a1aa\n  classDef highlight fill:#fbbf24,stroke:#d97706\n  classDef error fill:#ef4444,stroke:#dc2626","category":"Flowchart","options":{}},{"title":"Inline Style Overrides","description":"Using `style` statements to override node fill and stroke colors.","source":"graph TD\n  A[Default] --> B[Custom Colors] --> C[Another Custom]\n  style B fill:#3b82f6,stroke:#1d4ed8,color:#ffffff\n  style C fill:#10b981,stroke:#059669","category":"Flowchart","options":{}},{"title":"CI/CD Pipeline","description":"A realistic CI/CD pipeline with decision points, feedback loops, and deployment stages.","source":"graph TD\n  subgraph ci [CI Pipeline]\n    A[Push Code] --> B{Tests Pass?}\n    B -->|Yes| C[Build Image]\n    B -->|No| D[Fix & Retry]\n    D -.-> A\n  end\n  C --> E([Deploy Staging])\n  E --> F{QA Approved?}\n  F -->|Yes| G((Production))\n  F -->|No| D","category":"Flowchart","options":{}},{"title":"System Architecture","description":"A microservices architecture with multiple services and data stores.","source":"graph LR\n  subgraph clients [Client Layer]\n    A([Web App]) --> B[API Gateway]\n    C([Mobile App]) --> B\n  end\n  subgraph services [Service Layer]\n    B --> D[Auth Service]\n    B --> E[User Service]\n    B --> F[Order Service]\n  end\n  subgraph data [Data Layer]\n    D --> G[(Auth DB)]\n    E --> H[(User DB)]\n    F --> I[(Order DB)]\n    F --> J([Message Queue])\n  end","category":"Flowchart","options":{}},{"title":"Decision Tree","description":"A branching decision flowchart with multiple outcomes.","source":"graph TD\n  A{Is it raining?} -->|Yes| B{Have umbrella?}\n  A -->|No| C([Go outside])\n  B -->|Yes| D([Go with umbrella])\n  B -->|No| E{Is it heavy?}\n  E -->|Yes| F([Stay inside])\n  E -->|No| G([Run for it])","category":"Flowchart","options":{}},{"title":"Git Branching Workflow","description":"A git flow showing feature branches, PRs, and release cycle.","source":"graph LR\n  A[main] --> B[develop]\n  B --> C[feature/auth]\n  B --> D[feature/ui]\n  C --> E{PR Review}\n  D --> E\n  E -->|approved| B\n  B --> F[release/1.0]\n  F --> G{Tests?}\n  G -->|pass| A\n  G -->|fail| F","category":"Flowchart","options":{}},{"title":"Basic State Diagram","description":"A simple `stateDiagram-v2` with start/end pseudostates and transitions.","source":"stateDiagram-v2\n  [*] --> Idle\n  Idle --> Active : start\n  Active --> Idle : cancel\n  Active --> Done : complete\n  Done --> [*]","category":"State","options":{}},{"title":"State: Composite States","description":"Nested composite states with inner transitions.","source":"stateDiagram-v2\n  [*] --> Idle\n  Idle --> Processing : submit\n  state Processing {\n    parse --> validate\n    validate --> execute\n  }\n  Processing --> Complete : done\n  Processing --> Error : fail\n  Error --> Idle : retry\n  Complete --> [*]","category":"State","options":{}},{"title":"State: Connection Lifecycle","description":"TCP-like connection state machine with multiple states.","source":"stateDiagram-v2\n  [*] --> Closed\n  Closed --> Connecting : connect\n  Connecting --> Connected : success\n  Connecting --> Closed : timeout\n  Connected --> Disconnecting : close\n  Connected --> Reconnecting : error\n  Reconnecting --> Connected : success\n  Reconnecting --> Closed : max_retries\n  Disconnecting --> Closed : done\n  Closed --> [*]","category":"State","options":{}},{"title":"Sequence: Basic Messages","description":"Simple request/response between two participants.","source":"sequenceDiagram\n  Alice->>Bob: Hello Bob!\n  Bob-->>Alice: Hi Alice!","category":"Sequence","options":{}},{"title":"Sequence: Participant Aliases","description":"Using `participant ... as ...` for compact diagram IDs with readable labels.","source":"sequenceDiagram\n  participant A as Alice\n  participant B as Bob\n  participant C as Charlie\n  A->>B: Hello\n  B->>C: Forward\n  C-->>A: Reply","category":"Sequence","options":{}},{"title":"Sequence: Actor Stick Figures","description":"Using `actor` instead of `participant` renders stick figures instead of boxes.","source":"sequenceDiagram\n  actor U as User\n  participant S as System\n  participant DB as Database\n  U->>S: Click button\n  S->>DB: Query\n  DB-->>S: Results\n  S-->>U: Display","category":"Sequence","options":{}},{"title":"Sequence: Arrow Types","description":"All arrow types: solid `->>` and dashed `-->>` with filled arrowheads, open arrows `-)` .","source":"sequenceDiagram\n  A->>B: Solid arrow (sync)\n  B-->>A: Dashed arrow (return)\n  A-)B: Open arrow (async)\n  B--)A: Open dashed arrow","category":"Sequence","options":{}},{"title":"Sequence: Activation Boxes","description":"Using `+` and `-` to show when participants are active.","source":"sequenceDiagram\n  participant C as Client\n  participant S as Server\n  C->>+S: Request\n  S->>+S: Process\n  S->>-S: Done\n  S-->>-C: Response","category":"Sequence","options":{}},{"title":"Sequence: Self-Messages","description":"A participant sending a message to itself (displayed as a loop arrow).","source":"sequenceDiagram\n  participant S as Server\n  S->>S: Internal process\n  S->>S: Validate\n  S-->>S: Log","category":"Sequence","options":{}},{"title":"Sequence: Loop Block","description":"A `loop` construct wrapping repeated message exchanges.","source":"sequenceDiagram\n  participant C as Client\n  participant S as Server\n  C->>S: Connect\n  loop Every 30s\n    C->>S: Heartbeat\n    S-->>C: Ack\n  end\n  C->>S: Disconnect","category":"Sequence","options":{}},{"title":"Sequence: Alt/Else Block","description":"Conditional branching with `alt` (if) and `else` blocks.","source":"sequenceDiagram\n  participant C as Client\n  participant S as Server\n  C->>S: Login\n  alt Valid credentials\n    S-->>C: 200 OK\n  else Invalid\n    S-->>C: 401 Unauthorized\n  else Account locked\n    S-->>C: 403 Forbidden\n  end","category":"Sequence","options":{}},{"title":"Sequence: Opt Block","description":"Optional block — executes only if condition is met.","source":"sequenceDiagram\n  participant A as App\n  participant C as Cache\n  participant DB as Database\n  A->>C: Get data\n  C-->>A: Cache miss\n  opt Cache miss\n    A->>DB: Query\n    DB-->>A: Results\n    A->>C: Store in cache\n  end","category":"Sequence","options":{}},{"title":"Sequence: Par Block","description":"Parallel execution with `par`/`and` constructs.","source":"sequenceDiagram\n  participant C as Client\n  participant A as AuthService\n  participant U as UserService\n  participant O as OrderService\n  C->>A: Authenticate\n  par Fetch user data\n    A->>U: Get profile\n  and Fetch orders\n    A->>O: Get orders\n  end\n  A-->>C: Combined response","category":"Sequence","options":{}},{"title":"Sequence: Critical Block","description":"Critical section that must complete atomically.","source":"sequenceDiagram\n  participant A as App\n  participant DB as Database\n  A->>DB: BEGIN\n  critical Transaction\n    A->>DB: UPDATE accounts\n    A->>DB: INSERT log\n  end\n  A->>DB: COMMIT","category":"Sequence","options":{}},{"title":"Sequence: Notes (Right/Left/Over)","description":"Notes positioned to the right, left, or over participants.","source":"sequenceDiagram\n  participant A as Alice\n  participant B as Bob\n  Note left of A: Alice prepares\n  A->>B: Hello\n  Note right of B: Bob thinks\n  B-->>A: Reply\n  Note over A,B: Conversation complete","category":"Sequence","options":{}},{"title":"Sequence: OAuth 2.0 Flow","description":"Full OAuth 2.0 authorization code flow with token exchange.","source":"sequenceDiagram\n  actor U as User\n  participant App as Client App\n  participant Auth as Auth Server\n  participant API as Resource API\n  U->>App: Click Login\n  App->>Auth: Authorization request\n  Auth->>U: Login page\n  U->>Auth: Credentials\n  Auth-->>App: Authorization code\n  App->>Auth: Exchange code for token\n  Auth-->>App: Access token\n  App->>API: Request + token\n  API-->>App: Protected resource\n  App-->>U: Display data","category":"Sequence","options":{}},{"title":"Sequence: Database Transaction","description":"Multi-step database transaction with rollback handling.","source":"sequenceDiagram\n  participant C as Client\n  participant S as Server\n  participant DB as Database\n  C->>S: POST /transfer\n  S->>DB: BEGIN\n  S->>DB: Debit account A\n  alt Success\n    S->>DB: Credit account B\n    S->>DB: INSERT audit_log\n    S->>DB: COMMIT\n    S-->>C: 200 OK\n  else Insufficient funds\n    S->>DB: ROLLBACK\n    S-->>C: 400 Bad Request\n  end","category":"Sequence","options":{}},{"title":"Sequence: Microservice Orchestration","description":"Complex multi-service flow with parallel calls and error handling.","source":"sequenceDiagram\n  participant G as Gateway\n  participant A as Auth\n  participant U as Users\n  participant O as Orders\n  participant N as Notify\n  G->>A: Validate token\n  A-->>G: Valid\n  par Fetch data\n    G->>U: Get user\n    U-->>G: User data\n  and\n    G->>O: Get orders\n    O-->>G: Order list\n  end\n  G->>N: Send notification\n  N-->>G: Queued\n  Note over G: Aggregate response","category":"Sequence","options":{}},{"title":"Class: Basic Class","description":"A single class with attributes and methods, rendered as a 3-compartment box.","source":"classDiagram\n  class Animal {\n    +String name\n    +int age\n    +eat() void\n    +sleep() void\n  }","category":"Class","options":{}},{"title":"Class: Visibility Markers","description":"All four visibility levels: `+` (public), `-` (private), `#` (protected), `~` (package).","source":"classDiagram\n  class User {\n    +String name\n    -String password\n    #int internalId\n    ~String packageField\n    +login() bool\n    -hashPassword() String\n    #validate() void\n    ~notify() void\n  }","category":"Class","options":{}},{"title":"Class: Interface Annotation","description":"Using `<<interface>>` annotation above the class name.","source":"classDiagram\n  class Serializable {\n    <<interface>>\n    +serialize() String\n    +deserialize(data) void\n  }","category":"Class","options":{}},{"title":"Class: Abstract Annotation","description":"Using `<<abstract>>` annotation for abstract classes.","source":"classDiagram\n  class Shape {\n    <<abstract>>\n    +String color\n    +area() double\n    +draw() void\n  }","category":"Class","options":{}},{"title":"Class: Enum Annotation","description":"Using `<<enumeration>>` annotation for enum types.","source":"classDiagram\n  class Status {\n    <<enumeration>>\n    ACTIVE\n    INACTIVE\n    PENDING\n    DELETED\n  }","category":"Class","options":{}},{"title":"Class: Inheritance (<|--)","description":"Inheritance relationship rendered with a hollow triangle marker.","source":"classDiagram\n  class Animal {\n    +String name\n    +eat() void\n  }\n  class Dog {\n    +String breed\n    +bark() void\n  }\n  class Cat {\n    +bool isIndoor\n    +meow() void\n  }\n  Animal <|-- Dog\n  Animal <|-- Cat","category":"Class","options":{}},{"title":"Class: Composition (*--)","description":"Composition — \"owns\" relationship with filled diamond marker.","source":"classDiagram\n  class Car {\n    +String model\n    +start() void\n  }\n  class Engine {\n    +int horsepower\n    +rev() void\n  }\n  Car *-- Engine","category":"Class","options":{}},{"title":"Class: Aggregation (o--)","description":"Aggregation — \"has\" relationship with hollow diamond marker.","source":"classDiagram\n  class University {\n    +String name\n  }\n  class Department {\n    +String faculty\n  }\n  University o-- Department","category":"Class","options":{}},{"title":"Class: Association (-->)","description":"Basic association — simple directed arrow.","source":"classDiagram\n  class Customer {\n    +String name\n  }\n  class Order {\n    +int orderId\n  }\n  Customer --> Order","category":"Class","options":{}},{"title":"Class: Dependency (..>)","description":"Dependency — dashed line with open arrow.","source":"classDiagram\n  class Service {\n    +process() void\n  }\n  class Repository {\n    +find() Object\n  }\n  Service ..> Repository","category":"Class","options":{}},{"title":"Class: Realization (..|>)","description":"Realization — dashed line with hollow triangle (implements interface).","source":"classDiagram\n  class Flyable {\n    <<interface>>\n    +fly() void\n  }\n  class Bird {\n    +fly() void\n    +sing() void\n  }\n  Bird ..|> Flyable","category":"Class","options":{}},{"title":"Class: All 6 Relationship Types","description":"Every relationship type in a single diagram for comparison.","source":"classDiagram\n  A <|-- B : inheritance\n  C *-- D : composition\n  E o-- F : aggregation\n  G --> H : association\n  I ..> J : dependency\n  K ..|> L : realization","category":"Class","options":{}},{"title":"Class: Relationship Labels","description":"Labeled relationships between classes with descriptive text.","source":"classDiagram\n  class Teacher {\n    +String name\n  }\n  class Student {\n    +String name\n  }\n  class Course {\n    +String title\n  }\n  Teacher --> Course : teaches\n  Student --> Course : enrolled in","category":"Class","options":{}},{"title":"Class: Design Pattern — Observer","description":"The Observer (publish-subscribe) design pattern with interface + concrete implementations.","source":"classDiagram\n  class Subject {\n    <<interface>>\n    +attach(Observer) void\n    +detach(Observer) void\n    +notify() void\n  }\n  class Observer {\n    <<interface>>\n    +update() void\n  }\n  class EventEmitter {\n    -List~Observer~ observers\n    +attach(Observer) void\n    +detach(Observer) void\n    +notify() void\n  }\n  class Logger {\n    +update() void\n  }\n  class Alerter {\n    +update() void\n  }\n  Subject <|.. EventEmitter\n  Observer <|.. Logger\n  Observer <|.. Alerter\n  EventEmitter --> Observer","category":"Class","options":{}},{"title":"Class: MVC Architecture","description":"Model-View-Controller pattern showing relationships between layers.","source":"classDiagram\n  class Model {\n    -data Map\n    +getData() Map\n    +setData(key, val) void\n    +notify() void\n  }\n  class View {\n    -model Model\n    +render() void\n    +update() void\n  }\n  class Controller {\n    -model Model\n    -view View\n    +handleInput(event) void\n    +updateModel(data) void\n  }\n  Controller --> Model : updates\n  Controller --> View : refreshes\n  View --> Model : reads\n  Model ..> View : notifies","category":"Class","options":{}},{"title":"Class: Full Hierarchy","description":"A complete class hierarchy with abstract base, interfaces, and concrete classes.","source":"classDiagram\n  class Animal {\n    <<abstract>>\n    +String name\n    +int age\n    +eat() void\n    +sleep() void\n  }\n  class Mammal {\n    +bool warmBlooded\n    +nurse() void\n  }\n  class Bird {\n    +bool canFly\n    +layEggs() void\n  }\n  class Dog {\n    +String breed\n    +bark() void\n  }\n  class Cat {\n    +bool isIndoor\n    +purr() void\n  }\n  class Parrot {\n    +String vocabulary\n    +speak() void\n  }\n  Animal <|-- Mammal\n  Animal <|-- Bird\n  Mammal <|-- Dog\n  Mammal <|-- Cat\n  Bird <|-- Parrot","category":"Class","options":{}},{"title":"ER: Basic Relationship","description":"A simple one-to-many relationship between two entities.","source":"erDiagram\n  CUSTOMER ||--o{ ORDER : places","category":"ER","options":{}},{"title":"ER: Entity with Attributes","description":"An entity with typed attributes and `PK`/`FK`/`UK` key badges.","source":"erDiagram\n  CUSTOMER {\n    int id PK\n    string name\n    string email UK\n    date created_at\n  }","category":"ER","options":{}},{"title":"ER: Attribute Keys (PK, FK, UK)","description":"All three key constraint types rendered as badges.","source":"erDiagram\n  ORDER {\n    int id PK\n    int customer_id FK\n    string invoice_number UK\n    decimal total\n    date order_date\n    string status\n  }","category":"ER","options":{}},{"title":"ER: Exactly One to Exactly One (||--||)","description":"One-to-one mandatory relationship.","source":"erDiagram\n  PERSON ||--|| PASSPORT : has","category":"ER","options":{}},{"title":"ER: Exactly One to Zero-or-Many (||--o{)","description":"Classic one-to-many optional relationship (crow's foot).","source":"erDiagram\n  CUSTOMER ||--o{ ORDER : places","category":"ER","options":{}},{"title":"ER: Zero-or-One to One-or-Many (|o--|{)","description":"Optional on one side, at-least-one on the other.","source":"erDiagram\n  SUPERVISOR |o--|{ EMPLOYEE : manages","category":"ER","options":{}},{"title":"ER: One-or-More to Zero-or-Many (}|--o{)","description":"At-least-one to zero-or-many relationship.","source":"erDiagram\n  TEACHER }|--o{ COURSE : teaches","category":"ER","options":{}},{"title":"ER: All Cardinality Types","description":"Every cardinality combination in one diagram.","source":"erDiagram\n  A ||--|| B : one-to-one\n  C ||--o{ D : one-to-many\n  E |o--|{ F : opt-to-many\n  G }|--o{ H : many-to-many","category":"ER","options":{}},{"title":"ER: Identifying (Solid) Relationship","description":"Solid line indicating an identifying relationship (child depends on parent for identity).","source":"erDiagram\n  ORDER ||--|{ LINE_ITEM : contains","category":"ER","options":{}},{"title":"ER: Non-Identifying (Dashed) Relationship","description":"Dashed line indicating a non-identifying relationship.","source":"erDiagram\n  USER ||..o{ LOG_ENTRY : generates\n  USER ||..o{ SESSION : opens","category":"ER","options":{}},{"title":"ER: Mixed Identifying & Non-Identifying","description":"Both solid and dashed lines in the same diagram.","source":"erDiagram\n  ORDER ||--|{ LINE_ITEM : contains\n  ORDER ||..o{ SHIPMENT : ships-via\n  PRODUCT ||--o{ LINE_ITEM : includes\n  PRODUCT ||..o{ REVIEW : receives","category":"ER","options":{}},{"title":"ER: E-Commerce Schema","description":"Full e-commerce database schema with customers, orders, products, and line items.","source":"erDiagram\n  CUSTOMER {\n    int id PK\n    string name\n    string email UK\n  }\n  ORDER {\n    int id PK\n    date created\n    int customer_id FK\n  }\n  PRODUCT {\n    int id PK\n    string name\n    float price\n  }\n  LINE_ITEM {\n    int id PK\n    int order_id FK\n    int product_id FK\n    int quantity\n  }\n  CUSTOMER ||--o{ ORDER : places\n  ORDER ||--|{ LINE_ITEM : contains\n  PRODUCT ||--o{ LINE_ITEM : includes","category":"ER","options":{}},{"title":"ER: Blog Platform Schema","description":"Blog system with users, posts, comments, and tags.","source":"erDiagram\n  USER {\n    int id PK\n    string username UK\n    string email UK\n    date joined\n  }\n  POST {\n    int id PK\n    string title\n    text content\n    int author_id FK\n    date published\n  }\n  COMMENT {\n    int id PK\n    text body\n    int post_id FK\n    int user_id FK\n    date created\n  }\n  TAG {\n    int id PK\n    string name UK\n  }\n  USER ||--o{ POST : writes\n  USER ||--o{ COMMENT : authors\n  POST ||--o{ COMMENT : has\n  POST }|--o{ TAG : tagged-with","category":"ER","options":{}},{"title":"ER: School Management Schema","description":"School system with students, teachers, courses, and enrollments.","source":"erDiagram\n  STUDENT {\n    int id PK\n    string name\n    date dob\n    string grade\n  }\n  TEACHER {\n    int id PK\n    string name\n    string department\n  }\n  COURSE {\n    int id PK\n    string title\n    int teacher_id FK\n    int credits\n  }\n  ENROLLMENT {\n    int id PK\n    int student_id FK\n    int course_id FK\n    string semester\n    float grade\n  }\n  TEACHER ||--o{ COURSE : teaches\n  STUDENT ||--o{ ENROLLMENT : enrolled\n  COURSE ||--o{ ENROLLMENT : has","category":"ER","options":{}}];
  var THEMES = window.__mermaid.THEMES;
  var renderMermaid = window.__mermaid.renderMermaid;
  var renderMermaidAscii = window.__mermaid.renderMermaidAscii;

  var totalTimingEl = document.getElementById('total-timing');

  // -- Theme state --
  // Stores each SVG element's original inline style attribute (from initial render)
  // so we can restore per-sample colors when switching back to "Default".
  var originalSvgStyles = [];

  function hexToRgb(hex) {
    if (!hex || typeof hex !== 'string') return null;
    var value = hex.trim();
    if (value[0] === '#') value = value.slice(1);
    if (value.length === 3) {
      value = value[0] + value[0] + value[1] + value[1] + value[2] + value[2];
    }
    if (value.length !== 6) return null;
    var intValue = parseInt(value, 16);
    if (Number.isNaN(intValue)) return null;
    return {
      r: (intValue >> 16) & 255,
      g: (intValue >> 8) & 255,
      b: intValue & 255,
    };
  }

  function setShadowVars(theme) {
    var body = document.body;
    var fg = theme ? theme.fg : '#27272A';
    var bg = theme ? theme.bg : '#FFFFFF';
    var accent = theme ? (theme.accent || '#3b82f6') : '#3b82f6';
    var fgRgb = hexToRgb(fg) || { r: 39, g: 39, b: 42 };
    var bgRgb = hexToRgb(bg) || { r: 255, g: 255, b: 255 };
    var accentRgb = hexToRgb(accent) || { r: 59, g: 130, b: 246 };
    var brightness = (bgRgb.r * 299 + bgRgb.g * 587 + bgRgb.b * 114) / 1000;
    var darkMode = brightness < 140;

    body.style.setProperty('--foreground-rgb', fgRgb.r + ', ' + fgRgb.g + ', ' + fgRgb.b);
    body.style.setProperty('--accent-rgb', accentRgb.r + ', ' + accentRgb.g + ', ' + accentRgb.b);
    body.style.setProperty('--shadow-border-opacity', darkMode ? '0.15' : '0.08');
    body.style.setProperty('--shadow-blur-opacity', darkMode ? '0.12' : '0.06');
  }

  // Update <meta name="theme-color"> so Safari 26+ title bar matches the page.
  // Computes color-mix(in srgb, fg 4%, bg) in JS since browsers may not
  // reliably re-evaluate CSS color-mix() for the meta tag.
  function updateThemeColor(fg, bg) {
    var fgRgb = hexToRgb(fg) || { r: 39, g: 39, b: 42 };
    var bgRgb = hexToRgb(bg) || { r: 255, g: 255, b: 255 };
    // Mix: 4% foreground, 96% background (matches body CSS)
    var r = Math.round(bgRgb.r * 0.96 + fgRgb.r * 0.04);
    var g = Math.round(bgRgb.g * 0.96 + fgRgb.g * 0.04);
    var b = Math.round(bgRgb.b * 0.96 + fgRgb.b * 0.04);
    var hex = '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
    document.getElementById('theme-color-meta').setAttribute('content', hex);
    // Update --theme-bar-bg on body so gradients update instantly
    document.body.style.setProperty('--theme-bar-bg', hex);
    // Force Safari 26+ to re-read title bar color by updating the invisible fixed div
    // and triggering a reflow (display toggle + offsetHeight read)
    var safariDiv = document.getElementById('safari-theme-color');
    safariDiv.style.background = hex;
    safariDiv.style.display = 'none';
    void safariDiv.offsetHeight;
    safariDiv.style.display = '';
  }

  // ----------------------------------------------------------------
  // Apply a named theme (or '' for Default) to the entire page.
  //
  // This is instant — no re-rendering needed. SVGs use CSS custom
  // properties internally, so updating --bg/--fg on the <svg> tag
  // re-paints all nodes, edges, text, and backgrounds via color-mix().
  // ----------------------------------------------------------------
  function applyTheme(themeKey) {
    var theme = themeKey ? THEMES[themeKey] : null;
    var body = document.body;

    // 1. Update body CSS variables — the entire page derives from these
    if (theme) {
      body.style.setProperty('--t-bg', theme.bg);
      body.style.setProperty('--t-fg', theme.fg);
      body.style.setProperty('--t-accent', theme.accent || '#3b82f6');
    } else {
      body.style.setProperty('--t-bg', '#FFFFFF');
      body.style.setProperty('--t-fg', '#27272A');
      body.style.setProperty('--t-accent', '#3b82f6');
    }
    setShadowVars(theme);
    updateThemeColor(theme ? theme.fg : '#27272A', theme ? theme.bg : '#FFFFFF');

    // 2. Update all rendered SVG elements' CSS variables
    var svgs = document.querySelectorAll('.svg-container svg');
    for (var j = 0; j < svgs.length; j++) {
      var svgEl = svgs[j];
      if (theme) {
        // Override with the global theme colors
        svgEl.style.setProperty('--bg', theme.bg);
        svgEl.style.setProperty('--fg', theme.fg);
        // Set enrichment variables if provided, else remove so SVG
        // internal color-mix() fallbacks activate
        var enrichment = ['line', 'accent', 'muted', 'surface', 'border'];
        for (var k = 0; k < enrichment.length; k++) {
          var prop = enrichment[k];
          if (theme[prop]) svgEl.style.setProperty('--' + prop, theme[prop]);
          else svgEl.style.removeProperty('--' + prop);
        }
      } else {
        // Restore original inline style from initial render
        if (originalSvgStyles[j] !== undefined) {
          svgEl.setAttribute('style', originalSvgStyles[j]);
        }
      }
    }

    // 3. Update SVG panel backgrounds to match (skip hero panels - keep transparent)
    for (var j = 0; j < samples.length; j++) {
      var panel = document.getElementById('svg-panel-' + j);
      if (!panel) continue;
      // Skip hero panels - they stay transparent
      if (panel.classList.contains('hero-diagram-panel')) continue;
      if (theme) {
        panel.style.background = theme.bg;
      } else {
        // Default mode: use the per-sample bg (or clear for page default)
        var sampleBg = panel.getAttribute('data-sample-bg');
        panel.style.background = sampleBg || '';
      }
    }

    // 4. Update active pill
    var pills = document.querySelectorAll('.theme-pill');
    for (var j = 0; j < pills.length; j++) {
      var isActive = pills[j].getAttribute('data-theme') === themeKey;
      pills[j].classList.toggle('active', isActive);
      pills[j].classList.toggle('shadow-tinted', isActive);
    }

    // 5. Persist selection
    if (themeKey) {
      localStorage.setItem('mermaid-theme', themeKey);
    } else {
      localStorage.removeItem('mermaid-theme');
    }
  }

  // -- Set up theme pill click handlers --
  document.getElementById('theme-pills').addEventListener('click', function(e) {
    var pill = e.target.closest('.theme-pill');
    if (!pill || pill.id === 'theme-more-btn') return;
    applyTheme(pill.getAttribute('data-theme') || '');
    // Close "More" dropdown if a theme was picked from it
    var dd = document.getElementById('theme-more-dropdown');
    if (dd && dd.classList.contains('open')) dd.classList.remove('open');
  });

  // -- "More" themes dropdown (direct listener, same pattern as Contents) --
  var moreBtn = document.getElementById('theme-more-btn');
  var moreDropdown = document.getElementById('theme-more-dropdown');

  if (moreBtn && moreDropdown) {
    moreBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      moreDropdown.classList.toggle('open');
    });

    // Close on outside click
    document.addEventListener('click', function(e) {
      if (!moreDropdown.classList.contains('open')) return;
      if (!e.target.closest('.theme-more-wrapper')) {
        moreDropdown.classList.remove('open');
      }
    });

    // Close on Escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && moreDropdown.classList.contains('open')) {
        moreDropdown.classList.remove('open');
      }
    });
  }

  // -- Random theme button --
  var randomThemeBtn = document.getElementById('random-theme-btn');
  var themeKeys = Object.keys(THEMES);
  var currentThemeKey = localStorage.getItem('mermaid-theme') || '';

  if (randomThemeBtn) {
    randomThemeBtn.addEventListener('click', function() {
      // Filter out the current theme so we never pick the same one
      var availableKeys = themeKeys.filter(function(k) { return k !== currentThemeKey; });
      // Also include default ('') if not currently selected
      if (currentThemeKey !== '') availableKeys.push('');
      // Pick a random theme
      var randomIndex = Math.floor(Math.random() * availableKeys.length);
      var newThemeKey = availableKeys[randomIndex];
      currentThemeKey = newThemeKey;
      applyTheme(newThemeKey);
    });
  }

  // -- Brand dropdown --
  var brandBtn = document.getElementById('brand-badge-btn');
  var brandDropdown = document.getElementById('brand-dropdown');

  if (brandBtn && brandDropdown) {
    brandBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      var isOpen = brandDropdown.classList.toggle('open');
      brandBtn.classList.toggle('active', isOpen);
      brandBtn.classList.toggle('shadow-tinted', isOpen);
    });

    // Close on outside click
    document.addEventListener('click', function(e) {
      if (!brandDropdown.classList.contains('open')) return;
      if (!e.target.closest('.brand-badge-wrapper')) {
        brandDropdown.classList.remove('open');
        brandBtn.classList.remove('active');
        brandBtn.classList.remove('shadow-tinted');
      }
    });

    // Close on Escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && brandDropdown.classList.contains('open')) {
        brandDropdown.classList.remove('open');
        brandBtn.classList.remove('active');
        brandBtn.classList.remove('shadow-tinted');
      }
    });
  }

  // -- Mega menu (Contents dropdown) --
  var contentsBtn = document.getElementById('contents-btn');
  var megaMenu = document.getElementById('mega-menu');

  contentsBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    var isOpen = megaMenu.classList.toggle('open');
    contentsBtn.classList.toggle('active', isOpen);
    contentsBtn.classList.toggle('shadow-tinted', isOpen);
  });

  // Close on clicking a ToC link (smooth scroll to target)
  megaMenu.addEventListener('click', function(e) {
    var link = e.target.closest('a');
    if (!link) return;
    e.preventDefault();
    megaMenu.classList.remove('open');
    contentsBtn.classList.remove('active');
    contentsBtn.classList.remove('shadow-tinted');
    var target = document.querySelector(link.getAttribute('href'));
    if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });

  // Close on outside click
  document.addEventListener('click', function(e) {
    if (!megaMenu.classList.contains('open')) return;
    if (!e.target.closest('.mega-menu') && !e.target.closest('.contents-btn')) {
      megaMenu.classList.remove('open');
      contentsBtn.classList.remove('active');
      contentsBtn.classList.remove('shadow-tinted');
    }
  });

  // Close on Escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && megaMenu.classList.contains('open')) {
      megaMenu.classList.remove('open');
      contentsBtn.classList.remove('active');
      contentsBtn.classList.remove('shadow-tinted');
    }
  });

  // -- Restore saved theme immediately (before rendering begins) --
  var savedTheme = localStorage.getItem('mermaid-theme');
  if (savedTheme && THEMES[savedTheme]) {
    // Apply page-level CSS variables right away to avoid flash
    document.body.style.setProperty('--t-bg', THEMES[savedTheme].bg);
    document.body.style.setProperty('--t-fg', THEMES[savedTheme].fg);
    document.body.style.setProperty('--t-accent', THEMES[savedTheme].accent || '#3b82f6');
    setShadowVars(THEMES[savedTheme]);
    updateThemeColor(THEMES[savedTheme].fg, THEMES[savedTheme].bg);
    // Mark the correct pill as active
    var pills = document.querySelectorAll('.theme-pill');
    for (var j = 0; j < pills.length; j++) {
      var isActive = pills[j].getAttribute('data-theme') === savedTheme;
      pills[j].classList.toggle('active', isActive);
      pills[j].classList.toggle('shadow-tinted', isActive);
    }
  } else {
    setShadowVars(null);
  }

  // ============================================================================
  // Progressive rendering — render each diagram sequentially
  // ============================================================================

  var totalStart = performance.now();

  for (var i = 0; i < samples.length; i++) {
    var sample = samples[i];
    var svgContainer = document.getElementById('svg-' + i);
    var asciiContainer = document.getElementById('ascii-' + i);
    var svgPanel = document.getElementById('svg-panel-' + i);

    // Render SVG — wrapped in a timeout guard so a stalled layout
    // doesn't block all remaining diagrams from rendering.
    try {
      var svg = await renderMermaid(sample.source, sample.options);
      svgContainer.innerHTML = svg;

      // Store the SVG's original inline style for Default mode restoration
      var svgEl = svgContainer.querySelector('svg');
      if (svgEl) {
        originalSvgStyles.push(svgEl.getAttribute('style') || '');

        // If a global theme is active, immediately override the SVG's variables
        if (savedTheme && THEMES[savedTheme]) {
          var th = THEMES[savedTheme];
          svgEl.style.setProperty('--bg', th.bg);
          svgEl.style.setProperty('--fg', th.fg);
          var enrichment = ['line', 'accent', 'muted', 'surface', 'border'];
          for (var k = 0; k < enrichment.length; k++) {
            if (th[enrichment[k]]) svgEl.style.setProperty('--' + enrichment[k], th[enrichment[k]]);
            else svgEl.style.removeProperty('--' + enrichment[k]);
          }
        }
      } else {
        originalSvgStyles.push('');
      }

      // Set panel background to match the SVG (skip for hero panels - keep transparent)
      var isHeroPanel = svgPanel.classList.contains('hero-diagram-panel');
      if (!isHeroPanel) {
        if (savedTheme && THEMES[savedTheme]) {
          svgPanel.style.background = THEMES[savedTheme].bg;
        } else {
          var sampleBg = svgPanel.getAttribute('data-sample-bg');
          if (sampleBg) svgPanel.style.background = sampleBg;
        }
      }
    } catch (err) {
      svgContainer.innerHTML = '<div class="render-error">SVG Error: ' + escapeHtml(String(err)) + '</div>';
      originalSvgStyles.push('');
    }

    // Hero samples don't have ASCII panels
    if (asciiContainer) {
      try {
        asciiContainer.textContent = renderMermaidAscii(sample.source);
      } catch (e) {
        asciiContainer.textContent = '(ASCII not supported for this diagram type)';
      }
    }

  }

  // Done — show total time
  var totalMs = (performance.now() - totalStart).toFixed(0);
  totalTimingEl.textContent = samples.length + ' samples rendered client-side in ' + totalMs + ' ms';

  function escapeHtml(text) {
    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
  }
  </script>
  </div><!-- .content-wrapper -->

  <footer class="site-footer">
    <span>&copy; 2026 Craft Docs Limited, Inc. All rights reserved.</span>
    <div class="footer-links">
      <a href="mailto:agents@craft.do">Contact</a>
      <a href="https://github.com/lukilabs/beautiful-mermaid" target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
      </a>
      <a href="https://x.com/craftdocs" target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
      </a>
    </div>
  </footer>
</body>
</html>