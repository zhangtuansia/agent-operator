## Features

### Workflow State Badges
- Sessions now display their workflow state as a badge alongside labels
- Click to change state via dropdown menu
- State selection available in the # autocomplete menu
- State persists across session switches

### Inline Diff Viewer
- Diff code blocks in markdown now render with rich side-by-side visualization
- Automatic fallback to plain code block on render failure

### TurnCard Expansion Persistence
- Expanded/collapsed state of turn cards persists across session switches
- State stored in localStorage with LRU bounds (max 100 sessions)

## Improvements

### Unified Version Management
- Consolidated versioning to use package.json as the single source of truth
- Removed app-version.ts in favor of direct package.json reads
- Build scripts, CI workflows, and runtime code all use the same version source
- Simplified release tooling (removed sync-version.ts)

### Window State Handling
- Improved URL handling for window state restoration
- Removed unnecessary URL sanitization (query params are extracted and rebuilt safely)

### Windows SDK Setup
- Better error detection and user-friendly instructions for missing .claude/skills directory

## Bug Fixes

- Fixed version mismatch between app-version.ts and package.json causing incorrect release manifests
- Moved turn card state from global Jotai atoms to session-specific localStorage for better isolation
